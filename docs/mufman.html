<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="generator" content="prochelp">
<title>MUF Reference Manual</title>
</head>
<body>
<h1>MUF Reference Manual</h1>
<address>by Revar Desmera &lt;revar@belfry.com&gt;</address>
<ul>
<li><a href="#AlphaList">Alphabetical List of Topics</a></li>
<li><a href="#SectList">List of Topics by Category</a></li>
</ul>
<h2 id="SectList">List of Topics by Category</h2>
<p>You can get more help on the following topics:</p>
<ul>
  <li><a href="#DefDets">Details and Definitions</a></li>
  <li><a href="#CompDefs">Macros and Compiler Directives</a></li>
  <li><a href="#StackOps">Stack Manipulation Operators</a></li>
  <li><a href="#VarHandling">Variables and Handling Thereof</a></li>
  <li><a href="#LogicOps">Logical Operators</a></li>
  <li><a href="#ExecStructs">Execution Control Structures</a></li>
  <li><a href="#IOOps">I/O Operators</a></li>
  <li><a href="#MathOps">Mathematical Operators</a></li>
  <li><a href="#FloatOps">Floating Point Operators</a></li>
  <li><a href="#StringOps">String Manipulation Operators</a></li>
  <li><a href="#LockOps">Lock Manipulation Operators</a></li>
  <li><a href="#ArrayOps">Array Manipulation Operators</a></li>
  <li><a href="#PropOps">Property Manipulation Operators</a></li>
  <li><a href="#DBOps">Database Related Operators</a></li>
  <li><a href="#TimeOps">Time Manipulation Operators</a></li>
  <li><a href="#ProcOps">Process Management Operators</a></li>
  <li><a href="#ConnOps">Connection Management Operators</a></li>
  <li><a href="#EventOps">Event Handling Operators</a></li>
  <li><a href="#MCPOps">MCP Support Operators</a></li>
  <li><a href="#GUIOps">GUI Support Operators</a></li>
  <li><a href="#Exceptions">Exception Handling</a></li>
  <li><a href="#Debug">Debugging</a></li>
  <li><a href="#MiscOps">Miscellaneous</a></li>
</ul>

<h2 id="AlphaList">Alphabetical List of Topics</h2>
<h3>Symbols</h3>
<ul>
    <li><a href="#!">!</a></li>
    <li><a href="#!=">!=</a></li>
    <li><a href="#$abort">$abort</a></li>
    <li><a href="#$author">$author</a></li>
    <li><a href="#$cleardefs">$cleardefs</a></li>
    <li><a href="#$def">$def</a></li>
    <li><a href="#$define">$define</a></li>
    <li><a href="#$doccmd">$doccmd</a></li>
    <li><a href="#$echo">$echo</a></li>
    <li><a href="#$entrypoint">$entrypoint</a></li>
    <li><a href="#$ifcancall">$ifcancall</a></li>
    <li><a href="#$ifdef">$ifdef</a></li>
    <li><a href="#$iflib">$iflib</a></li>
    <li><a href="#$iflibver">$iflibver</a></li>
    <li><a href="#$ifncancall">$ifncancall</a></li>
    <li><a href="#$ifndef">$ifndef</a></li>
    <li><a href="#$ifnlib">$ifnlib</a></li>
    <li><a href="#$ifnlibver">$ifnlibver</a></li>
    <li><a href="#$ifnver">$ifnver</a></li>
    <li><a href="#$ifver">$ifver</a></li>
    <li><a href="#$include">$include</a></li>
    <li><a href="#$language">$language</a></li>
    <li><a href="#$lib-version">$lib-version</a></li>
    <li><a href="#$libdef">$libdef</a></li>
    <li><a href="#$note">$note</a></li>
    <li><a href="#$pragma">$pragma</a></li>
    <li><a href="#$pubdef">$pubdef</a></li>
    <li><a href="#$undef">$undef</a></li>
    <li><a href="#$version">$version</a></li>
    <li><a href="#%">%</a></li>
    <li><a href="#'">'</a></li>
    <li><a href="#*">*</a></li>
    <li><a href="#+">+</a></li>
    <li><a href="#++">++</a></li>
    <li><a href="#-">-</a></li>
    <li><a href="#--">--</a></li>
    <li><a href="#-rot">-rot</a></li>
    <li><a href="#/">/</a></li>
    <li><a href="#&lt;">&lt;</a></li>
    <li><a href="#&lt;= ">&lt;= </a></li>
    <li><a href="#=">=</a></li>
    <li><a href="#&gt;">&gt;</a></li>
    <li><a href="#&gt;=">&gt;=</a></li>
    <li><a href="#?dup">?dup</a></li>
    <li><a href="#@">@</a></li>
    <li><a href="#\">\</a></li>
    <li><a href="#__fuzzball__">__fuzzball__</a></li>
    <li><a href="#__muckname">__muckname</a></li>
    <li><a href="#__prog__">__prog__</a></li>
    <li><a href="#__version">__version</a></li>
    <li><a href="#{">{</a></li>
    <li><a href="#}">}</a></li>
    <li><a href="#}cat">}cat</a></li>
    <li><a href="#}dict">}dict</a></li>
    <li><a href="#}join">}join</a></li>
    <li><a href="#}list">}list</a></li>
    <li><a href="#}tell">}tell</a></li>
</ul>

<h3>A's</h3>
<ul>
    <li><a href="#abort">abort</a></li>
    <li><a href="#abs">abs</a></li>
    <li><a href="#acos">acos</a></li>
    <li><a href="#addpennies">addpennies</a></li>
    <li><a href="#addprop">addprop</a></li>
    <li><a href="#address?">address?</a></li>
    <li><a href="#and">and</a></li>
    <li><a href="#ansi_midstr">ansi_midstr</a></li>
    <li><a href="#ansi_strcut">ansi_strcut</a></li>
    <li><a href="#ansi_strip">ansi_strip</a></li>
    <li><a href="#ansi_strlen">ansi_strlen</a></li>
    <li><a href="#array?">array?</a></li>
    <li><a href="#array_appenditem">array_appenditem</a></li>
    <li><a href="#array_compare">array_compare</a></li>
    <li><a href="#array_count">array_count</a></li>
    <li><a href="#array_cut">array_cut</a></li>
    <li><a href="#array_default_pinning">array_default_pinning</a></li>
    <li><a href="#array_delitem">array_delitem</a></li>
    <li><a href="#array_delrange">array_delrange</a></li>
    <li><a href="#array_diff">array_diff</a></li>
    <li><a href="#array_excludeval">array_excludeval</a></li>
    <li><a href="#array_explode">array_explode</a></li>
    <li><a href="#array_extract">array_extract</a></li>
    <li><a href="#array_filter_flags">array_filter_flags</a></li>
    <li><a href="#array_filter_lock">array_filter_lock</a></li>
    <li><a href="#array_filter_prop">array_filter_prop</a></li>
    <li><a href="#array_findval">array_findval</a></li>
    <li><a href="#array_first">array_first</a></li>
    <li><a href="#array_fmtstrings">array_fmtstrings</a></li>
    <li><a href="#array_get_ignorelist">array_get_ignorelist</a></li>
    <li><a href="#array_get_propdirs">array_get_propdirs</a></li>
    <li><a href="#array_get_proplist">array_get_proplist</a></li>
    <li><a href="#array_get_propvals">array_get_propvals</a></li>
    <li><a href="#array_get_reflist">array_get_reflist</a></li>
    <li><a href="#array_getitem">array_getitem</a></li>
    <li><a href="#array_getrange">array_getrange</a></li>
    <li><a href="#array_insertitem">array_insertitem</a></li>
    <li><a href="#array_insertrange">array_insertrange</a></li>
    <li><a href="#array_interpret">array_interpret</a></li>
    <li><a href="#array_intersect">array_intersect</a></li>
    <li><a href="#array_join">array_join</a></li>
    <li><a href="#array_keys">array_keys</a></li>
    <li><a href="#array_last">array_last</a></li>
    <li><a href="#array_make">array_make</a></li>
    <li><a href="#array_make_dict">array_make_dict</a></li>
    <li><a href="#array_matchkey">array_matchkey</a></li>
    <li><a href="#array_matchval">array_matchval</a></li>
    <li><a href="#array_ndiff">array_ndiff</a></li>
    <li><a href="#array_nested_del">array_nested_del</a></li>
    <li><a href="#array_nested_get">array_nested_get</a></li>
    <li><a href="#array_nested_set">array_nested_set</a></li>
    <li><a href="#array_next">array_next</a></li>
    <li><a href="#array_nintersect">array_nintersect</a></li>
    <li><a href="#array_notify">array_notify</a></li>
    <li><a href="#array_notify_secure">array_notify_secure</a></li>
    <li><a href="#array_nunion">array_nunion</a></li>
    <li><a href="#array_pin">array_pin</a></li>
    <li><a href="#array_prev">array_prev</a></li>
    <li><a href="#array_put_proplist">array_put_proplist</a></li>
    <li><a href="#array_put_propvals">array_put_propvals</a></li>
    <li><a href="#array_put_reflist">array_put_reflist</a></li>
    <li><a href="#array_reverse">array_reverse</a></li>
    <li><a href="#array_setitem">array_setitem</a></li>
    <li><a href="#array_setrange">array_setrange</a></li>
    <li><a href="#array_sort">array_sort</a></li>
    <li><a href="#array_sort_indexed">array_sort_indexed</a></li>
    <li><a href="#array_union">array_union</a></li>
    <li><a href="#array_unpin">array_unpin</a></li>
    <li><a href="#array_vals">array_vals</a></li>
    <li><a href="#arrive">arrive</a></li>
    <li><a href="#asin">asin</a></li>
    <li><a href="#atan">atan</a></li>
    <li><a href="#atan2">atan2</a></li>
    <li><a href="#atoi">atoi</a></li>
    <li><a href="#awake?">awake?</a></li>
</ul>

<h3>B's</h3>
<ul>
    <li><a href="#background">background</a></li>
    <li><a href="#begin">begin</a></li>
    <li><a href="#bg_mode">bg_mode</a></li>
    <li><a href="#bitand">bitand</a></li>
    <li><a href="#bitor">bitor</a></li>
    <li><a href="#bitshift">bitshift</a></li>
    <li><a href="#bitxor">bitxor</a></li>
    <li><a href="#blessed?">blessed?</a></li>
    <li><a href="#blessprop">blessprop</a></li>
    <li><a href="#break">break</a></li>
    <li><a href="#breakpoints">breakpoints</a></li>
</ul>

<h3>C's</h3>
<ul>
    <li><a href="#c_button">c_button</a></li>
    <li><a href="#c_checkbox">c_checkbox</a></li>
    <li><a href="#c_combobox">c_combobox</a></li>
    <li><a href="#c_datum">c_datum</a></li>
    <li><a href="#c_edit">c_edit</a></li>
    <li><a href="#c_frame">c_frame</a></li>
    <li><a href="#c_hrule">c_hrule</a></li>
    <li><a href="#c_image">c_image</a></li>
    <li><a href="#c_label">c_label</a></li>
    <li><a href="#c_listbox">c_listbox</a></li>
    <li><a href="#c_menu">c_menu</a></li>
    <li><a href="#c_multiedit">c_multiedit</a></li>
    <li><a href="#c_notebook">c_notebook</a></li>
    <li><a href="#c_radiobtn">c_radiobtn</a></li>
    <li><a href="#c_scale">c_scale</a></li>
    <li><a href="#c_spinner">c_spinner</a></li>
    <li><a href="#c_vrule">c_vrule</a></li>
    <li><a href="#call">call</a></li>
    <li><a href="#caller">caller</a></li>
    <li><a href="#cancall?">cancall?</a></li>
    <li><a href="#case">case</a></li>
    <li><a href="#ceil">ceil</a></li>
    <li><a href="#checkargs">checkargs</a></li>
    <li><a href="#checkpassword">checkpassword</a></li>
    <li><a href="#clear">clear</a></li>
    <li><a href="#clear_error">clear_error</a></li>
    <li><a href="#cmd">cmd</a></li>
    <li><a href="#command">command</a></li>
    <li><a href="#compilation">compilation</a></li>
    <li><a href="#compile">compile</a></li>
    <li><a href="#compiled?">compiled?</a></li>
    <li><a href="#conboot">conboot</a></li>
    <li><a href="#concount">concount</a></li>
    <li><a href="#condbref">condbref</a></li>
    <li><a href="#condescr">condescr</a></li>
    <li><a href="#conhost">conhost</a></li>
    <li><a href="#conidle">conidle</a></li>
    <li><a href="#connect">connect</a></li>
    <li><a href="#connotify">connotify</a></li>
    <li><a href="#contents">contents</a></li>
    <li><a href="#contents_array">contents_array</a></li>
    <li><a href="#contime">contime</a></li>
    <li><a href="#continue">continue</a></li>
    <li><a href="#controls">controls</a></li>
    <li><a href="#conuser">conuser</a></li>
    <li><a href="#convtime">convtime</a></li>
    <li><a href="#copyobj">copyobj</a></li>
    <li><a href="#copyplayer">copyplayer</a></li>
    <li><a href="#cos">cos</a></li>
    <li><a href="#ctoi">ctoi</a></li>
</ul>

<h3>D's</h3>
<ul>
    <li><a href="#date">date</a></li>
    <li><a href="#dbcmp">dbcmp</a></li>
    <li><a href="#dbref">dbref</a></li>
    <li><a href="#dbref?">dbref?</a></li>
    <li><a href="#dbtop">dbtop</a></li>
    <li><a href="#debug notation">debug notation</a></li>
    <li><a href="#debug_line">debug_line</a></li>
    <li><a href="#debug_off">debug_off</a></li>
    <li><a href="#debug_on">debug_on</a></li>
    <li><a href="#debugger">debugger</a></li>
    <li><a href="#debugger_break">debugger_break</a></li>
    <li><a href="#debugger_commands">debugger_commands</a></li>
    <li><a href="#deep_copy">deep_copy</a></li>
    <li><a href="#depth">depth</a></li>
    <li><a href="#desc">desc</a></li>
    <li><a href="#descr">descr</a></li>
    <li><a href="#descr_array">descr_array</a></li>
    <li><a href="#descr_setuser">descr_setuser</a></li>
    <li><a href="#descrboot">descrboot</a></li>
    <li><a href="#descrbufsize">descrbufsize</a></li>
    <li><a href="#descrcon">descrcon</a></li>
    <li><a href="#descrdbref">descrdbref</a></li>
    <li><a href="#descrflush">descrflush</a></li>
    <li><a href="#descrhost">descrhost</a></li>
    <li><a href="#descridle">descridle</a></li>
    <li><a href="#descriptors">descriptors</a></li>
    <li><a href="#descrleastidle">descrleastidle</a></li>
    <li><a href="#descrmostidle">descrmostidle</a></li>
    <li><a href="#descrnotify">descrnotify</a></li>
    <li><a href="#descrsecure?">descrsecure?</a></li>
    <li><a href="#descrtime">descrtime</a></li>
    <li><a href="#descruser">descruser</a></li>
    <li><a href="#dictionary?">dictionary?</a></li>
    <li><a href="#diff3">diff3</a></li>
    <li><a href="#dist3d">dist3d</a></li>
    <li><a href="#drop">drop</a></li>
    <li><a href="#dup">dup</a></li>
    <li><a href="#dupn">dupn</a></li>
</ul>

<h3>E's</h3>
<ul>
    <li><a href="#else">else</a></li>
    <li><a href="#entrances_array">entrances_array</a></li>
    <li><a href="#envprop">envprop</a></li>
    <li><a href="#envpropstr">envpropstr</a></li>
    <li><a href="#epsilon">epsilon</a></li>
    <li><a href="#error?">error?</a></li>
    <li><a href="#error_bit">error_bit</a></li>
    <li><a href="#error_name">error_name</a></li>
    <li><a href="#error_num">error_num</a></li>
    <li><a href="#error_str">error_str</a></li>
    <li><a href="#event_count">event_count</a></li>
    <li><a href="#event_exists">event_exists</a></li>
    <li><a href="#event_send">event_send</a></li>
    <li><a href="#event_wait">event_wait</a></li>
    <li><a href="#event_waitfor">event_waitfor</a></li>
    <li><a href="#execute">execute</a></li>
    <li><a href="#exit">exit</a></li>
    <li><a href="#exit?">exit?</a></li>
    <li><a href="#exits">exits</a></li>
    <li><a href="#exits_array">exits_array</a></li>
    <li><a href="#exp">exp</a></li>
    <li><a href="#explode">explode</a></li>
    <li><a href="#explode_array">explode_array</a></li>
    <li><a href="#ext-name-ok?">ext-name-ok?</a></li>
</ul>

<h3>F's</h3>
<ul>
    <li><a href="#fabs">fabs</a></li>
    <li><a href="#fail">fail</a></li>
    <li><a href="#fg_mode">fg_mode</a></li>
    <li><a href="#findnext">findnext</a></li>
    <li><a href="#firstdescr">firstdescr</a></li>
    <li><a href="#flag?">flag?</a></li>
    <li><a href="#flags">flags</a></li>
    <li><a href="#float">float</a></li>
    <li><a href="#float?">float?</a></li>
    <li><a href="#floor">floor</a></li>
    <li><a href="#fmod">fmod</a></li>
    <li><a href="#fmtstring">fmtstring</a></li>
    <li><a href="#fmttime">fmttime</a></li>
    <li><a href="#for">for</a></li>
    <li><a href="#force">force</a></li>
    <li><a href="#force_level">force_level</a></li>
    <li><a href="#forcedby">forcedby</a></li>
    <li><a href="#forcedby_array">forcedby_array</a></li>
    <li><a href="#foreach">foreach</a></li>
    <li><a href="#foreground">foreground</a></li>
    <li><a href="#fork">fork</a></li>
    <li><a href="#frand">frand</a></li>
    <li><a href="#ftostr">ftostr</a></li>
    <li><a href="#ftostrc">ftostrc</a></li>
    <li><a href="#fulldepth">fulldepth</a></li>
</ul>

<h3>G's</h3>
<ul>
    <li><a href="#gaussian">gaussian</a></li>
    <li><a href="#getlink">getlink</a></li>
    <li><a href="#getlinks">getlinks</a></li>
    <li><a href="#getlinks_array">getlinks_array</a></li>
    <li><a href="#getlockstr">getlockstr</a></li>
    <li><a href="#getpidinfo">getpidinfo</a></li>
    <li><a href="#getpids">getpids</a></li>
    <li><a href="#getprop">getprop</a></li>
    <li><a href="#getpropfval">getpropfval</a></li>
    <li><a href="#getpropstr">getpropstr</a></li>
    <li><a href="#getpropval">getpropval</a></li>
    <li><a href="#getseed">getseed</a></li>
    <li><a href="#gmtoffset">gmtoffset</a></li>
    <li><a href="#gui-options">gui-options</a></li>
    <li><a href="#gui_available">gui_available</a></li>
    <li><a href="#gui_ctrl_command">gui_ctrl_command</a></li>
    <li><a href="#gui_ctrl_create">gui_ctrl_create</a></li>
    <li><a href="#gui_dlog_close">gui_dlog_close</a></li>
    <li><a href="#gui_dlog_create">gui_dlog_create</a></li>
    <li><a href="#gui_dlog_helper">gui_dlog_helper</a></li>
    <li><a href="#gui_dlog_show">gui_dlog_show</a></li>
    <li><a href="#gui_dlog_simple">gui_dlog_simple</a></li>
    <li><a href="#gui_dlog_tabbed">gui_dlog_tabbed</a></li>
    <li><a href="#gui_value_get">gui_value_get</a></li>
    <li><a href="#gui_value_set">gui_value_set</a></li>
    <li><a href="#gui_values_get">gui_values_get</a></li>
</ul>

<h3>I's</h3>
<ul>
    <li><a href="#if">if</a></li>
    <li><a href="#ignore_add">ignore_add</a></li>
    <li><a href="#ignore_del">ignore_del</a></li>
    <li><a href="#ignoring?">ignoring?</a></li>
    <li><a href="#inf">inf</a></li>
    <li><a href="#instances">instances</a></li>
    <li><a href="#instr">instr</a></li>
    <li><a href="#instring">instring</a></li>
    <li><a href="#int">int</a></li>
    <li><a href="#int?">int?</a></li>
    <li><a href="#interp">interp</a></li>
    <li><a href="#intostr">intostr</a></li>
    <li><a href="#is_set?">is_set?</a></li>
    <li><a href="#ispid?">ispid?</a></li>
    <li><a href="#itoc">itoc</a></li>
</ul>

<h3>J's</h3>
<ul>
    <li><a href="#jmp">jmp</a></li>
</ul>

<h3>K's</h3>
<ul>
    <li><a href="#kill">kill</a></li>
</ul>

<h3>L's</h3>
<ul>
    <li><a href="#lastdescr">lastdescr</a></li>
    <li><a href="#libraries">libraries</a></li>
    <li><a href="#listeners">listeners</a></li>
    <li><a href="#loc">loc</a></li>
    <li><a href="#localvar">localvar</a></li>
    <li><a href="#location">location</a></li>
    <li><a href="#lock?">lock?</a></li>
    <li><a href="#locked?">locked?</a></li>
    <li><a href="#log">log</a></li>
    <li><a href="#log10">log10</a></li>
    <li><a href="#loop-example1">loop-example1</a></li>
    <li><a href="#loop-example2">loop-example2</a></li>
    <li><a href="#loop-example3">loop-example3</a></li>
    <li><a href="#loops">loops</a></li>
    <li><a href="#lreverse">lreverse</a></li>
    <li><a href="#lvar">lvar</a></li>
</ul>

<h3>M's</h3>
<ul>
    <li><a href="#match">match</a></li>
    <li><a href="#max_variable_count">max_variable_count</a></li>
    <li><a href="#mcp_bind">mcp_bind</a></li>
    <li><a href="#mcp_register">mcp_register</a></li>
    <li><a href="#mcp_register_event">mcp_register_event</a></li>
    <li><a href="#mcp_send">mcp_send</a></li>
    <li><a href="#mcp_supports">mcp_supports</a></li>
    <li><a href="#md5hash">md5hash</a></li>
    <li><a href="#me">me</a></li>
    <li><a href="#midstr">midstr</a></li>
    <li><a href="#mlevel">mlevel</a></li>
    <li><a href="#mode">mode</a></li>
    <li><a href="#modf">modf</a></li>
    <li><a href="#movepennies">movepennies</a></li>
    <li><a href="#moveto">moveto</a></li>
    <li><a href="#mucker levels">mucker levels</a></li>
    <li><a href="#multitasking">multitasking</a></li>
</ul>

<h3>N's</h3>
<ul>
    <li><a href="#name">name</a></li>
    <li><a href="#name-ok?">name-ok?</a></li>
    <li><a href="#newexit">newexit</a></li>
    <li><a href="#newobject">newobject</a></li>
    <li><a href="#newpassword">newpassword</a></li>
    <li><a href="#newplayer">newplayer</a></li>
    <li><a href="#newprogram">newprogram</a></li>
    <li><a href="#newroom">newroom</a></li>
    <li><a href="#next">next</a></li>
    <li><a href="#nextdescr">nextdescr</a></li>
    <li><a href="#nextentrance">nextentrance</a></li>
    <li><a href="#nextowned">nextowned</a></li>
    <li><a href="#nextprop">nextprop</a></li>
    <li><a href="#nip">nip</a></li>
    <li><a href="#not">not</a></li>
    <li><a href="#notify">notify</a></li>
    <li><a href="#notify_except">notify_except</a></li>
    <li><a href="#notify_exclude">notify_exclude</a></li>
    <li><a href="#notify_nolisten">notify_nolisten</a></li>
    <li><a href="#notify_secure">notify_secure</a></li>
    <li><a href="#number?">number?</a></li>
</ul>

<h3>O's</h3>
<ul>
    <li><a href="#objmem">objmem</a></li>
    <li><a href="#odrop">odrop</a></li>
    <li><a href="#ofail">ofail</a></li>
    <li><a href="#ok?">ok?</a></li>
    <li><a href="#online">online</a></li>
    <li><a href="#online_array">online_array</a></li>
    <li><a href="#or">or</a></li>
    <li><a href="#osucc">osucc</a></li>
    <li><a href="#otell">otell</a></li>
    <li><a href="#over">over</a></li>
    <li><a href="#owner">owner</a></li>
</ul>

<h3>P's</h3>
<ul>
    <li><a href="#parselock">parselock</a></li>
    <li><a href="#parsempi">parsempi</a></li>
    <li><a href="#parsempiblessed">parsempiblessed</a></li>
    <li><a href="#parseprop">parseprop</a></li>
    <li><a href="#parsepropex">parsepropex</a></li>
    <li><a href="#part_pmatch">part_pmatch</a></li>
    <li><a href="#pennies">pennies</a></li>
    <li><a href="#pi">pi</a></li>
    <li><a href="#pick">pick</a></li>
    <li><a href="#pid">pid</a></li>
    <li><a href="#player?">player?</a></li>
    <li><a href="#pmatch">pmatch</a></li>
    <li><a href="#pname-ok?">pname-ok?</a></li>
    <li><a href="#pname_history">pname_history</a></li>
    <li><a href="#polar_to_xyz">polar_to_xyz</a></li>
    <li><a href="#pop">pop</a></li>
    <li><a href="#popn">popn</a></li>
    <li><a href="#pose-separator?">pose-separator?</a></li>
    <li><a href="#pow">pow</a></li>
    <li><a href="#pr_mode">pr_mode</a></li>
    <li><a href="#preempt">preempt</a></li>
    <li><a href="#prettylock">prettylock</a></li>
    <li><a href="#prog">prog</a></li>
    <li><a href="#program?">program?</a></li>
    <li><a href="#program_getlines">program_getlines</a></li>
    <li><a href="#program_setlines">program_setlines</a></li>
    <li><a href="#pronoun_sub">pronoun_sub</a></li>
    <li><a href="#prop-name-ok?">prop-name-ok?</a></li>
    <li><a href="#propdir?">propdir?</a></li>
    <li><a href="#public">public</a></li>
    <li><a href="#put">put</a></li>
</ul>

<h3>Q's</h3>
<ul>
    <li><a href="#queue">queue</a></li>
</ul>

<h3>R's</h3>
<ul>
    <li><a href="#random">random</a></li>
    <li><a href="#read">read</a></li>
    <li><a href="#read_wants_blanks">read_wants_blanks</a></li>
    <li><a href="#read_wants_no_blanks">read_wants_no_blanks</a></li>
    <li><a href="#recycle">recycle</a></li>
    <li><a href="#reflist_add">reflist_add</a></li>
    <li><a href="#reflist_del">reflist_del</a></li>
    <li><a href="#reflist_find">reflist_find</a></li>
    <li><a href="#regexp">regexp</a></li>
    <li><a href="#regsplit">regsplit</a></li>
    <li><a href="#regsplit_noempty">regsplit_noempty</a></li>
    <li><a href="#regsub">regsub</a></li>
    <li><a href="#remove_prop">remove_prop</a></li>
    <li><a href="#repeat">repeat</a></li>
    <li><a href="#reverse">reverse</a></li>
    <li><a href="#rinstr">rinstr</a></li>
    <li><a href="#rinstring">rinstring</a></li>
    <li><a href="#rmatch">rmatch</a></li>
    <li><a href="#room?">room?</a></li>
    <li><a href="#rot">rot</a></li>
    <li><a href="#rotate">rotate</a></li>
    <li><a href="#round">round</a></li>
    <li><a href="#rsplit">rsplit</a></li>
</ul>

<h3>S's</h3>
<ul>
    <li><a href="#secure_sysvars">secure_sysvars</a></li>
    <li><a href="#set">set</a></li>
    <li><a href="#set_error">set_error</a></li>
    <li><a href="#setdesc">setdesc</a></li>
    <li><a href="#setdrop">setdrop</a></li>
    <li><a href="#setfail">setfail</a></li>
    <li><a href="#setlink">setlink</a></li>
    <li><a href="#setlinks_array">setlinks_array</a></li>
    <li><a href="#setlockstr">setlockstr</a></li>
    <li><a href="#setmode">setmode</a></li>
    <li><a href="#setname">setname</a></li>
    <li><a href="#setodrop">setodrop</a></li>
    <li><a href="#setofail">setofail</a></li>
    <li><a href="#setosucc">setosucc</a></li>
    <li><a href="#setown">setown</a></li>
    <li><a href="#setprop">setprop</a></li>
    <li><a href="#setseed">setseed</a></li>
    <li><a href="#setsucc">setsucc</a></li>
    <li><a href="#setsysparm">setsysparm</a></li>
    <li><a href="#sha1hash">sha1hash</a></li>
    <li><a href="#shallow_copy">shallow_copy</a></li>
    <li><a href="#sign">sign</a></li>
    <li><a href="#sin">sin</a></li>
    <li><a href="#sleep">sleep</a></li>
    <li><a href="#smatch">smatch</a></li>
    <li><a href="#split">split</a></li>
    <li><a href="#sqrt">sqrt</a></li>
    <li><a href="#srand">srand</a></li>
    <li><a href="#stats">stats</a></li>
    <li><a href="#stats_array">stats_array</a></li>
    <li><a href="#stod">stod</a></li>
    <li><a href="#strcat">strcat</a></li>
    <li><a href="#strcmp">strcmp</a></li>
    <li><a href="#strcut">strcut</a></li>
    <li><a href="#strdecrypt">strdecrypt</a></li>
    <li><a href="#strencrypt">strencrypt</a></li>
    <li><a href="#string?">string?</a></li>
    <li><a href="#stringcmp">stringcmp</a></li>
    <li><a href="#stringpfx">stringpfx</a></li>
    <li><a href="#strip">strip</a></li>
    <li><a href="#striplead">striplead</a></li>
    <li><a href="#striptail">striptail</a></li>
    <li><a href="#strlen">strlen</a></li>
    <li><a href="#strncmp">strncmp</a></li>
    <li><a href="#strtof">strtof</a></li>
    <li><a href="#subst">subst</a></li>
    <li><a href="#succ">succ</a></li>
    <li><a href="#supplicant">supplicant</a></li>
    <li><a href="#swap">swap</a></li>
    <li><a href="#sysparm">sysparm</a></li>
    <li><a href="#sysparm_array">sysparm_array</a></li>
    <li><a href="#systime">systime</a></li>
    <li><a href="#systime_precise">systime_precise</a></li>
</ul>

<h3>T's</h3>
<ul>
    <li><a href="#tan">tan</a></li>
    <li><a href="#tell">tell</a></li>
    <li><a href="#testlock">testlock</a></li>
    <li><a href="#textattr">textattr</a></li>
    <li><a href="#then">then</a></li>
    <li><a href="#thing?">thing?</a></li>
    <li><a href="#time">time</a></li>
    <li><a href="#timefmt">timefmt</a></li>
    <li><a href="#timer_start">timer_start</a></li>
    <li><a href="#timer_stop">timer_stop</a></li>
    <li><a href="#timesplit">timesplit</a></li>
    <li><a href="#timestamps">timestamps</a></li>
    <li><a href="#toadplayer">toadplayer</a></li>
    <li><a href="#tokensplit">tokensplit</a></li>
    <li><a href="#tolower">tolower</a></li>
    <li><a href="#toupper">toupper</a></li>
    <li><a href="#tread">tread</a></li>
    <li><a href="#trig">trig</a></li>
    <li><a href="#trigger">trigger</a></li>
    <li><a href="#truename">truename</a></li>
    <li><a href="#try">try</a></li>
    <li><a href="#tuck">tuck</a></li>
</ul>

<h3>U's</h3>
<ul>
    <li><a href="#unblessprop">unblessprop</a></li>
    <li><a href="#uncompile">uncompile</a></li>
    <li><a href="#unparselock">unparselock</a></li>
    <li><a href="#unparseobj">unparseobj</a></li>
    <li><a href="#until">until</a></li>
    <li><a href="#userlog">userlog</a></li>
</ul>

<h3>V's</h3>
<ul>
    <li><a href="#var">var</a></li>
    <li><a href="#var!">var!</a></li>
    <li><a href="#variable">variable</a></li>
    <li><a href="#version">version</a></li>
</ul>

<h3>W's</h3>
<ul>
    <li><a href="#watchpid">watchpid</a></li>
    <li><a href="#while">while</a></li>
    <li><a href="#wizcall">wizcall</a></li>
</ul>

<h3>X's</h3>
<ul>
    <li><a href="#xor">xor</a></li>
    <li><a href="#xyz_to_polar">xyz_to_polar</a></li>
</ul>

<!-- HTML_TOPICEND -->

<h2 id="DefDets">Details and Definitions</h2>
<ul>
    <li><a href="#arrive">arrive</a></li>
    <li><a href="#compilation">compilation</a></li>
    <li><a href="#connect">connect</a></li>
    <li><a href="#flags">flags</a></li>
    <li><a href="#libraries">libraries</a></li>
    <li><a href="#listeners">listeners</a></li>
    <li><a href="#mucker levels">mucker levels</a></li>
    <li><a href="#multitasking">multitasking</a></li>
</ul>



<h3 id="mucker levels">Mucker Levels:
<br>
</h3>
  
<p>
  There are now four levels of MUCKERs in fb4.0.  Level zero is a
non-mucker. They cannot use the editor, and MUF programs owned by them
cannot be run.
<p>
  
<p>
  Level one MUCKER's are apprentices.  Their powers are restricted as they
cannot get information about any object that is not in the same room they
are.  ie:  OWNER, NAME, LOCATION, etc all fail if the object isn't in the
same room as the player.  Level one MUCKER programs always run as if they
are set SETUID.  NOTIFY, NOTIFY_EXCEPT, and NOTIFY_EXCLUDE will refuse to
send messages to rooms the user is not in.  Level one programs cannot use
ADDPENNIES.  Level one programs don't list DARK objects or rooms in the
contents of a room, unless they are controlled by the program owner.
Additionally, level one programs have an absolute instruction limit that
is the same size as the PREEMPT instruction limit.  This is usually
around 20,000 instructions.
<p>
  
<p>
  Level two MUCKERs are also called Journeymen.  Their permissions are
equivalent to the permissions for a normal MUCKER under older versions
of the server.  Level two programs can run as many as four times the
number of instructions that a preempt program could.  This is usually
around 80,000 instructions.
<p>
  
<p>
  Level three MUCKERs are referred to as Masters.  They can use the con-
nection info primitives (ie: CONDBREF, ONLINE, etc.), read the EXITS list
of any room, use NEXTPROP on objects, can use NEWROOM, NEWOBJECT, NEWEXIT,
and COPYOBJ without limitations, can use QUEUE and KILL, and can override
the permissions restrictions of MOVETO.  You only give a player MUCKER
level 3 if they are very trusted.  There is no absolute instruction count
limit for level three or above, except for programs running in PREEMPT mode.
<p>
  
<p>
  A player who is wizbitted is effectively Mucker Level 4.  MUCKER level
four is required for the RECYCLE primitive, the CONHOST primitive, the
FORCE primitive, and the SETOWN primitive.  ML4 also allows overriding
of permissions of the SET* primitives, and property permissions.  Props
not listed by NEXTPROP with ML3 are listed with ML4.  Programs running
ML4 do not even have instruction limits on PREEMPT mode programs.
<p>
  
<p>
  The MUCKER level permissions that a program runs at is the lesser of
its own MUCKER level and the MUCKER level of its owner.  If it is
owned by a player who is MUCKER level 2, and it is MUCKER level 3,
then it runs at Mucker level 2.  The one exception to this is programs
owned by a Wizard player.  They run at Mucker level 2 if the program
itself is not wizbit, and at Mucker level 4 if the program IS set wizbit.
<p>
  
<p>
  Mucker level is referred to in flags lists by M# where the # is the
Mucker level.  Level zero objects don't show a flag for it.  Example:
<pre>
    Revar(#37PM3)
</pre>
<p>
  In verbose flags lists, Mucker levels greater than zero are shown
by MUCKER# where # is the mucker level.
<p>
  
<p>
  To set a level on a player or program, use the level number as the
flag name.  MUCKER is the same as 2, and !MUCKER is the same as 0.
Example:
<pre>
    @set Revar=2
</pre>
<p>
  A player may set the MUCKER level on a program they own to any level
lower than or equal to their own level, and a wizard may set a program
or player to any MUCKER level.  When a program is created, it is
automatically set to the same MUCKER level as the creating player.
When a program is loaded from an old db, if it is Mucker Level 0,
it is upgraded to Mucker Level 2.
<!-- HTML_TOPICEND -->


<h3 id="multitasking">Multitasking:
<br>

<br>
</h3>
  There are 3 modes that a program can be in when running:  foreground,
background, and preempt.  A program running in the foreground lets other
users and programs have timeslices (ie multitasking), but blocks input
from the program user.  Background mode allows the user to also go on and
do other things and issue other commands, but will not allow the program
to do READs.  Preempt mode means that the program runs to completion
without multitasking, taking full control of the interpreter and not
letting other users or progs have timeslices, but imposes an instruction
count limit unless the program is a wizard program.

<p>
  Programs run by @locks, @descs, @succs, @fails, and @drops default to the
preempt mode when they run.  Programs run by actions linked to them
default to running in foreground mode.  QUEUEd program events, such as
those set up by _listen, _connect, _disconnect, etc, and those QUEUEd by
other programs default to running in background mode. (NOTE: these
programs cannot be changed out of background mode)
<p>Also see:
    <a href="#foreground">FOREGROUND</a>,
    <a href="#background">BACKGROUND</a>,
    <a href="#preempt">PREEMPT</a>,
    <a href="#fork">FORK</a>,
    <a href="#queue">QUEUE</a>,
    <a href="#kill">KILL</a> and
    <a href="#sleep">SLEEP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="libraries">Libraries:
<br>

<br>
How to use a library:
<br>
<pre>
</h3>
    1) Use &quot;@register lib&quot; to list what libraries exist.
    2) Use &quot;@view $lib/&lt;libraryname&gt;&quot; to list the docs on that library.
    3) When you've found the library and the function you want, then all
        you have to do in your program is, at the beginning of it,
        $include $lib/&lt;libraryname&gt;
        then just use the function name to invoke it later in your program
        and it will run as if it were a function in your program.
</pre>

How to make a library:
<pre>
    1) Create a program with several useful generic subroutines.
    2) DOCUMENT those subroutines in a commented out header in the prog.
    3) @set &lt;program&gt;=_docs:&lt;command to list those DOCS you made&gt;
    4) Set the version number of the code in the library with $version 1.000
        This lets you keep track of the code revision installed, separately
        from the version of the library calling API.
    5) Set the library API version number with $lib-version 1.000
        This is the version of the calling interface for this library.
        Remember to up this version when you change this library's calls.
        Remember that 1.19 is less than 1.2, so use numbers like 1.002.
    6) For each function you want to be externally callable, do the following:
        a) Declare it PUBLIC
        b) Create the caller macro with either:
            $libdef FUNCNAME     or
            $pubdef EXPORTEDNAME &quot;$lib/THISLIB&quot; match &quot;FUNCNAME&quot; call
    7) Make sure the program is set LINK_OK and VIEWABLE.
    8) Globally register the program with the @register command with a
        prefix of &quot;lib/&quot;.  ie: @reg lib-strings.muf=lib/strings
    9) You're done!
</pre>

Currently standard libraries:
<pre>
    $lib/strings      Functions for manipulating strings.
    $lib/props        Routines for searching for properties, or setting them.
    $lib/lmgr         Standard list manager routines.
    $lib/stackrng     Routines to handle variable sized ranges on the stack.
    $lib/edit         String range editing and manipulation routines.
    $lib/editor       Standard user text editor.
    $lib/mesg         Standard message manager routines.
    $lib/mesgbox      Routines for handling lists of messages.
    $lib/match        Object or string matching routines.
    $lib/reflist      Dbref-list management routines.
    $lib/index        Hashed linked list manager with partial key matching.
    $lib/gui          Routines to make MCP's GUI package easier to use.
    $lib/optionsgui   Given datums, auto-generates a GUI to edit them.
</pre>
<!-- HTML_TOPICEND -->


<h3 id="flags">Flags that have importance to MUF:
<br>

<br>
</h3>
  If a program is set DARK (DEBUG), then when it is run, it will print out
a stack trace for each instruction executed, to the player running the
program.  This is useful for debugging programs.

If a program is set ZOMBIE, then when the owner runs it, they will enter an
interactive debugger, useful for following a program as it runs and
changing it to see what different situations do.

On dbload, if a program is set ABODE (AUTOSTART), *AND* it is owned by
a wizard, then it will be placed in the timequeue with a delay of 0 and
a string parm of &quot;Startup&quot;.  Autostart programs run with the location
NOTHING (#-1) rather than the location of the owner of the program.

If a program has the HAVEN flag set on it (HARDUID) then it runs with
the uid and permissions of the owner of the trigger of the program.
If the program is a timequeue event with trigger of #-1, then it
will run with the permissions and uid of the program owner as in SETUID.

If a program is set both SETUID and HARDUID, and it is owned by a wizard,
then it inherits the uid and mucker level of the program that called it.
If it was not called by a program, then it runs SETUID.  This is useful
for writing libraries.

Programs set BUILDER (BOUND) run in preempt mode, regardless of the mode
of the program.  ie: a foreground program, while running in a program set
BOUND, will run pre-empt, with the multitasking effectively shut off.

A program that is set WIZARD ignores almost all permissions checking.

The Mucker Level of the program also has a great deal of influence on what
a program can and cannot do.  See MUCKER LEVELS for more information.
<p>Also see:
    <a href="#debugger">DEBUGGER</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="compilation">Compilation:
<br>

<br>
</h3>
  Programs are compiled when they are run or called, or when explicitly
compiled in the editor.  They are compiled with the uid of the owner of
the program.  After being unused for a number of minutes, programs will
be removed from memory until needed again.
<!-- HTML_TOPICEND -->


<h3 id="listeners">Listeners:
<br>

<br>
</h3>
  When a message is notify_except'ed or notify_exclude'ed to a room, and
LISTENERS and LISTENERS_ENV are defined, then it will run ALL the programs
referred to in all the _listen properties down the environment tree,  And
in all of the objects in the room with LISTENERS_OBJ defined.  Also, the
muf NOTIFY primitive was changed to run the _listen program on an object
or player if a message is sent to them that way.
<!-- HTML_TOPICEND -->


<h3 id="connect">Connect and Disconnect Propqueues:
<br>

<br>
</h3>
  A room or player may have a &quot;_connect&quot; property set that contains the
dbref of a program to run when a player connects.  The program must be
either link_ok or must be owned by the player connecting.  When the
program is run, the string on the stack will be &quot;Connect&quot;, the &quot;loc @&quot;
will be the location of the connecting player, the &quot;me @&quot; will be the
connecting player, and the &quot;trigger @&quot; (and &quot;trig&quot;) will be the object
that had the _connect property on it.  All programs referred to by
_connect properties on the player, and on rooms down the environment tree
from the player, will be run.  When a player disconnects, programs referred
to by _disconnect properties will be run in a similar manner.
(connect and disconnect _actions_ are also triggered.)
<!-- HTML_TOPICEND -->


<h3 id="arrive">Arrive and Depart Propqueues:
<br>

<br>
</h3>
  Programs referred to by props in _depart/_arrive propdirs will all be
run when a player leaves or enters a room, respectively. An example would
be _arrive/announce:1234  That would queue up program #1234 when a player
enters a room.  The name (&quot;announce&quot;) is not important, and can be anything
you want, but they are run in alphabetic order.
<!-- HTML_TOPICEND -->



<h2 id="CompDefs">Macros and Compiler Directives</h2>
<ul>
    <li><a href="#$abort">$abort</a></li>
    <li><a href="#$author">$author</a></li>
    <li><a href="#$cleardefs">$cleardefs</a></li>
    <li><a href="#$def">$def</a></li>
    <li><a href="#$define">$define</a></li>
    <li><a href="#$doccmd">$doccmd</a></li>
    <li><a href="#$echo">$echo</a></li>
    <li><a href="#$entrypoint">$entrypoint</a></li>
    <li><a href="#$ifcancall">$ifcancall</a></li>
    <li><a href="#$ifdef">$ifdef</a></li>
    <li><a href="#$iflib">$iflib</a></li>
    <li><a href="#$iflibver">$iflibver</a></li>
    <li><a href="#$ifncancall">$ifncancall</a></li>
    <li><a href="#$ifndef">$ifndef</a></li>
    <li><a href="#$ifnlib">$ifnlib</a></li>
    <li><a href="#$ifnlibver">$ifnlibver</a></li>
    <li><a href="#$ifnver">$ifnver</a></li>
    <li><a href="#$ifver">$ifver</a></li>
    <li><a href="#$include">$include</a></li>
    <li><a href="#$language">$language</a></li>
    <li><a href="#$lib-version">$lib-version</a></li>
    <li><a href="#$libdef">$libdef</a></li>
    <li><a href="#$note">$note</a></li>
    <li><a href="#$pragma">$pragma</a></li>
    <li><a href="#$pubdef">$pubdef</a></li>
    <li><a href="#$undef">$undef</a></li>
    <li><a href="#$version">$version</a></li>
    <li><a href="#\">\</a></li>
    <li><a href="#__fuzzball__">__fuzzball__</a></li>
    <li><a href="#__muckname">__muckname</a></li>
    <li><a href="#__prog__">__prog__</a></li>
    <li><a href="#__version">__version</a></li>
    <li><a href="#max_variable_count">max_variable_count</a></li>
</ul>



<h3 id="__fuzzball__">__FUZZBALL__
<br>

<br>
</h3>
  A pre$defined macro that contains the value 1 on a FuzzBall Muck server.
This is useful for server-type specific $ifdefs, when code needs to be
different on, say, FuzzBall Mucks and ProtoMucks.  For example:
<pre>
    $ifdef __fuzzball__
        me @ &quot;This is a FuzzBall Muck server.!&quot; notify
    $endif
</pre>
<!-- HTML_TOPICEND -->


<h3 id="__muckname">__MUCKNAME
<br>

<br>
</h3>
  A pre$defined macro that contains the name of the server's muckname @tune
parameter value.  This is useful for muck specific $ifdefs.  For example:
<pre>
    $ifdef __muckname=FurryMUCK
        me @ &quot;Helloooooo Furry!&quot; notify
    $endif
</pre>
<!-- HTML_TOPICEND -->


<h3 id="__version">__VERSION
<br>

<br>
</h3>
  A pre$defined macro that contains the current server version.  Contains
the same string that the VERSION primitive returns.  This is mainly useful
in $ifdef/$ifndef comparisons.  The value of this will always start with
'Muck2.2fb' for historical reasons, followed by the current fbmuck server
version.  Ie: Muck2.2fb6.00 for the 6.00 fbmuck server.
<p>Also see:
    <a href="#version">VERSION</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$define">$DEFINE</a> and
    <a href="#$def">$DEF</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="__prog__">__PROG__
<br>

<br>
</h3>
  A compile-time token replaced with the dbref of the current program.
Currently recognized within $doccmd and $pubdef directives.
<!-- HTML_TOPICEND -->


<h3 id="max_variable_count">MAX_VARIABLE_COUNT
<br>

<br>
</h3>
  A pre$defined macro that expands to the maximum number of variables of
each type allowed in a program.  For function-scoped variables, this is the
max number of scoped vars that each function may have.
<!-- HTML_TOPICEND -->


<h3 id="$author">$AUTHOR &lt;rest_of_line&gt;
<br>

<br>
</h3>
  Sets the _author string property on the program to &lt;rest_of_line&gt;.
The preferred format is an email address with name comment. ie:
<pre>
    $author Revar Desmera &lt;revar@belfry.com&gt;
</pre>
To denote multiple authors, separate them with commas.  ie:
<pre>
    $author Revar Desmera &lt;revar@belfry.com&gt;, Foxen &lt;foxen@belfry.com&gt;
</pre>
If you don't want to include your email address, just omit it.  ie:
<pre>
    $author Revar, Foxen
</pre>
<!-- HTML_TOPICEND -->


<h3 id="$version">$VERSION &lt;float&gt;
<br>

<br>
</h3>
  Sets the _version string property on the program to &lt;float&gt;.  Version
numbers should be like 1.009 and 1.010, so that they can be compared using
floating point comparisons.  (Remember, 1.9 is greater than 1.10.)
<!-- HTML_TOPICEND -->


<h3 id="$lib-version">$LIB-VERSION &lt;float&gt;
<br>

<br>
</h3>
  Sets the _lib-version string property on the program to &lt;float&gt;.  Version
numbers should be like 1.009 and 1.010, so that they can be compared using
floating point comparisons.  (Remember, 1.9 is greater than 1.10.)
<!-- HTML_TOPICEND -->


<h3 id="$note">$NOTE &lt;rest_of_line&gt;
<br>

<br>
</h3>
  Sets the _note string property on the program to &lt;rest_of_line&gt;.
<!-- HTML_TOPICEND -->


<h3 id="$doccmd">$DOCCMD &lt;rest_of_line&gt;
<br>

<br>
</h3>
  Sets the _docs string property on the program to &lt;rest_of_line&gt;.
This property holds the command used to view documentation for the program.
<!-- HTML_TOPICEND -->


<h3 id="$define">$DEFINE &lt;defname&gt; &lt;definition&gt; $enddef
<br>

<br>
</h3>
  Basically the same as C's #define &lt;defname&gt; &lt;definition&gt;
<!-- HTML_TOPICEND -->


<h3 id="$def">$DEF &lt;defname&gt; &lt;definition&gt;
<br>

<br>
</h3>
  This is the same as $define, except that the definition stops at the end
of the program line, without using an ending $enddef.
<!-- HTML_TOPICEND -->


<h3 id="$undef">$UNDEF &lt;defname&gt;
<br>

<br>
</h3>
  About the same as C's #undef &lt;defname&gt;
<!-- HTML_TOPICEND -->


<h3 id="$include">$INCLUDE $&lt;libname&gt;
<br>
$INCLUDE &lt;dbref&gt;
<br>

<br>
</h3>
  Sets a bunch of $defines from the properties in the /_defs/ propdir of the
given program.  For example, if object #345 had the following properties:
<pre>
    /_defs/desc: &quot;_/de&quot; getpropstr
    /_defs/setpropstr: dup if 0 addprop else pop remove_prop then
    /_defs/setpropval: dup if &quot;&quot; swap addprop else pop remove_prop then
    /_defs/setprop: dup int? if setpropval else setpropstr then
</pre>
then if a program contained '$include #345' in it, then all subsequent
references to 'desc', 'setpropstr', 'setpropval', and 'setprop' would
be expanded to the string values of their respective programs.  For example,
'desc' would be replaced throughout the program with '&quot;_/de&quot; getpropstr'
NOTE:  You cannot have a slash in a definition name.  ie: The property
<pre>
    _defs/a/b:foo
</pre>
will NOT make a definition named a/b.
<p>Also see:
    <a href="#$define">$DEFINE</a>,
    <a href="#$def">$DEF</a>,
    <a href="#$cleardefs">$CLEARDEFS</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#public">PUBLIC</a>,
    <a href="#wizcall">WIZCALL</a>,
    <a href="#$pubdef">$PUBDEF</a> and
    <a href="#$libdef">$LIBDEF</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$pubdef">$PUBDEF :
<br>
$PUBDEF &lt;defname&gt;
<br>
$PUBDEF &lt;defname&gt; &lt;rest_of_line&gt;
<br>
$PUBDEF \&lt;defname&gt; &lt;rest_of_line&gt;
<br>

<br>
</h3>
  By using this directive, the _defs/ directory on a MUF program can
be set at compile time.

<pre>
$pubdef :                          Clears the _defs/ propdir on the program.
$pubdef &lt;defname&gt;                  Clears the _defs/&lt;defname&gt; prop on the prog.
$pubdef &lt;defname&gt; &lt;rest_of_line&gt;   Sets _defs/&lt;defname&gt; prop to &lt;rest_of_line&gt;.
$pubdef \&lt;defname&gt; &lt;rest_of_line&gt;  Sets _defs/&lt;defname&gt; if not already set.
</pre>

For example:
<pre>
    $pubdef tell me @ swap notify
</pre>
would put a property named '_defs/tell' on the program object, with the
value 'me @ swap notify'.  Def names cannot have ':' nor '/' in them.
<p>Also see:
    <a href="#$libdef">$LIBDEF</a>,
    <a href="#public">PUBLIC</a>,
    <a href="#wizcall">WIZCALL</a>,
    <a href="#cancall?">CANCALL?</a> and
    <a href="#call">CALL</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$libdef">$LIBDEF &lt;function&gt;
<br>
$LIBDEF \&lt;function&gt;
<br>

<br>
</h3>
  Sets up an _defs/ prop on the program to call the specified function.
For example:
<pre>
    $libdef myfunc
</pre>
would put a prop named '_defs/myfunc' on the program object, with the
value '&lt;this_programs_dbref&gt; &quot;myfunc&quot; call'
<p>Also see:
    <a href="#$pubdef">$PUBDEF</a>,
    <a href="#public">PUBLIC</a>,
    <a href="#wizcall">WIZCALL</a>,
    <a href="#cancall?">CANCALL?</a> and
    <a href="#call">CALL</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$cleardefs">$CLEARDEFS [ALL]
<br>

<br>
</h3>
  Ignores program _defs/ when compiling the program. Wizards programs can
use '$cleardefs ALL' to also ignore #0 _defs/ when compiling. This does
not affect macros, and internal _defs/ are always loaded no matter what.
<p>Also see:
    <a href="#$define">$DEFINE</a>,
    <a href="#$def">$DEF</a> and
    <a href="#$undef">$UNDEF</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$ifdef">$IFDEF &lt;condition&gt; &lt;compile if true&gt; $endif
<br>
$IFDEF &lt;condition&gt; &lt;compile if true&gt; $else &lt;compile if false&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the existence of or value of certain $defined names.
The four accepted forms of the &lt;condition&gt; argument are:
<pre>
    DEFNAME        Is true if DEFNAME was $defined earlier, whatever the value.
    DEFNAME=VALUE  Is true if DEFNAME exists and its value equals VALUE.
    DEFNAME&gt;VALUE  Is true if DEFNAME exists and is greater than VALUE.
    DEFNAME&lt;VALUE  Is true if DEFNAME exists and is less than VALUE.
</pre>

<p>
  The semantics of greater than and less than is the same as that used by
the strcmp string comparison command.  There must be no spaces between the
DEFNAME, comparator, and VALUE.  They must be run together as one word.

<p>
  There is no &gt;= or &lt;= comparator available, so to make such a comparison
you need to use $ifndef with the opposite comparator.  Ie, to check if
FOO is greater than or equal to 3, use:
<pre>
    $ifndef FOO&lt;3
        BAR
    $endif
</pre>

Compiler directives are nestable also.  For examples:
<pre>
    $ifdef __version&gt;Muck2.2fb3.5
        $def envprop .envprop
    $endif
    $define ploc
        $ifdef proplocs
            .proploc
        $else
            owner
        $endif
    $enddef
</pre>
<p>Also see:
    <a href="#$ifndef">$IFNDEF</a>,
    <a href="#$define">$DEFINE</a> and
    <a href="#$def">$DEF</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$ifndef">$IFNDEF &lt;condition&gt; &lt;compile if false&gt; $endif
<br>
$IFNDEF &lt;condition&gt; &lt;compile if false&gt; $else &lt;compile if true&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the non-existence of or value of $defined names.  $ifndef is
short for 'If NOT Defined' or 'If Not', so it compiles the first code
branch (before the optional $else), only if the &lt;condition&gt; is false.
The four accepted forms of the &lt;condition&gt; argument are:
<pre>
    DEFNAME        Is true if DEFNAME was $defined earlier, whatever the value.
    DEFNAME=VALUE  Is true if DEFNAME exists and its value equals VALUE.
    DEFNAME&gt;VALUE  Is true if DEFNAME exists and is greater than VALUE.
    DEFNAME&lt;VALUE  Is true if DEFNAME exists and is less than VALUE.
</pre>

The semantics of greater than and less than is the same as that used by the
strcmp string comparison command.  There must be no spaces between the
DEFNAME, comparator, and VALUE.  They must be run together as one word.
<p>Also see:
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$define">$DEFINE</a>,
    <a href="#$def">$DEF</a> and
    <a href="#$def">$DEF</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$ifver">$IFVER this &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFVER this &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFVER $&lt;libname&gt; &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFVER $&lt;libname&gt; &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFVER &lt;dbref&gt; &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFVER &lt;dbref&gt; &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the $version of the given program, which is stored in its
'_version' property.  In the form '$ifver this' then this checks this
compiling program's $version.  Otherwise, this checks the $version of
the program referenced by $regname or #dbref.
<p>
  The &lt;truebranch&gt; will be compiled if the given program's $version
is greater than or equal to the given &lt;float&gt;, using a floating point
number comparison.  Otherwise, the &lt;falsebranch&gt;, if given, will be
compiled.
<p>Also see:
    <a href="#$ifnver">$IFNVER</a>,
    <a href="#$iflibver">$IFLIBVER</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$version">$VERSION</a> and
    <a href="#$lib-version">$LIB-VERSION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$ifnver">$IFNVER this &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFNVER this &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFNVER $&lt;libname&gt; &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFNVER $&lt;libname&gt; &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFNVER &lt;dbref&gt; &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFNVER &lt;dbref&gt; &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the $version of the given program, which is stored in its
'_version' property.  In the form '$ifnver this' then this checks this
compiling program's $version.  Otherwise, this checks the $version of
the program referenced by $regname or #dbref.
<p>
  The &lt;truebranch&gt; will be compiled if the given program's $version
is less than the given &lt;float&gt;, using a floating point number comparison.
Otherwise, the &lt;falsebranch&gt;, if given, will be compiled.
<p>Also see:
    <a href="#$ifver">$IFVER</a>,
    <a href="#$iflibver">$IFLIBVER</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$version">$VERSION</a> and
    <a href="#$lib-version">$LIB-VERSION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$iflibver">$IFLIBVER this &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFLIBVER this &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFLIBVER $&lt;libname&gt; &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFLIBVER $&lt;libname&gt; &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFLIBVER &lt;dbref&gt; &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFLIBVER &lt;dbref&gt; &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the $lib-version of the given program, which is stored in its
'_lib-version' property.  In the form '$iflibver this' then this checks this
compiling program's $lib-version.  Otherwise, this checks the $lib-version
of the program referenced by $regname or #dbref.
<p>
  The &lt;truebranch&gt; will be compiled if the given program's $lib-version
is greater than or equal to the given &lt;float&gt;, using a floating point
number comparison.  Otherwise, the &lt;falsebranch&gt;, if given, will be
compiled.
<p>Also see:
    <a href="#$ifnlibver">$IFNLIBVER</a>,
    <a href="#$ifnver">$IFNVER</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$version">$VERSION</a> and
    <a href="#$lib-version">$LIB-VERSION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$ifnlibver">$IFNLIBVER this &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFNLIBVER this &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFNLIBVER $&lt;libname&gt; &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFNLIBVER $&lt;libname&gt; &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFNLIBVER &lt;dbref&gt; &lt;float&gt; &lt;truebranch&gt; $endif
<br>
$IFNLIBVER &lt;dbref&gt; &lt;float&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the $lib-version of the given program, which is stored in its
'_lib-version' property.  In the form '$ifnlibver this' then this checks this
compiling program's $lib-version.  Otherwise, this checks the $lib-version
of the program referenced by $regname or #dbref.
<p>
  The &lt;truebranch&gt; will be compiled if the given program's $lib-version
is less than the given &lt;float&gt;, using a floating point number comparison.
Otherwise, the &lt;falsebranch&gt;, if given, will be compiled.
<p>Also see:
    <a href="#$iflibver">$IFLIBVER</a>,
    <a href="#$ifver">$IFVER</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$version">$VERSION</a> and
    <a href="#$lib-version">$LIB-VERSION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$iflib">$IFLIB $&lt;libname&gt; &lt;truebranch&gt; $endif
<br>
$IFLIB $&lt;libname&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFLIB &lt;dbref&gt; &lt;truebranch&gt; $endif
<br>
$IFLIB &lt;dbref&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the existence of a given program.
<p>
  The &lt;truebranch&gt; will be compiled if the given object exists and is a
program.  Otherwise, the &lt;falsebranch&gt;, if given, will be compiled.
<p>Also see:
    <a href="#$ifnlib">$IFNLIB</a>,
    <a href="#$iflibver">$IFLIBVER</a>,
    <a href="#$ifver">$IFVER</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$version">$VERSION</a> and
    <a href="#$lib-version">$LIB-VERSION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$ifnlib">$IFNLIB $&lt;libname&gt; &lt;truebranch&gt; $endif
<br>
$IFNLIB $&lt;libname&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFNLIB &lt;dbref&gt; &lt;truebranch&gt; $endif
<br>
$IFNLIB &lt;dbref&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the existence of a given program.
<p>
  The &lt;truebranch&gt; will be compiled if the given object does not exist, or
if it is not a program.  Otherwise, the &lt;falsebranch&gt;, if given, will be
compiled.
<p>Also see:
    <a href="#$iflib">$IFLIB</a>,
    <a href="#$iflibver">$IFLIBVER</a>,
    <a href="#$ifver">$IFVER</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$version">$VERSION</a> and
    <a href="#$lib-version">$LIB-VERSION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$ifcancall">$IFCANCALL $&lt;libname&gt; &lt;publicname&gt; &lt;truebranch&gt; $endif
<br>
$IFCANCALL $&lt;libname&gt; &lt;publicname&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFCANCALL &lt;dbref&gt; &lt;publicname&gt; &lt;truebranch&gt; $endif
<br>
$IFCANCALL &lt;dbref&gt; &lt;publicname&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the ability for the compiling program to call a given public
function on a given program.
<p>
  The &lt;truebranch&gt; will be compiled if the given program exists, is a
program, and has a given callable function (declared with PUBLIC or WIZCALL)
that this compiling program has permission to call.  Otherwise, the
&lt;falsebranch&gt;, if given, will be compiled.
<p>Also see:
    <a href="#$ifncancall">$IFNCANCALL</a>,
    <a href="#$iflib">$IFLIB</a>,
    <a href="#$iflibver">$IFLIBVER</a>,
    <a href="#$ifver">$IFVER</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$version">$VERSION</a> and
    <a href="#$lib-version">$LIB-VERSION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$ifncancall">$IFNCANCALL $&lt;libname&gt; &lt;publicname&gt; &lt;truebranch&gt; $endif
<br>
$IFNCANCALL $&lt;libname&gt; &lt;publicname&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>
$IFNCANCALL &lt;dbref&gt; &lt;publicname&gt; &lt;truebranch&gt; $endif
<br>
$IFNCANCALL &lt;dbref&gt; &lt;publicname&gt; &lt;truebranch&gt; $else &lt;falsebranch&gt; $endif
<br>

<br>
</h3>
  This determines whether or not to compile optional sections of code,
depending on the ability for the compiling program to call a given public
function on a given program.
<p>
  The &lt;truebranch&gt; will be compiled if the given program does not exist,
is not a program, or does not have a given callable function (declared with
PUBLIC or WIZCALL) that this compiling program has permission to call.
Otherwise, the &lt;falsebranch&gt;, if given, will be compiled.
<p>Also see:
    <a href="#$ifcancall">$IFCANCALL</a>,
    <a href="#$iflib">$IFLIB</a>,
    <a href="#$iflibver">$IFLIBVER</a>,
    <a href="#$ifver">$IFVER</a>,
    <a href="#$ifdef">$IFDEF</a>,
    <a href="#$version">$VERSION</a> and
    <a href="#$lib-version">$LIB-VERSION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="$echo">$ECHO &lt;string&gt;
<br>
</h3>
  Echos the given string to the screen of the person compiling the program.
Runs at compile-time.
<!-- HTML_TOPICEND -->


<h3 id="$abort">$ABORT &lt;message&gt;
<br>
</h3>
  Aborts compiling and prints out the error message.
<!-- HTML_TOPICEND -->


<h3 id="$pragma">$PRAGMA &lt;pragmatype&gt; [&lt;args&gt;]
<br>
</h3>
  Sets a compiler option in a backwards compatible manner.  If the pragmatype
isn't recognized, the compiler will just ignore this line and continue its
compile attempt.  The $pragma directive must be all on one line, and the
entire rest of the line after the pragmatype is assumed to be arguments for
that pragmatype.  The currently supported pragmatypes are:

COMMENT_STRICT
<p>
  This specifies that comments are in the old style that is terminated by the
first end-paren ')' in the comment.

COMMENT_RECURSE
<p>
  This specifies that comments are in the new recursive style where any parens
'(' in a comment must be matched by end-parens ')'.

COMMENT_LOOSE
<p>
  This is the default comment style, where the compiler tries to compile
comments as if in comment_recurse mode, but will fall back to comment_strict
mode if a comment fails to have balancing parens.
<!-- HTML_TOPICEND -->


<h3 id="$entrypoint">$ENTRYPOINT &lt;function name&gt;
<br>

<br>
</h3>
  Sets the function used to start the program. Defaults to the last one.
<!-- HTML_TOPICEND -->


<h3 id="$language">$LANGUAGE &quot;&lt;language name&gt;&quot;
<br>

<br>
</h3>
  Sets the language used to compile the program. &quot;MUF&quot; is currently supported.
<!-- HTML_TOPICEND -->


<h3 id="\">Escaping Literal Tokens:
<br>

<br>
</h3>
  You can escape a token in MUF so that it will be interpreted literally.
ie:  \.pmatch will try to compile '.pmatch' without expanding it as a
macro.  This lets you make special things with $defines such as:
<pre>
    $define addprop over over or if \addprop else pop pop remove_prop $enddef
</pre>
so that all the 'addprop's in the program will be expanded to the
definition, but the 'addprop' in the definition will not try to expand
recursively.  It will call the actual addprop.
<!-- HTML_TOPICEND -->



<h2 id="StackOps">Stack Manipulation Operators</h2>
<ul>
    <li><a href="#-rot">-rot</a></li>
    <li><a href="#?dup">?dup</a></li>
    <li><a href="#deep_copy">deep_copy</a></li>
    <li><a href="#depth">depth</a></li>
    <li><a href="#dup">dup</a></li>
    <li><a href="#dupn">dupn</a></li>
    <li><a href="#fulldepth">fulldepth</a></li>
    <li><a href="#lreverse">lreverse</a></li>
    <li><a href="#nip">nip</a></li>
    <li><a href="#over">over</a></li>
    <li><a href="#pick">pick</a></li>
    <li><a href="#pop">pop</a></li>
    <li><a href="#popn">popn</a></li>
    <li><a href="#put">put</a></li>
    <li><a href="#reverse">reverse</a></li>
    <li><a href="#rot">rot</a></li>
    <li><a href="#rotate">rotate</a></li>
    <li><a href="#shallow_copy">shallow_copy</a></li>
    <li><a href="#swap">swap</a></li>
    <li><a href="#tuck">tuck</a></li>
    <li><a href="#{">{</a></li>
    <li><a href="#}">}</a></li>
</ul>



<h3 id="pop">POP ( x -- )
<br>

<br>
</h3>
  Pops the top of the stack into oblivion.
<p>Also see:
    <a href="#popn">POPN</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="popn">POPN ( ?n..?1 i -- )
<br>

<br>
</h3>
  Pops the top i stack items.
<p>Also see:
    <a href="#pop">POP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="dup">DUP ( x -- x x )
<br>

<br>
</h3>
  Duplicates the item at the top of the stack.
<p>Also see:
    <a href="#dupn">DUPN</a> and
    <a href="#ldup">LDUP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="dupn">DUPN ( ?n..?1 i -- ?n..?1 ?n..?1 )
<br>

<br>
</h3>
  Duplicates the top i stack items.
<p>Also see:
    <a href="#dup">DUP</a> and
    <a href="#ldup">LDUP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="?dup">?DUP ( x -- x x | x )
<br>

<br>
</h3>
  Duplicates the item at the top of the stack if it does not resolve to false.
<p>Also see:
    <a href="#dup">DUP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="nip">NIP ( x y -- y )
<br>

<br>
</h3>
  Pops the second item off the stack.
<p>Also see:
    <a href="#pop">POP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="tuck">TUCK ( x y -- y x y )
<br>

<br>
</h3>
  Duplicates y and places it under x.
<p>Also see:
    <a href="#over">OVER</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="">LDUP
<br>
LDUP ( {?} -- {?} {?} )
<br>

<br>
</h3>
  Duplicates a stackrange on top of the stack.
<p>Also see:
    <a href="#dup">DUP</a> and
    <a href="#dupn">DUPN</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="shallow_copy">SHALLOW_COPY ( x -- x x )
<br>

<br>
</h3>
  Duplicates the item at the top of the stack.  If it is an array, it makes
a shallow copy of it that is decoupled from the original array.
<p>Also see:
    <a href="#dup">DUP</a>,
    <a href="#dupn">DUPN</a>,
    <a href="#ldup">LDUP</a> and
    <a href="#deep_copy">DEEP_COPY</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="deep_copy">DEEP_COPY ( x -- x x )
<br>

<br>
</h3>
  Duplicates the item at the top of the stack.  If it is an array, it makes
a deep copy of it that is decoupled from the original array.
<p>Also see:
    <a href="#dup">DUP</a>,
    <a href="#dupn">DUPN</a>,
    <a href="#ldup">LDUP</a> and
    <a href="#shallow_copy">SHALLOW_COPY</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="swap">SWAP ( x y -- y x )
<br>

<br>
</h3>
  Takes objects x and y on the stack and reverses their order.
<p>Also see:
    <a href="#pick">PICK</a>,
    <a href="#over">OVER</a> and
    <a href="#dup">DUP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="over">OVER ( x y -- x y x )
<br>

<br>
</h3>
  Duplicates the second-to-top thing on the stack.  This is the same as 2 pick.
<p>Also see:
    <a href="#pick">PICK</a>,
    <a href="#swap">SWAP</a> and
    <a href="#dup">DUP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="rot">ROT ( x y z -- y z x )
<br>

<br>
</h3>
  Rotates the top three things on the stack.  This is equivalent to 3 rotate.
<p>Also see:
    <a href="#rotate">ROTATE</a>,
    <a href="#-rot">-ROT</a> and
    <a href="#swap">SWAP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="-rot">-ROT ( x y z -- z x y )
<br>

<br>
</h3>
  Rotates the top three things on the stack, in reverse.  Equivalent to -3 rotate.
<p>Also see:
    <a href="#rotate">ROTATE</a>,
    <a href="#rot">ROT</a> and
    <a href="#swap">SWAP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="rotate">ROTATE ( ni ... n1 i -- n(i-1) ... n1 ni )
<br>

<br>
</h3>
  Rotates the top i things on the stack.  Using a negative rotational
value rotates backwards.
Examples:
<pre>
    &quot;a&quot;  &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  4  rotate
</pre>
would leave
<pre>
    &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  &quot;a&quot;
</pre>
on the stack.
<pre>
    &quot;a&quot;  &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  -4  rotate
</pre>
would leave
</pre>
<p>
    &quot;d&quot;  &quot;a&quot;  &quot;b&quot;  &quot;c&quot;
</pre>
on the stack.
<p>Also see:
    <a href="#rot">ROT</a> and
    <a href="#swap">SWAP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="pick">PICK ( ni ... n1 i -- ni ... n1 ni )
<br>

<br>
</h3>
  Takes the i'th thing from the top of the stack and pushes it on the top.
1 pick is equivalent to dup, and 2 pick is equivalent to over.
<p>Also see:
    <a href="#over">OVER</a> and
    <a href="#put">PUT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="put">PUT ( nx...n1 ni i -- nx...ni...n1 )
<br>

<br>
</h3>
  Replaces the i'th item from the top of the stack with the value of ni.
The command sequence '1 put' is equivalent to 'swap pop'.
Example:
<pre>
    &quot;a&quot;  &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  &quot;e&quot;  3  put
</pre>
would return on the stack:
<pre>
    &quot;a&quot;  &quot;e&quot;  &quot;c&quot;  &quot;d&quot;
</pre>
<p>Also see:
    <a href="#pick">PICK</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="reverse">REVERSE ( ?n..?1 i -- ?1..?n )
<br>

<br>
</h3>
  Reverses the order of the top i items on the stack.
Example:
<pre>
    &quot;a&quot;  &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  &quot;e&quot;  4  reverse
</pre>
would return on the stack:
<pre>
    &quot;a&quot;  &quot;e&quot;  &quot;d&quot;  &quot;c&quot;  &quot;b&quot;
</pre>
<p>Also see:
    <a href="#lreverse">LREVERSE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="lreverse">LREVERSE ( ?n..?1 i -- ?1..?n i )
<br>

<br>
</h3>
  Reverses the order of the top i stack items, leaving i.
Example:
<pre>
    &quot;a&quot;  &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  &quot;e&quot;  4  lreverse
</pre>
would return on the stack:
<pre>
    &quot;a&quot;  &quot;e&quot;  &quot;d&quot;  &quot;c&quot;  &quot;b&quot;  4
</pre>
<p>Also see:
    <a href="#reverse">REVERSE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="depth">DEPTH ( -- i )
<br>

<br>
</h3>
  Returns the number of unlocked items currently on the stack.
<p>Also see:
    <a href="#fulldepth">FULLDEPTH</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="fulldepth">FULLDEPTH ( -- i )
<br>
</h3>
  Returns the number of items currently on the stack.
<p>Also see:
    <a href="#depth">DEPTH</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="{">{  ( -- marker)
<br>

<br>
</h3>
  Pushes a marker onto the stack, to be used with } or }list or }dict.
<p>Also see:
    <a href="#}">}</a>,
    <a href="#}list">}list</a>,
    <a href="#}dict">}dict</a>,
    <a href="#}tell">}tell</a> and
    <a href="#}join">}join</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="}">}  ( marker ?n ... ?1 -- ?n ... ?1 i )
<br>

<br>
</h3>
  Finds the topmost marker in the stack, and counts how many stack items
are between it and the top of the stack.  The marker is removed from the
stack, and the count is pushed onto the stack.
<p>Also see:
    <a href="#{">{</a>,
    <a href="#}list">}list</a>,
    <a href="#}dict">}dict</a>,
    <a href="#}tell">}tell</a> and
    <a href="#}join">}join</a>
</p>
<!-- HTML_TOPICEND -->



<h2 id="VarHandling">Variables and Handling Thereof</h2>
<ul>
    <li><a href="#!">!</a></li>
    <li><a href="#@">@</a></li>
    <li><a href="#cmd">cmd</a></li>
    <li><a href="#command">command</a></li>
    <li><a href="#loc">loc</a></li>
    <li><a href="#localvar">localvar</a></li>
    <li><a href="#lvar">lvar</a></li>
    <li><a href="#me">me</a></li>
    <li><a href="#secure_sysvars">secure_sysvars</a></li>
    <li><a href="#trigger">trigger</a></li>
    <li><a href="#var">var</a></li>
    <li><a href="#var!">var!</a></li>
    <li><a href="#variable">variable</a></li>
</ul>



<h3 id="me">ME @
<br>

<br>
</h3>
  There is a global variable named ME that contains the dbref of the
player who invoked the program.  The value of this variable is not
guaranteed to be secure, as another program could change the value of
ME then call your program.  If you must be certain that the value of
the ME variable is correct, use the commands:
<pre>
    &quot;me&quot; match me !
</pre>
The ME global variable is the same variable as '0 variable'
<p>Also see:
    <a href="#command">COMMAND</a>,
    <a href="#trigger">TRIGGER</a> and
    <a href="#loc">LOC</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="loc">LOC @
<br>

<br>
</h3>
  There is a global variable named LOC that contains the dbref of the
location of the player who invoked the program.  The value of this
variable is not guaranteed to be secure, as another program could change
the value of LOC then call your program.  If you must be certain that
the value of the LOC variable is correct, use the commands:
<pre>
    &quot;me&quot; match location loc !
</pre>
The LOC global variable is the same variable as '1 variable'
<p>Also see:
    <a href="#command">COMMAND</a>,
    <a href="#trigger">TRIGGER</a> and
    <a href="#me">ME</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="trigger">TRIGGER @
<br>

<br>
</h3>
  There is a global variable named TRIGGER that contains the dbref of the
trigger object that invoked the process.  The value of this variable is
not guaranteed to be secure, as another program could change the value of
TRIGGER then call your program.  If you must be certain that the value of
the TRIGGER variable is correct, use the commands:
<pre>
    trig trigger !
</pre>
The TRIGGER global variable is the same variable as '2 variable'
The value of TRIGGER will be #-1 for AUTOSTART programs,
<p>Also see:
    <a href="#command">COMMAND</a>,
    <a href="#loc">LOC</a> and
    <a href="#me">ME</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="cmd">CMD ( -- s )
<br>

<br>
</h3>
  Returns the command the user invoked the program with, without its
command line arguments.
<p>Also see:
    <a href="#command">COMMAND</a> and
    <a href="#trig">TRIG</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="command">COMMAND @
<br>

<br>
</h3>
  There is a COMMAND variable, similar to ME, LOC, and TRIGGER, except that
it contains a string.  The string contains the command the user typed
that triggered the the program, without the command line arguments.  ie:
if there was an exit named &quot;abracadabra;foo bar;frozzboz&quot; that was linked
to the program, and the user typed in &quot;foo bar baz&quot;, then the program
would run with &quot;baz&quot; on the stack, and &quot;foo bar&quot; in the global COMMAND
variable.  The COMMAND global variable is the same variable as '3 variable'
<p>Also see:
    <a href="#trigger">TRIGGER</a>,
    <a href="#loc">LOC</a> and
    <a href="#me">ME</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="var">VAR &lt;name&gt;
<br>

<br>
</h3>
  When used inside a function, a function-scoped variable is created.
This variable is local to each invocation of a given function; recursive
calls each get their own scoped variable dataspace.  This variable type
is analogous to C's function-scoped variables.  The use of function-scoped
variables is highly recomended to make functions more readable.

<p>
  When used outside of a function, the compiler allows the use of &lt;name&gt;
as a global variable in all functions defined after the var declaration.
This variable dataspace is shared between ALL muf programs called in
this process.  This means that if program A declares a global variable,
then calls program B, and program B also declares a global variable,
then changes its value, then the global variable declared in program A
will also have been changed.  For this reason, this usage of VAR is
deprecated and shoud NOT be used.  Use LVAR instead.  This usage is only
kept around for backwards compatability with some old icky programs that
used this feature to pass data between some programs.
<p>Also see:
    <a href="#var!">VAR!</a>,
    <a href="#lvar">LVAR</a>,
    <a href="#!">!</a>,
    <a href="#@">@</a>,
    <a href="#variable">VARIABLE</a> and
    <a href="#localvar">LOCALVAR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="var!">VAR! &lt;name&gt;
<br>

<br>
</h3>
  This must be used within a function.  It declares a function-scoped
variable named &lt;name&gt; that then has its value set to the topmost stack
item.  For example, the following program prints out &quot;Hello World!&quot;:
<pre>
    : myfunction
        &quot;Hello World!&quot; var! foo
        me @ foo @ notify
    ;
</pre>
<p>Also see:
    <a href="#var">VAR</a>,
    <a href="#lvar">LVAR</a>,
    <a href="#!">!</a>,
    <a href="#@">@</a>,
    <a href="#variable">VARIABLE</a> and
    <a href="#localvar">LOCALVAR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="lvar">LVAR &lt;varname&gt;
<br>

<br>
</h3>
  This declares a variable as a program-local variable.  If another program
calls this program, the values of the program-local variables will not be
changed in the calling program, even if the called program changes them.
This variable will be available to all functions defined later in the
program, after the lvar declaration.  This variable's data is persistent
within this process.  Ie: if program A calls program B, and program B sets
the value of this program-local variable, then returns to A, which then
calls B again, the value of this variable will still have the value it was
set to in the first call.  The value is NOT persistent between different
processes.  This variable type is analogous to C's global variables.
<p>Also see:
    <a href="#var">VAR</a>,
    <a href="#var!">VAR!</a>,
    <a href="#!">!</a>,
    <a href="#@">@</a>,
    <a href="#variable">VARIABLE</a> and
    <a href="#localvar">LOCALVAR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="@">@ ( v -- x )
<br>

<br>
</h3>
  Retrieves variable v's value x.
<p>Also see:
    <a href="#!">!</a>,
    <a href="#variable">VARIABLE</a>,
    <a href="#var">VAR</a>,
    <a href="#lvar">LVAR</a>,
    <a href="#localvar">LOCALVAR</a> and
    <a href="#miscellaneous">MISCELLANEOUS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="!">! ( x v -- )
<br>

<br>
</h3>
  Sets variable v's value to x.
<p>Also see:
    <a href="#@">@</a>,
    <a href="#variable">VARIABLE</a>,
    <a href="#var">VAR</a>,
    <a href="#lvar">LVAR</a>,
    <a href="#localvar">LOCALVAR</a> and
    <a href="#miscellaneous">MISCELLANEOUS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="variable">VARIABLE ( i -- v )
<br>

<br>
</h3>
  Converts integer i to global variable reference v. Of the pre-defined
variables, `me' corresponds to integer 0, `loc' to 1, `trigger' to 2,
and 'command' to 3.
Thus:
<pre>
    me @
</pre>
and
<pre>
    0 variable @
</pre>
will do the same thing (returning the user's dbref). User-defined variables
are numbered sequentially starting at 4 by the compiler. Note that these
variable numbers can be used even if variables have not been formally
declared.  This command has been deprecated, and is not recommended to use.
Its original purpose was to allow MUF to do small arrays.  Since MUF now
has an intrinsic array stack item type, this should no longer be used.
<p>Also see:
    <a href="#@">@</a>,
    <a href="#!">!</a>,
    <a href="#var">VAR</a>,
    <a href="#me">ME</a>,
    <a href="#trigger">TRIGGER</a>,
    <a href="#loc">LOC</a> and
    <a href="#command">COMMAND</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="localvar">LOCALVAR (i -- l)
<br>

<br>
</h3>
  Takes an integer and returns the respective program-local variable.
Similar to the 'variable' primitive.  Use of this command is deprecated
and is not recommended.  Use the array stack item type instead.
<p>Also see:
    <a href="#variable">VARIABLE</a>,
    <a href="#var">VAR</a>,
    <a href="#lvar">LVAR</a>,
    <a href="#@">@</a> and
    <a href="#!">!</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="secure_sysvars">SECURE_SYSVARS ( -- )
<br>

<br>
</h3>
  Sets the value of variables &quot;me&quot;, &quot;loc&quot;, &quot;trigger&quot; and &quot;command&quot; to their
correct values in one instruction.
<!-- HTML_TOPICEND -->



<h2 id="LogicOps">Logical Operators</h2>
<ul>
    <li><a href="#!=">!=</a></li>
    <li><a href="#&lt;">&lt;</a></li>
    <li><a href="#&lt;= ">&lt;= </a></li>
    <li><a href="#=">=</a></li>
    <li><a href="#&gt;">&gt;</a></li>
    <li><a href="#&gt;=">&gt;=</a></li>
    <li><a href="#address?">address?</a></li>
    <li><a href="#and">and</a></li>
    <li><a href="#array?">array?</a></li>
    <li><a href="#dbref?">dbref?</a></li>
    <li><a href="#dictionary?">dictionary?</a></li>
    <li><a href="#float?">float?</a></li>
    <li><a href="#int?">int?</a></li>
    <li><a href="#lock?">lock?</a></li>
    <li><a href="#not">not</a></li>
    <li><a href="#or">or</a></li>
    <li><a href="#string?">string?</a></li>
    <li><a href="#xor">xor</a></li>
</ul>



<h3 id="&lt;">&lt;  ( n1 n2 -- i )
<br>

<br>
</h3>
  Compares two numbers and returns 1 if n1 is less than n2, and 0 otherwise.
<p>Also see:
    <a href="#&gt;">&gt;</a>,
    <a href="#&lt;=">&lt;=</a>,
    <a href="#&gt;=">&gt;=</a>,
    <a href="#=">=</a>,
    <a href="#!=">!=</a>,
    <a href="#not">NOT</a>,
    <a href="#and">AND</a> and
    <a href="#or">OR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="&gt;">&gt;  ( n1 n2 -- i )
<br>

<br>
</h3>
  Compares two numbers and returns 1 if n1 is greater than n2, and 0 otherwise.
<p>Also see:
    <a href="#&lt;">&lt;</a>,
    <a href="#&lt;=">&lt;=</a>,
    <a href="#&gt;=">&gt;=</a>,
    <a href="#=">=</a>,
    <a href="#!=">!=</a>,
    <a href="#not">NOT</a>,
    <a href="#and">AND</a> and
    <a href="#or">OR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="=">=  ( ?1 ?2 -- i )
<br>

<br>
</h3>
  Compares two numbers, dbrefs, or strings and returns 1 if ?1 is equal to ?2,
and 0 otherwise.
<p>Also see:
    <a href="#&lt;">&lt;</a>,
    <a href="#&gt;">&gt;</a>,
    <a href="#&lt;=">&lt;=</a>,
    <a href="#&gt;=">&gt;=</a>,
    <a href="#!=">!=</a>,
    <a href="#not">NOT</a>,
    <a href="#and">AND</a> and
    <a href="#or">OR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="!=">!=  ( ?1 ?2 -- i )
<br>

<br>
</h3>
  Compares two numbers, dbrefs, or strings and returns 0 if ?1 is equal to ?2,
and 1 otherwise.
<p>Also see:
    <a href="#&lt;">&lt;</a>,
    <a href="#&gt;">&gt;</a>,
    <a href="#&lt;=">&lt;=</a>,
    <a href="#&gt;=">&gt;=</a>,
    <a href="#!=">!=</a>,
    <a href="#not">NOT</a>,
    <a href="#and">AND</a> and
    <a href="#or">OR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="&lt;= ">&lt;= ( n1 n2 -- i )
<br>

<br>
</h3>
  Compares two numbers and returns 1 if n1 is less than or equal to n2,
and 0 otherwise.
<p>Also see:
    <a href="#&lt;">&lt;</a>,
    <a href="#&gt;">&gt;</a>,
    <a href="#=">=</a>,
    <a href="#!=">!=</a>,
    <a href="#&gt;=">&gt;=</a>,
    <a href="#not">NOT</a>,
    <a href="#and">AND</a> and
    <a href="#or">OR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="&gt;=">&gt;= ( n1 n2 -- i )
<br>

<br>
</h3>
  Compares two numbers and returns 1 if n1 is greater than or equal to n2,
and 0 otherwise.
<p>Also see:
    <a href="#&lt;">&lt;</a>,
    <a href="#&gt;">&gt;</a>,
    <a href="#&lt;=">&lt;=</a>,
    <a href="#=">=</a>,
    <a href="#!=">!=</a>,
    <a href="#not">NOT</a>,
    <a href="#and">AND</a> and
    <a href="#or">OR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="not">NOT ( x -- i )
<br>

<br>
</h3>
  Returns true (1) if the top stack item is considered false.  Returns
false (0) otherwise.  The stack item can be of any type.  For the various
types, here are their false values:
<pre>
    Integer      0
    Float        0.0
    DBRef        #-1
    String       &quot;&quot;
</pre>
<p>Also see:
    <a href="#and">AND</a>,
    <a href="#or">OR</a> and
    <a href="#xor">XOR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="and">AND ( x1 x2 -- i )
<br>

<br>
</h3>
  Returns true (1) if both of the top two stack items are considered true.
Returns false (0) otherwise.  The stack items can be of any type.  For the
various types, here are their false values:
<pre>
    Integer      0
    Float        0.0
    DBRef        #-1
    String       &quot;&quot;
</pre>
<p>Also see:
    <a href="#not">NOT</a>,
    <a href="#or">OR</a> and
    <a href="#xor">XOR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="or">OR ( x1 x2 -- i )
<br>

<br>
</h3>
  Returns true (1) if either of the top two stack items are considered true.
Returns false (0) otherwise.  The stack items can be of any type.  For the
various types, here are their false values:
<pre>
    Integer      0
    Float        0.0
    DBRef        #-1
    String       &quot;&quot;
</pre>
<p>Also see:
    <a href="#not">NOT</a>,
    <a href="#and">AND</a> and
    <a href="#xor">XOR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="xor">XOR ( x1 x2 -- i )
<br>

<br>
</h3>
  Returns true (1) if either of the top two stack items are considered true,
but NOT both of them.  Returns false (0) otherwise.  The stack items can be
of any type.  For the various types, here are their false values:
<pre>
    Integer      0
    Float        0.0
    DBRef        #-1
    String       &quot;&quot;
</pre>
<p>Also see:
    <a href="#not">NOT</a>,
    <a href="#and">AND</a> and
    <a href="#or">OR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="string?">STRING? ( x -- i )
<br>

<br>
</h3>
  Returns true if x is a string.
<!-- HTML_TOPICEND -->


<h3 id="int?">INT? ( x -- i )
<br>

<br>
</h3>
  Returns true if x is a int.
<!-- HTML_TOPICEND -->


<h3 id="float?">FLOAT? ( ? -- i )
<br>

<br>
</h3>
  Returns true if the item on the stack is a floating point value.
<!-- HTML_TOPICEND -->


<h3 id="dbref?">DBREF? ( x -- i )
<br>

<br>
</h3>
  Returns true if x is a dbref.
<!-- HTML_TOPICEND -->


<h3 id="array?">ARRAY? ( ? -- i )
<br>

<br>
</h3>
  Tests if stack item is an array.  Returns i as 1 if so, 0 if
otherwise.
<p>Also see:
    <a href="#dictionary?">DICTIONARY?</a>,
    <a href="#int?">INT?</a>,
    <a href="#dbref?">DBREF?</a>,
    <a href="#array_make_dict">ARRAY_MAKE_DICT</a> and
    <a href="#array_make">ARRAY_MAKE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="dictionary?">DICTIONARY? ( ? -- i )
<br>

<br>
</h3>
  Tests if stack item is an array of dictionary type.  Returns i as 1
if so, 0 if otherwise.
<p>Also see:
    <a href="#array?">ARRAY?</a>,
    <a href="#int?">INT?</a>,
    <a href="#dbref?">DBREF?</a>,
    <a href="#array_make_dict">ARRAY_MAKE_DICT</a> and
    <a href="#array_make">ARRAY_MAKE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="address?">ADDRESS? (? -- i)
<br>

<br>
</h3>
  Returns true if the top stack item is a function address.
<!-- HTML_TOPICEND -->


<h3 id="lock?">LOCK? (? -- i)
<br>

<br>
</h3>
  Returns true if the top stack item is a lock.
<p>Also see:
    <a href="#getprop">GETPROP</a>,
    <a href="#setprop">SETPROP</a>,
    <a href="#parselock">PARSELOCK</a>,
    <a href="#unparselock">UNPARSELOCK</a>,
    <a href="#prettylock">PRETTYLOCK</a> and
    <a href="#testlock">TESTLOCK</a>
</p>
<!-- HTML_TOPICEND -->



<h2 id="ExecStructs">Execution Control Structures</h2>
<ul>
    <li><a href="#'">'</a></li>
    <li><a href="#begin">begin</a></li>
    <li><a href="#break">break</a></li>
    <li><a href="#call">call</a></li>
    <li><a href="#cancall?">cancall?</a></li>
    <li><a href="#case">case</a></li>
    <li><a href="#continue">continue</a></li>
    <li><a href="#else">else</a></li>
    <li><a href="#execute">execute</a></li>
    <li><a href="#exit">exit</a></li>
    <li><a href="#for">for</a></li>
    <li><a href="#foreach">foreach</a></li>
    <li><a href="#if">if</a></li>
    <li><a href="#interp">interp</a></li>
    <li><a href="#jmp">jmp</a></li>
    <li><a href="#loop-example1">loop-example1</a></li>
    <li><a href="#loop-example2">loop-example2</a></li>
    <li><a href="#loop-example3">loop-example3</a></li>
    <li><a href="#loops">loops</a></li>
    <li><a href="#public">public</a></li>
    <li><a href="#repeat">repeat</a></li>
    <li><a href="#then">then</a></li>
    <li><a href="#until">until</a></li>
    <li><a href="#while">while</a></li>
    <li><a href="#wizcall">wizcall</a></li>
</ul>



<h3 id="if">IF (x -- ) ... THEN
<br>
IF (x -- ) ... ELSE ... THEN
<br>

<br>
</h3>
  Examines boolean value x.  If x is TRUE, the sequence of statements
after the 'if' up until the `then' (or until the `else' if it is
present) performed. If it is FALSE, then these statements are skipped,
and if an `else' is present, the statements between the `else' and the
`then' are performed.  Control continues as usual at the statement
after the `then'.  Note that checking the top of the stack actually
pops it, so if you want to re-use it, you should dup (see DUP) it
before the if. For every IF in a word, there MUST be a THEN, and
vice-versa.  ELSE is optional.
<!-- HTML_TOPICEND -->


<h3 id="else">IF (x -- ) ... ELSE ... THEN
<br>

<br>
</h3>
  Begins an ELSE block in an IF-ELSE-THEN code block.  If the value
tested by the IF is false, then this code block will be executed.
<p>Also see:
    <a href="#if">IF</a> and
    <a href="#then">THEN</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="then">IF (x -- ) ... THEN
<br>
IF (x -- ) ... ELSE ... THEN
<br>

<br>
</h3>
  Denotes the end of an IF-THEN or IF-ELSE-THEN code block.
<p>Also see:
    <a href="#if">IF</a> and
    <a href="#else">ELSE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="'">'FUNCNAME ( -- a )
<br>

<br>
</h3>
  Pushed the address of the start of the previously defined function
FUNCNAME onto the stack.  This can be useful for use with EXECUTE and
arrays to make a list of functions you can call by index, or for making
function callbacks.
<!-- HTML_TOPICEND -->


<h3 id="execute">EXECUTE ( a -- ?? )
<br>

<br>
</h3>
  Executes the function pointed to by the address a on the stack.
This function does NOT need to be in the same program as the function
that did the EXECUTE.
<p>Also see:
    <a href="#'">'</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="jmp">JMP (a -- )
<br>

<br>
</h3>
  The JMP primitive takes an address like those supplied by 'funcname and
moves execution to that point.  It's one early way that was used to do
tail-recursion loops without as much overhead, and without failing due to
system stack overflows.  It's mostly obsolete now, except that it's one
of the three or four internal primitives used to implement IF-ELSE-THEN and
BEGIN-WHILE-REPEAT loops and such.  You shouldn't use JMP explicitly in
in modern MUF code, as it is deprecated.  NOTE: Using JMP to jump into a
different function can have problems, and is not recommended.

Example of JMP as a tail-recursion optimization:
<pre>
    : countforever ( i -- )
        1 +
        dup intostr .tell
        'countforever jmp
    ;
</pre>

A better ways to do the same thing with looping primitives would be:
<pre>
    : countforever ( i -- )
        begin
            1 +
            dup intostr .tell
        repeat
    ;
</pre>
<p>Also see:
    <a href="#'">'</a> and
    <a href="#execute">EXECUTE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="call">CALL ( d -- ?? )
<br>
CALL ( d s -- ?? )
<br>

<br>
</h3>
  Calls another program d.  Program d will inherit the values of ME, LOC,
TRIGGER, and all other global variables.  If used in the second form,
this will call the named PUBLIC function s in the given program d.
The called program will NOT share the same localvars as the caller,
unless the caller is calling itself.
<!-- HTML_TOPICEND -->


<h3 id="interp">INTERP ( d1 d2 s -- ? )
<br>

<br>
</h3>
  Takes a program dbref to run d1, the trigger to use d2, and the top stack
item string and calls the program with the given string on the stack.
Returns when interpretation halts, which could be the result of an exit, an
error, or a primitive that suspends execution such as sleep or read.
Return value is the top item off the stack if successful exit, or a null
string for anything else.
<!-- HTML_TOPICEND -->


<h3 id="exit">EXIT ( -- )
<br>

<br>
</h3>
  Exits from the function currently being executed, returning control to
the calling function, at the statement immediately after the location of
the call (exiting the program if applicable).
<!-- HTML_TOPICEND -->


<h3 id="begin">BEGIN ( -- )
<br>

<br>
</h3>
  Marks the beginning of BEGIN-UNTIL or BEGIN-REPEAT loops.
<p>Also see:
    <a href="#loops">LOOPS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="for">FOR (i1 i2 i3 -- i)
<br>

<br>
</h3>
  Marks the beginning of a iterative FOR loop, and initializes it with i1
as the start index, i2 as the end index, and i3 as the step.  If i2 is less
then i1, or if i3 is negative and i2 is greater then i1, the entire loop is
skipped without executing.  If i3 is 0 the loop will run infinitely until
some other condition causes an exit.
<p>Also see:
    <a href="#loops">LOOPS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="foreach">FOREACH (a -- @ ? )
<br>

<br>
</h3>
  Marks the beginning of an iterative FOREACH loop, stepping through every
index/value pair in the array.
<p>Also see:
    <a href="#loops">LOOPS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="while">WHILE (i -- )
<br>

<br>
</h3>
  If the value on top of the stack is false, then this causes execution
to jump to the instruction after the UNTIL or REPEAT for the current
loop.  If the value is true, however, execution falls through to the
instruction after the WHILE.
<p>Also see:
    <a href="#loops">LOOPS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="break">BREAK ( -- )
<br>

<br>
</h3>
  Breaks out of the innermost loop.  Jumps execution to the instruction
after the UNTIL or REPEAT for the current loop.
<p>Also see:
    <a href="#loops">LOOPS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="continue">CONTINUE ( -- )
<br>

<br>
</h3>
  Jumps execution to the beginning of the current loop.
<p>Also see:
    <a href="#loops">LOOPS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="repeat">REPEAT ( -- )
<br>

<br>
</h3>
  This marks the end of the current loop.  Execution jumps to the instruction
after the matching BEGIN, FOREACH or FOR in a loop.
<p>Also see:
    <a href="#loops">LOOPS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="until">UNTIL (i -- )
<br>

<br>
</h3>
  This marks the end of the current loop.  If the value on top of the
stack is false, then execution jumps back to the instruction after
the matching BEGIN or FOR statement.  If the value is true, it exits
the loop, and continues execution at the next instruction following
the UNTIL.
<p>
  Loops, TRY-CATCH-ENDCATCH's, and IF-ELSE-THEN's can all be nested in
each other as much as you want.
<p>Also see:
    <a href="#loops">LOOPS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="case">Case statements
<br>

<br>
</h3>
  Inserver defines to achieve case statements. Allows:

<pre>
&lt;data&gt; case
  &lt;test&gt; when &lt;effect&gt; end
  &lt;test&gt; when &lt;effect&gt; end
  &lt;test&gt; when &lt;effect&gt; end
  &lt;test&gt; when &lt;effect&gt; end
  default &lt;otherwise&gt;  end
endcase
</pre>
<p>
 
This compiles to the following MUF code:

<pre>
&lt;data&gt; begin
  dup &lt;test&gt; if pop &lt;effect&gt; break then
  dup &lt;test&gt; if pop &lt;effect&gt; break then
  dup &lt;test&gt; if pop &lt;effect&gt; break then
  dup &lt;test&gt; if pop &lt;effect&gt; break then
  dup pop 1  if &lt;otherwise&gt;  break then
  dup pop pop
1 until
</pre>
<!-- HTML_TOPICEND -->


<h3 id="loops">Loops:
<br>

<br>
</h3>
  The BEGIN, FOR, or FOREACH statement marks the beginning of a loop.
Either the UNTIL or the REPEAT statement marks the end of the loop.
REPEAT will do an unconditional jump back to the BEGIN or FOR statement.
UNTIL checks to see if the value on the stack is false.  If it is, it
jumps back to the BEGIN or FOR statement, otherwise, it falls through
on execution to the statement after the UNTIL.
<p>
  Within a loop, even within IF-ELSE-THEN structures within the loop
structure, you can place WHILE, CONTINUE, or BREAK statements.  There
is no limit as to how many, or in what combinations these instructions
are used.
<p>
  A WHILE statement checks to see if the top value on the stack is false.
If it is, then execution breaks out of the innermost loop and resumes
after the matching REPEAT or UNTIL statement.
<p>
  The CONTINUE statement causes the loop to jump back to the beginning
of its next iteration, after the BEGIN, FOR, or FOREACH.
<p>
  The BREAK statement forces execution to break out of the innermost loop,
resuming after the matching REPEAT or UNTIL.
<p>
  Note: You can nest loops complexly, but WHILE, BREAK, and CONTINUE
statements only refer to the innermost loop structure.
<p>Also see:
    <a href="#loop-example1">LOOP-EXAMPLE1</a>,
    <a href="#loop-example2">LOOP-EXAMPLE2</a> and
    <a href="#loop-example3">LOOP-EXAMPLE3</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="loop-example1">Loop Examples 1:
<br>

<br>
How to count from 1 to 10 using a BEGIN-REPEAT loop:
<br>
<pre>
</h3>
    0 begin
        dup 10 &lt; while
        1 +
        me @ over intostr notify
    repeat
</pre>

How to count from 1 to 10 using a BEGIN-UNTIL loop:
<pre>
    0 begin
        1 +
        me @ over intostr notify
        dup 10 =
    until
</pre>

How to count from 1 to 10 using a FOR-REPEAT loop:
<pre>
    1 10 1 for
        intostr me @ swap notify
    repeat
</pre>
<p>Also see:
    <a href="#loops">LOOPS</a>,
    <a href="#loop-example2">LOOP-EXAMPLE2</a> and
    <a href="#loop-example3">LOOP-EXAMPLE3</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="loop-example2">Loop Examples 2:
<br>

<br>
Example of a FOR loop:
<br>
<pre>
</h3>
    1 10 1 for
        me @ swap intostr notify
    repeat
</pre>

Example of nested FOR loops:
<pre>
    1 5 1 for
        &quot;&quot; swap 1 -1 for
            intostr strcat
        repeat
        me @ swap notify
    repeat
</pre>

Example of a complex (if pointless) FOR loop:
<pre>
    10 -10 -2 for
        me @ over intostr notify
        dup -5 &gt; while
        dup 0 = if pop continue then
        dup -3 = if pop break then
        not
    until
</pre>

Example of a FOREACH loop:
<pre>
    {
        &quot;index1&quot; &quot;value1&quot;
        &quot;index2&quot; &quot;value2&quot;
        &quot;index3&quot; &quot;value3&quot;
    }dict
    foreach
        &quot; = &quot; swap strcat strcat me @ swap notify
    repeat
</pre>
<p>Also see:
    <a href="#loops">LOOPS</a>,
    <a href="#loop-example1">LOOP-EXAMPLE1</a> and
    <a href="#loop-example3">LOOP-EXAMPLE3</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="loop-example3">Loop Examples 3:
<br>

<br>
Example of a complex loop structure:
<br>
<pre>
</h3>
    101 begin                       (BEGIN the outer loop)
        dup while 1 -                 (This WHILE, ...)
        dup not if break then         (this BREAK, and..)
        dup 2 % not if continue then  (this CONTINUE refer to the outer loop)
        dup 10 % not if
        15 begin                      (BEGIN inner loop)
            dup while 1 -               (This WHILE, and.. )
            dup 5 % not if break then   (... this BREAK, refer to inner loop)
        repeat                        (This REPEAT statement ends inner loop.)
        then
        dup 7 % not if continue then  (This CONTINUE, and...)
        dup 3 % not if
            dup 9 % while             (...this WHILE refer to the outer loop)
        then
        dup intostr
        me @ swap notify
    dup 1 = until pop               (This UNTIL ends the outer loop)
</pre>
<p>Also see:
    <a href="#loops">LOOPS</a>,
    <a href="#loop-example1">LOOP-EXAMPLE1</a> and
    <a href="#loop-example2">LOOP-EXAMPLE2</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="public">PUBLIC &lt;functionname&gt;
<br>

<br>
</h3>
  Declares a previously defined function to be public for execution by other
programs.  This is a compile-time directive, not a run-time primitive.  To
call a public function, put the dbref of the program on the stack, then put
a string, containing the function name, on the stack, then use CALL.
For example:
<pre>
    #888 &quot;functionname&quot; CALL
</pre>
<p>Also see:
    <a href="#wizcall">WIZCALL</a>,
    <a href="#cancall?">CANCALL?</a>,
    <a href="#call">CALL</a>,
    <a href="#$libdef">$LIBDEF</a> and
    <a href="#$pubdef">$PUBDEF</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="wizcall">WIZCALL &lt;functionname&gt;
<br>

<br>
</h3>
  Declares a previously defined function to be callable from other programs,
as long as the calling program has wizbit permissions.  This is a compile-
time directive, not a run-time primitive.  To call a public function, put
the dbref of the program on the stack, then put a string, containing the
function name, on the stack, then use CALL.  For example:
<pre>
    #888 &quot;functionname&quot; CALL
</pre>
<p>Also see:
    <a href="#public">PUBLIC</a>,
    <a href="#cancall?">CANCALL?</a>,
    <a href="#call">CALL</a>,
    <a href="#$libdef">$LIBDEF</a> and
    <a href="#$pubdef">$PUBDEF</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="cancall?">CANCALL?  (d s -- i)
<br>

<br>
</h3>
  Returns true if the given program has a public or wizcall function that the
current program has permissions to call.  Returns false, otherwise.
<p>Also see:
    <a href="#public">PUBLIC</a>,
    <a href="#wizcall">WIZCALL</a>,
    <a href="#call">CALL</a>,
    <a href="#$libdef">$LIBDEF</a> and
    <a href="#$pubdef">$PUBDEF</a>
</p>
<!-- HTML_TOPICEND -->



<h2 id="IOOps">I/O Operators</h2>
<ul>
    <li><a href="#notify">notify</a></li>
    <li><a href="#notify_except">notify_except</a></li>
    <li><a href="#notify_exclude">notify_exclude</a></li>
    <li><a href="#notify_nolisten">notify_nolisten</a></li>
    <li><a href="#notify_secure">notify_secure</a></li>
    <li><a href="#otell">otell</a></li>
    <li><a href="#read">read</a></li>
    <li><a href="#read_wants_blanks">read_wants_blanks</a></li>
    <li><a href="#read_wants_no_blanks">read_wants_no_blanks</a></li>
    <li><a href="#tell">tell</a></li>
    <li><a href="#tread">tread</a></li>
    <li><a href="#userlog">userlog</a></li>
</ul>



<h3 id="notify">NOTIFY ( d s -- )
<br>

<br>
</h3>
  d must be a player object. s must be a string. Tells player d message
s.  If s is null it will print nothing.  This primitive will trigger
the _listen'er property on the object the message is sent to, unless
the program that would be run is the same as one one currently running.
<!-- HTML_TOPICEND -->


<h3 id="notify_nolisten">NOTIFY_NOLISTEN ( d s -- )
<br>

<br>
</h3>
  d must be a player object. s must be a string. Tells player d message
s.  If s is null it will print nothing.  This primitive will not trigger
any _listen'er properties on the object the message is sent to.
<!-- HTML_TOPICEND -->


<h3 id="notify_except">NOTIFY_EXCEPT ( d1 d2 s -- )
<br>

<br>
</h3>
  d1 must be a room object, s must be a string.  Tells everyone at
location d1 except object d2 message s.  If object d2 is not a player
or NOTHING (#-1) all players are notified.  If s is null it prints
nothing.  NOTE: notify_except is now only an inserver $define.  It is
translated to '1 swap notify_exclude'.  Please see the man sections on
NOTIFY_EXCLUDE and DIRECTIVES for more information.
<!-- HTML_TOPICEND -->


<h3 id="notify_exclude">NOTIFY_EXCLUDE ( d dn ... d1 n s -- )
<br>

<br>
</h3>
  Displays the message s to all the players (or _listening objects),
excluding the n given players, in the given room.  For example:
<p>
  #0 #1 #23 #7 3 &quot;Hi!&quot; notify_exclude
would send &quot;Hi!&quot; to everyone in room #0 except for players (or objects)
#1, #7, and #23.  _listener's will not be triggered by a notify_exclude
if the program they would run is the same as the current program running.
<!-- HTML_TOPICEND -->


<h3 id="notify_secure">NOTIFY_SECURE ( d s1 s2 -- )
<br>
</h3>
  Notifies player d with s1 over their secure descriptors and s2 over their
insecure descriptors. Triggers listener prop queues only with s2.
<!-- HTML_TOPICEND -->


<h3 id="read_wants_blanks">READ_WANTS_BLANKS ( -- )
<br>

<br>
</h3>
  Tells the interpreter that this process wants to be able to receive blank
lines from the READ primitive. This can be reversed with the READ_WANTS_NO_BLANKS
primitive.
<p>Also see:
    <a href="#read">READ</a>,
    <a href="#tread">TREAD</a> and
    <a href="#read_wants_no_blanks">READ_WANTS_NO_BLANKS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="read_wants_no_blanks">READ_WANTS_NO_BLANKS ( -- )
<br>

<br>
</h3>
  Tells the interpreter that this process should ignore blank lines from
the READ primitive. This is only necessary after a call to READ_WANTS_BLANKS has
been made.
<p>Also see:
    <a href="#read">READ</a>,
    <a href="#tread">TREAD</a> and
    <a href="#read_wants_blanks">READ_WANTS_BLANKS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="read">READ ( -- s )
<br>

<br>
</h3>
  Reads a string s from the user. This command should not be used in a
program that is locked (as opposed to linked) to an object, as the
lock will always fail and print the fail messages at read time.  It
cannot be used in a program associated with a room object.
<p>Also see:
    <a href="#read_wants_blanks">READ_WANTS_BLANKS</a>,
    <a href="#read_wants_no_blanks">READ_WANTS_NO_BLANKS</a> and
    <a href="#tread">TREAD</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="tread">TREAD ( i -- s i )
<br>

<br>
</h3>
  Acts like a timed READ call.  If the user does not provide input within
the given number of seconds, the READ call will time-out and return a
false boolean, otherwise it returns a true boolean and the string value
entered.  This is implemented as an in-server macro as follows:
<p>
    &quot;__tread&quot; timer_start { &quot;TIMER.__tread&quot; &quot;READ&quot; }list event_waitfor
<p>
    swap pop &quot;READ&quot; strcmp if &quot;&quot; 0 else read 1 &quot;__tread&quot; timer_stop then
<p>Also see:
    <a href="#read_wants_blanks">READ_WANTS_BLANKS</a> and
    <a href="#read">READ</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="userlog">USERLOG ( str:mesg -- )
<br>

<br>
</h3>
  Logs an arbitrary message to the user log file.  (#defined in config.h
as USER_LOG, defaults to the &quot;logs/user&quot; file.)  The log entry will be
formatted like:
Winged(#4023) [newaction.muf(#666)] 2002-06-11T03:09:31: &lt;string&gt;
The program must be running at a mucker level at least equal to the @tune
value 'userlog_mlev' (defaults to 3) to write this log entry.
<!-- HTML_TOPICEND -->


<h3 id="tell">TELL ( s -- )
<br>

<br>
</h3>
  Displays the message s to the player, triggering applicable listeners.
<!-- HTML_TOPICEND -->


<h3 id="otell">OTELL ( s -- )
<br>

<br>
</h3>
  Displays the message s to all occupants of the player's location, except
the player.  This primitive triggers applicable listeners.
<!-- HTML_TOPICEND -->



<h2 id="MathOps">Mathematical Operators</h2>
<ul>
    <li><a href="#%">%</a></li>
    <li><a href="#*">*</a></li>
    <li><a href="#+">+</a></li>
    <li><a href="#++">++</a></li>
    <li><a href="#-">-</a></li>
    <li><a href="#--">--</a></li>
    <li><a href="#/">/</a></li>
    <li><a href="#abs">abs</a></li>
    <li><a href="#bitand">bitand</a></li>
    <li><a href="#bitor">bitor</a></li>
    <li><a href="#bitshift">bitshift</a></li>
    <li><a href="#bitxor">bitxor</a></li>
    <li><a href="#getseed">getseed</a></li>
    <li><a href="#int">int</a></li>
    <li><a href="#random">random</a></li>
    <li><a href="#setseed">setseed</a></li>
    <li><a href="#sign">sign</a></li>
    <li><a href="#srand">srand</a></li>
</ul>



<h3 id="int">INT ( x -- i )
<br>

<br>
</h3>
  Converts variable, float, or dbref x to integer i.
<!-- HTML_TOPICEND -->


<h3 id="+">+ ( n1 n2 -- i )
<br>
</h3>
  This adds two numbers, n1 + n2.  If both numbers are integers, an integer
will be returned.  If one of them is a floating point number, then a float
will be returned.  You can also use this on a dbref or a variable number,
so long as the second argument is an integer.  In those cases, this will
return a dbref or variable number, respectively.

<p>
  Also concatenates two strings.
<!-- HTML_TOPICEND -->


<h3 id="-">- ( n1 n2 -- i )
<br>

<br>
</h3>
  This subtracts two numbers, n1 - n2.  If both numbers are integers, an
integer will be returned.  If one of them is a floating point number,
then a float will be returned.  You can also use this on a dbref or a
variable number, so long as the second argument is an integer.  In those
cases, this will return a dbref or variable number, respectively.
<!-- HTML_TOPICEND -->


<h3 id="*">* ( n1 n2 -- n )
<br>

<br>
</h3>
  This multiplies two numbers, n1 * n2.  If both numbers are integers, an
integer will be returned.  If one of them is a floating point number,
then a float will be returned.  You can also use this on a dbref or a
variable number, so long as the second argument is an integer.  In those
cases, this will return a dbref or variable number, respectively.

<p>
  Also repeats a string given an integer argument.
<!-- HTML_TOPICEND -->


<h3 id="/">/ ( n1 n2 -- n )
<br>

<br>
</h3>
  This divides two numbers, n1 / n2.  If both numbers are integers, an
integer will be returned.  If one of them is a floating point number,
then a float will be returned.  You can also use this on a dbref or a
variable number, so long as the second argument is an integer.  In those
cases, this will return a dbref or variable number, respectively.
<!-- HTML_TOPICEND -->


<h3 id="%">% ( n1 n2 -- i )
<br>

<br>
</h3>
  This returns the integer modulo (remainder) of the division of two
numbers, n1 % n2.  Floats cannot use the % modulo function.  For them,
use either the FMOD or MODF primitives.
<!-- HTML_TOPICEND -->


<h3 id="++">++ ( v -- )
<br>
++ ( n -- n' )
<br>

<br>
</h3>
  If given an integer, float, or dbref, adds 1 to it, and returns the result.
If given a variable containing an integer, float, or dbref, adds 1 to the
value stored in the variable, and returns nothing.
<p>Also see:
    <a href="#--">--</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="--">-- ( v -- )
<br>
-- ( n -- n' )
<br>

<br>
</h3>
  If given an integer, float, or dbref, this subtracts 1 from it, and
returns the result.  If given a variable containing an integer, float,
or dbref, this subtracts 1 from the value stored in the variable, and
returns nothing.
<p>Also see:
    <a href="#++">++</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="abs">ABS ( i -- i )
<br>

<br>
</h3>
  Given an integer, returns its absolute value.
<!-- HTML_TOPICEND -->


<h3 id="sign">SIGN ( i -- i )
<br>

<br>
</h3>
  Given an integer, returns 1 if positive, -1 if negative, and 0 if 0.
<!-- HTML_TOPICEND -->


<h3 id="getseed">GETSEED ( -- s )
<br>

<br>
</h3>
  Returns the the current SRAND seed string.
<!-- HTML_TOPICEND -->


<h3 id="setseed">SETSEED ( s -- )
<br>

<br>
</h3>
  Sets the seed for SRAND.  Only the first thirty-two characters are
significant.  If SRAND is called before SETSEED is called, then SRAND
is seeded with a semi-random value.
<!-- HTML_TOPICEND -->


<h3 id="srand">SRAND ( -- i )
<br>

<br>
</h3>
  Generates a seeded random number.
<p>Also see:
    <a href="#setseed">SETSEED</a> and
    <a href="#getseed">GETSEED</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="random">RANDOM ( -- i )
<br>

<br>
</h3>
  Returns a random integer from 0 to (2^31)-1, which is 2,147,483,647.
This is based on the C random() function, so it's not very secure.
<p>Also see:
    <a href="#setseed">SETSEED</a>,
    <a href="#getseed">GETSEED</a>,
    <a href="#srand">SRAND</a>,
    <a href="#frand">FRAND</a> and
    <a href="#gaussian">GAUSSIAN</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="bitor">BITOR (i i -- i)
<br>

<br>
</h3>
  Does a mathematical bitwise or.
<!-- HTML_TOPICEND -->


<h3 id="bitxor">BITXOR (i i -- i)
<br>

<br>
</h3>
  Does a mathematical bitwise exclusive or.
<!-- HTML_TOPICEND -->


<h3 id="bitand">BITAND (i i -- i)
<br>

<br>
</h3>
  Does a mathematical bitwise and.
<!-- HTML_TOPICEND -->


<h3 id="bitshift">BITSHIFT (i i -- i)
<br>

<br>
</h3>
  Shifts the first integer by the second integer's number of bit positions.
Same as the C &lt;&lt; operator.  If the second integer is negative, its like &gt;&gt;.
<!-- HTML_TOPICEND -->



<h2 id="FloatOps">Floating Point Operators</h2>
<ul>
    <li><a href="#acos">acos</a></li>
    <li><a href="#asin">asin</a></li>
    <li><a href="#atan">atan</a></li>
    <li><a href="#atan2">atan2</a></li>
    <li><a href="#ceil">ceil</a></li>
    <li><a href="#clear">clear</a></li>
    <li><a href="#clear_error">clear_error</a></li>
    <li><a href="#cos">cos</a></li>
    <li><a href="#diff3">diff3</a></li>
    <li><a href="#dist3d">dist3d</a></li>
    <li><a href="#epsilon">epsilon</a></li>
    <li><a href="#error?">error?</a></li>
    <li><a href="#error_bit">error_bit</a></li>
    <li><a href="#error_name">error_name</a></li>
    <li><a href="#error_num">error_num</a></li>
    <li><a href="#error_str">error_str</a></li>
    <li><a href="#exp">exp</a></li>
    <li><a href="#fabs">fabs</a></li>
    <li><a href="#float">float</a></li>
    <li><a href="#floor">floor</a></li>
    <li><a href="#fmod">fmod</a></li>
    <li><a href="#frand">frand</a></li>
    <li><a href="#ftostr">ftostr</a></li>
    <li><a href="#ftostrc">ftostrc</a></li>
    <li><a href="#gaussian">gaussian</a></li>
    <li><a href="#inf">inf</a></li>
    <li><a href="#is_set?">is_set?</a></li>
    <li><a href="#log">log</a></li>
    <li><a href="#log10">log10</a></li>
    <li><a href="#modf">modf</a></li>
    <li><a href="#pi">pi</a></li>
    <li><a href="#polar_to_xyz">polar_to_xyz</a></li>
    <li><a href="#pow">pow</a></li>
    <li><a href="#round">round</a></li>
    <li><a href="#set_error">set_error</a></li>
    <li><a href="#sin">sin</a></li>
    <li><a href="#sqrt">sqrt</a></li>
    <li><a href="#strtof">strtof</a></li>
    <li><a href="#tan">tan</a></li>
    <li><a href="#xyz_to_polar">xyz_to_polar</a></li>
</ul>



<h3 id="float">FLOAT ( i -- f )
<br>

<br>
</h3>
  Converts integer to floating point type.
<!-- HTML_TOPICEND -->


<h3 id="pi">PI ( -- f )
<br>

<br>
</h3>
  Returns the value of Pi.
<!-- HTML_TOPICEND -->


<h3 id="inf">INF ( -- f )
<br>

<br>
</h3>
  Returns the value of an Infinite result.  Most functions will not
accept this value as a legal input.
<p>Also see:
    <a href="#epsilon">EPSILON</a> and
    <a href="#float">FLOAT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="epsilon">EPSILON ( -- flt:epsilon )
<br>

<br>
</h3>
  Returns the smallest number such that 1.0 + Epsilon is distinct from 1.0
in the internal representation for floating point numbers.  This is the
precision error.  This is useful when comparing that two numbers are equal
to within the precision of the system.  ie:
<pre>
    float1 @ float2 @ - fabs epsilon &lt; if &quot;Equivalent&quot; then
</pre>

<p>
  When you are working with numbers that have exponent parts that may not be
near e+00, you should do a relative comparison instead:
<pre>
    float1 @ float2 @ - float1 @ / fabs epsilon &lt; if &quot;Equivalent&quot; then
</pre>
<p>Also see:
    <a href="#inf">INF</a>,
    <a href="#float">FLOAT</a>,
    <a href="#fabs">FABS</a>,
    <a href="#-">-</a>,
    <a href="#/">/</a>,
    <a href="#@">@</a>,
    <a href="#&lt;">&lt;</a>,
    <a href="#if">IF</a> and
    <a href="#then">THEN</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="ftostr">FTOSTR ( f -- s )
<br>

<br>
</h3>
  Converts a floating point number into a string.  Trailing zeros are not
removed from the end of the number, when no mantissa is shown.  FTOSTR can
return either the xxx.yyy form or the x.yyyEzz form of a float, depending
on which would give the shortest string length.
<p>Also see:
    <a href="#fmtstring">FMTSTRING</a> and
    <a href="#ftostrc">FTOSTRC</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="ftostrc">FTOSTRC ( f -- s )
<br>

<br>
</h3>
  Converts a floating point number into a string.  Trailing zeros are removed
from the initial decimal, if no mantissa is shown.  FTOSTRC can return either
the xxx.yyy form or the x.yyyEzz form of a float, depending on which would
give the shortest string length.
<p>Also see:
    <a href="#fmtstring">FMTSTRING</a> and
    <a href="#ftostr">FTOSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="strtof">STRTOF ( s - f )
<br>

<br>
</h3>
  Converts a string into a floating point type.
STRTOF recognizes most standard forms of floating point representation,
including the xxx.yyy and x.yyyEzz forms.
<!-- HTML_TOPICEND -->


<h3 id="fabs">FABS ( f -- f )
<br>

<br>
</h3>
  Returns the absolute value of the float f.
<!-- HTML_TOPICEND -->


<h3 id="ceil">CEIL ( f - f )
<br>

<br>
</h3>
  Returns the next highest integer, as a floating point type.
<p>Also see:
    <a href="#round">ROUND</a> and
    <a href="#floor">FLOOR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="floor">FLOOR ( f -- f )
<br>

<br>
</h3>
  Returns the next lowest integer number, as a floating point type.
<p>Also see:
    <a href="#round">ROUND</a> and
    <a href="#ciel">CIEL</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="round">ROUND ( f i -- f )
<br>

<br>
</h3>
  Rounds the floating point number to the precision requested, given as the
number of places to the right of the decimal point.  ie: '1.111 1 round'
would leave '1.1' on the stack, while '1.111 0 round' would leave '1.0'.
Negative i values denote places to the left of the decimal place.  ie:
'1234.56 -2 round' would return '1200.0' on the stack.
<p>Also see:
    <a href="#floor">FLOOR</a> and
    <a href="#ciel">CIEL</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="fmod">FMOD ( f1 f2 -- f )
<br>

<br>
</h3>
  Returns the floating point remainder of f1 divided by f2.  (f1/f2)
<!-- HTML_TOPICEND -->


<h3 id="modf">MODF ( f -- fi ff )
<br>

<br>
</h3>
  The modf primitive breaks f into an integral part and a fractional part,
each of which has the same sign as f.  Both returned values are floats.
fi is the integral part, while ff is the fractional part.
<!-- HTML_TOPICEND -->


<h3 id="sqrt">SQRT ( f -- f )
<br>

<br>
</h3>
  Returns a float's square root.  Expects a value greater than or equal
to zero.
<!-- HTML_TOPICEND -->


<h3 id="cos">COS ( f -- f )
<br>

<br>
</h3>
  Returns the cosine of a float.  Only operates in the range of -Pi/4 to Pi/4.
<!-- HTML_TOPICEND -->


<h3 id="acos">ACOS ( f -- f )
<br>

<br>
</h3>
  Returns the inverse cosine of a float.  Only operates within the range
from 0 to Pi.
<!-- HTML_TOPICEND -->


<h3 id="sin">SIN ( f -- f )
<br>

<br>
</h3>
  Returns the sine of a float.  Only operates within the range of -Pi/4
to Pi/4.
<!-- HTML_TOPICEND -->


<h3 id="asin">ASIN ( f -- f )
<br>

<br>
</h3>
  Returns the inverse sine of a float.  Only operates within the range
from -Pi/2 to Pi/2.
<!-- HTML_TOPICEND -->


<h3 id="tan">TAN ( f -- f )
<br>

<br>
</h3>
  Returns the tangent of a float.  Only operates within the range of
K*pi + pi/2 (for some K).
<!-- HTML_TOPICEND -->


<h3 id="atan">ATAN ( f -- f )
<br>

<br>
</h3>
  Returns the inverse tangent of a float.  Only operates within the range
from -Pi/2 to Pi/2.
<!-- HTML_TOPICEND -->


<h3 id="atan2">ATAN2 ( fy fx -- f )
<br>

<br>
</h3>
  Returns the inverse tangent of (fy / fx), taking into account the signs
of both values, and avoiding problems with DIVBY0.  This is useful to
get an angle from X-Y coordinates.
<!-- HTML_TOPICEND -->


<h3 id="log">LOG ( f -- f )
<br>

<br>
</h3>
  Returns the natural log of float f.  Requires a value greater than zero.
Very small values will return INF.
<!-- HTML_TOPICEND -->


<h3 id="exp">EXP ( f -- f )
<br>

<br>
</h3>
  Returns the value of e raised to the power of the passed float.
<!-- HTML_TOPICEND -->


<h3 id="log10">LOG10 ( f -- f )
<br>

<br>
</h3>
  Returns the log base 10 of float f.  Requires a value greater than zero.
Very small values will return INF.
<!-- HTML_TOPICEND -->


<h3 id="pow">POW ( f1 f2 -- f )
<br>
^ ( f1 f2 -- f )
<br>

<br>
</h3>
  Returns f1 to the power of f2.  If f1 is zero, f2 must be greater than
zero.  If f1 is less than zero, f2 must be an integer value.
<!-- HTML_TOPICEND -->


<h3 id="diff3">DIFF3 ( fx1 fy1 fz1 fx2 fy2 fz2 -- fx' fy' fz' )
<br>

<br>
</h3>
  Returns three floats, being the differences of fx1 - fx2, fy1 - fy2, and
fz1 - fz2, respectively.
<!-- HTML_TOPICEND -->


<h3 id="dist3d">DIST3D ( fx fy fz -- f )
<br>

<br>
</h3>
  Returns the distance of the XYZ coordinate (fx,fy,fz) from the origin.
To do a 2D distance calculation, simply use a Z value (fz) of 0.
<!-- HTML_TOPICEND -->


<h3 id="xyz_to_polar">XYZ_TO_POLAR ( fx fy fz -- fr ft fp )
<br>

<br>
</h3>
  Converts the XYZ coordinate (fx, fy, fz) to the spherical polar coordinate
(fr, ft, fp).  fr is the radius, ft is theta (the plane angle), and fp is phi
(the elevation angle)  To do 2D X-Y to radius and angle conversion, simply use
a Z coordinate (fz) of 0, and discard phi (fp).
<p>Also see:
    <a href="#polar_to_xyz">POLAR_TO_XYZ</a>,
    <a href="#dist3d">DIST3D</a>,
    <a href="#sin">SIN</a>,
    <a href="#cos">COS</a> and
    <a href="#tan">TAN</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="polar_to_xyz">POLAR_TO_XYZ ( fr ft fp -- fx fy fz )
<br>

<br>
</h3>
  Converts the spherical polar coordinate (fr, ft, fp) to the XYZ coordinate
(fx, fy, fz).  fr is the radius, ft is theta (the plane angle), and fp is phi
(the elevation angle)  To do 2D radius and angle to X-Y conversion, simply use
a phi angle (fp) of 0, and discard Z (fz).
<p>Also see:
    <a href="#xyz_to_polar">XYZ_TO_POLAR</a>,
    <a href="#dist3d">DIST3D</a>,
    <a href="#sin">SIN</a>,
    <a href="#cos">COS</a>,
    <a href="#tan">TAN</a> and
    <a href="#atan2">ATAN2</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="frand">FRAND ( -- f )
<br>

<br>
</h3>
  Returns a random floating point number between 0 and 1.
<!-- HTML_TOPICEND -->


<h3 id="gaussian">GAUSSIAN ( fs fm -- f )
<br>

<br>
</h3>
  Given the standard deviation, and the mean, return a floating point random
number with the given normalization.  Note that this may be any value between
-INF and INF.
<!-- HTML_TOPICEND -->


<h3 id="clear">CLEAR ( -- )
<br>

<br>
</h3>
  Clears all error flags for floating point math operations.
<p>Also see:
    <a href="#error?.">ERROR?.</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="clear_error">CLEAR_ERROR ( s|i -- i )
<br>

<br>
</h3>
  Clears a specific error flag for floating point math operations.
<p>Also see:
    <a href="#error?.">ERROR?.</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="error?">ERROR? ( -- i )
<br>

<br>
</h3>
  Returns true if any of the floating point error flags have been set.  In
most cases, an error condition in a math operation will return a zero value
(except in the case of integer math, which will wrap around on an overflow
or underflow condition).  It is possible to poll for error conditions after
every math operation, or when a '0' result is found.
The following is a list of the current Error Flags:
<pre>
    DIV_ZERO  - (0) Division by zero attempted.
    NAN       - (1) Result was not a number.
    IMAGINARY - (2) Result would be imaginary. 
    FBOUNDS   - (3) Floating-point inputs were out of range.
    IBOUNDS   - (4) Calculation resulted in an integer overflow or underflow.
</pre>
<!-- HTML_TOPICEND -->


<h3 id="error_bit">ERROR_BIT ( s -- i )
<br>

<br>
</h3>
  Returns the bit identifier for a given floating point error flag string name.
<p>Also see:
    <a href="#error?.">ERROR?.</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="error_name">ERROR_NAME ( i -- s )
<br>

<br>
</h3>
  Returns the string name for the error flag, given a floating point error
identifier.
<p>Also see:
    <a href="#error?.">ERROR?.</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="error_num">ERROR_NUM ( -- i )
<br>

<br>
</h3>
  Returns the total number of floating point error flag types.
<p>Also see:
    <a href="#error?.">ERROR?.</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="error_str">ERROR_STR ( s|i -- s )
<br>

<br>
</h3>
  Returns a user-readable error string, given a floating point error identifier.
<p>Also see:
    <a href="#error?.">ERROR?.</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="is_set?">IS_SET? ( s|i - i )
<br>

<br>
</h3>
  Checks if a specific floating point error flag is set.
<p>Also see:
    <a href="#error?">ERROR?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="set_error">SET_ERROR ( s|i -- i )
<br>

<br>
</h3>
  Sets the specified error flag for floating point operations.
<p>Also see:
    <a href="#error?">ERROR?</a>
</p>
<!-- HTML_TOPICEND -->



<h2 id="StringOps">String Manipulation Operators</h2>
<ul>
    <li><a href="#ansi_midstr">ansi_midstr</a></li>
    <li><a href="#ansi_strcut">ansi_strcut</a></li>
    <li><a href="#ansi_strip">ansi_strip</a></li>
    <li><a href="#ansi_strlen">ansi_strlen</a></li>
    <li><a href="#array_fmtstrings">array_fmtstrings</a></li>
    <li><a href="#atoi">atoi</a></li>
    <li><a href="#ctoi">ctoi</a></li>
    <li><a href="#explode">explode</a></li>
    <li><a href="#explode_array">explode_array</a></li>
    <li><a href="#ext-name-ok?">ext-name-ok?</a></li>
    <li><a href="#fmtstring">fmtstring</a></li>
    <li><a href="#instr">instr</a></li>
    <li><a href="#instring">instring</a></li>
    <li><a href="#intostr">intostr</a></li>
    <li><a href="#itoc">itoc</a></li>
    <li><a href="#md5hash">md5hash</a></li>
    <li><a href="#midstr">midstr</a></li>
    <li><a href="#name-ok?">name-ok?</a></li>
    <li><a href="#number?">number?</a></li>
    <li><a href="#pname-ok?">pname-ok?</a></li>
    <li><a href="#pose-separator?">pose-separator?</a></li>
    <li><a href="#pronoun_sub">pronoun_sub</a></li>
    <li><a href="#regexp">regexp</a></li>
    <li><a href="#regsplit">regsplit</a></li>
    <li><a href="#regsplit_noempty">regsplit_noempty</a></li>
    <li><a href="#regsub">regsub</a></li>
    <li><a href="#rinstr">rinstr</a></li>
    <li><a href="#rinstring">rinstring</a></li>
    <li><a href="#rsplit">rsplit</a></li>
    <li><a href="#sha1hash">sha1hash</a></li>
    <li><a href="#smatch">smatch</a></li>
    <li><a href="#split">split</a></li>
    <li><a href="#stod">stod</a></li>
    <li><a href="#strcat">strcat</a></li>
    <li><a href="#strcmp">strcmp</a></li>
    <li><a href="#strcut">strcut</a></li>
    <li><a href="#strdecrypt">strdecrypt</a></li>
    <li><a href="#strencrypt">strencrypt</a></li>
    <li><a href="#stringcmp">stringcmp</a></li>
    <li><a href="#stringpfx">stringpfx</a></li>
    <li><a href="#strip">strip</a></li>
    <li><a href="#striplead">striplead</a></li>
    <li><a href="#striptail">striptail</a></li>
    <li><a href="#strlen">strlen</a></li>
    <li><a href="#strncmp">strncmp</a></li>
    <li><a href="#subst">subst</a></li>
    <li><a href="#textattr">textattr</a></li>
    <li><a href="#tokensplit">tokensplit</a></li>
    <li><a href="#tolower">tolower</a></li>
    <li><a href="#toupper">toupper</a></li>
</ul>



<h3 id="atoi">ATOI ( s -- i )
<br>

<br>
</h3>
  Turns string s into integer i.  If s is not a string, then 0 is pushed
onto the stack.
<!-- HTML_TOPICEND -->


<h3 id="ctoi">CTOI ( s -- i )
<br>

<br>
</h3>
  Converts the first character in s into its ASCII equivilent.
<p>Also see:
    <a href="#itoc.">ITOC.</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="strlen">STRLEN ( s -- i )
<br>

<br>
</h3>
  Returns the length of string s.
<!-- HTML_TOPICEND -->


<h3 id="strcat">STRCAT ( s1 s2 -- s )
<br>

<br>
</h3>
  Concatenates two strings s1 and s2 and pushes the result s = s1s2
onto the stack.
<!-- HTML_TOPICEND -->


<h3 id="strcmp">STRCMP ( s1 s2 -- i )
<br>

<br>
</h3>
  Compares strings s1 and s2. Returns i as 0 if they are equal,
otherwise returns i as the difference between the first non-matching
character in the strings.  For example, &quot;z&quot; &quot;a&quot; strcmp returns 25.
The reason it returns a 0 for a match, and the difference on a non-match,
is to allow for nice things like string sorting functions.
This primitive is case sensitive, unlike stringcmp.
<p>Also see:
    <a href="#strncmp">STRNCMP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="strncmp">STRNCMP ( s1 s2 i -- i' )
<br>

<br>
</h3>
  Compares the first i characters in strings s1 and s2.
Return value is like strcmp.
<p>Also see:
    <a href="#stringcmp">STRINGCMP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="stringcmp">STRINGCMP ( s1 s2 -- i )
<br>

<br>
</h3>
  Compares strings s1 and s2. Returns i as 0 if they are equal,
otherwise returns i as the difference between the first non-matching
character in the strings.  For example, &quot;z&quot; &quot;a&quot; stringcmp returns 25.
This function is not case sensitive, unlike strcmp.
<p>Also see:
    <a href="#strncmp">STRNCMP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="stringpfx">STRINGPFX (s s2 -- i)
<br>

<br>
</h3>
  Returns 1 if string s2 is a prefix of string s.  If s2 is NOT a prefix
of s, then it returns 0.  Case insensitive.
<!-- HTML_TOPICEND -->


<h3 id="instr">INSTR ( s s1 -- i )
<br>

<br>
</h3>
  Returns the first occurrence of string s1 in string s, or 0 if s1 is
not found.
<p>Also see:
    <a href="#rinstr">RINSTR</a> and
    <a href="#instring">INSTRING</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="rinstr">RINSTR ( s s1 -- i )
<br>

<br>
</h3>
  Returns the last occurrence of string s1 in string s, or 0 if s1 is
not found.  '&quot;abcbcba&quot; &quot;bc&quot; rinstr' returns 4.
<p>Also see:
    <a href="#instr">INSTR</a> and
    <a href="#rinstring">RINSTRING</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="strcut">STRCUT ( s i -- s1 s2 )
<br>

<br>
</h3>
  Cuts string s after its i'th character.  For example,
<pre>
  &quot;Foobar&quot; 3 strcut
</pre>
returns
<pre>
  &quot;Foo&quot; &quot;bar&quot;
</pre>
<p>
  If i is zero or greater than the length of s, returns a null string in
the first or second position, respectively.
<!-- HTML_TOPICEND -->


<h3 id="midstr">MIDSTR ( s i1 i2 -- s )
<br>

<br>
</h3>
  Returns the substring of i2 characters, starting with character i1.
i1 and i2 must both be positive.  The first character of the string
is considered position 1.  ie:
<p>
    &quot;testing&quot; 2 3 midstr
will return the value &quot;est&quot;.
<!-- HTML_TOPICEND -->


<h3 id="split">SPLIT ( s1 s2 -- s1' s2' )
<br>

<br>
</h3>
  Splits string s1 at the first found instance of s2.  If there are no
matches of s2 in s1, will return s1 and a null string.
<p>Also see:
    <a href="#rsplit">RSPLIT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="rsplit">RSPLIT ( s1 s2 -- s1' s2' )
<br>

<br>
</h3>
  Splits a string, as SPLIT, but splits on the last occurence of s2.
<p>Also see:
    <a href="#split">SPLIT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="explode">EXPLODE ( s1 s2 -- ... i )
<br>

<br>
</h3>
  s2 is the delimiter string, and s1 is the target string, which will be
fragmented, with i pushed on top of the stack as the number of strings
s1 was broken into.  For instance:
<pre>
    &quot;Hello world&quot; &quot; &quot; explode
</pre>
will result in
<pre>
    &quot;world&quot; &quot;Hello&quot; 2
</pre>
on the stack.  (Note that if you read these items off in order, they
will come out &quot;Hello&quot; first, then &quot;world&quot;.)  For TinyMUCK 2.2, s2 may
be any length.  But &quot;&quot; (null string) is not an acceptable string for
parameter s2.
<p>Also see:
    <a href="#explode_array">EXPLODE_ARRAY</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="explode_array">EXPLODE_ARRAY ( s1 s2 -- a )
<br>

<br>
</h3>
  s2 is the delimiter string, and s1 is the target string.  s1 will be split
up at each place where s2 is found in s1, and all the parts will be returned
in a list array.  For instance:
<pre>
    &quot;alpha, beta, gamma&quot;  &quot;, &quot;  explode_array
</pre>
will result in a list array that is identical to:
<pre>
    { &quot;alpha&quot; &quot;beta&quot; &quot;gamma&quot; }list
</pre>
s2 cannot be a null string, but it can be of any non-zero length.  When s2
is more than one character long, the delimiter is considered to be the
entire s2 string.  The delimiters are removed from the results.
<p>Also see:
    <a href="#explode">EXPLODE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="subst">SUBST ( s1 s2 s3 -- s )
<br>

<br>
</h3>
  s1 is the string to operate on, s2 is the string to change all occurrences
of s3 into, and s is resultant string.  For example:
<pre>
    &quot;HEY_YOU_THIS_IS&quot; &quot; &quot; &quot;_&quot; subst
</pre>
results in
<pre>
    &quot;HEY YOU THIS IS&quot;
</pre>
s2 and s3 may be of any length.
<!-- HTML_TOPICEND -->


<h3 id="fmtstring">FMTSTRING ( ?n..?1 s -- s )
<br>

<br>
</h3>
  Allows for string formatting with format substitutions, as per C's printf.
FMTSTRING can be used to format complicated and long strings, as well as
multi-lined (with embedded new-lines) strings.  These strings can consist
entirely of user-specified text, formatted variable entries (as values taken
from the stack) or a combination of both.

<p>
  The first format substitution in the format string will use the topmost
stack value.  The next format substitution will use the next item down
the stack, and so on.

<p>
  The start of a format substitution in the string is noted by a '%'.  If a
literal '%' is needed in the string, a '%%' may be used.  The format of a
substitution is as follows: '%[-,|][+, ][0][number][.number]type'
Where 'number' is an integer value, and 'type' is one of the following
identifiers:
<pre>
    i - integer argument
    s - string argument
    d - dbref number, in the form of #123
    D - dbref name reference; given a dbref, will print the associated
        name for that object - terminates on bad reference
    l - pretty-lock, given a lock, will print the description
    f - float in xxx.yyy form
    e - float in x.yyEzz form
    g - shorter of forms e or f
    ~ - default representation of any stack type
    ? - unknown type argument, will print a string stating what the
        variable type is
</pre>

<p>
  A '-' at the start of a format substitution indicates the field will be left
justified.  A '|' at the start indicated the field will be centered.  A '+'
forces the + sign to appear for positive numbers.  A space forces a blank
in front of positive numbers.  (This is the default.)  A leading 0 will
force the field to be padded on the left with 0's instead of spaces.  If you
use a '*' in place of either the width or precision format fields, then
that integer number will be obtained from the stack.  You may specify a
negative fieldwidth to obtain left justification of that field.  You may
not specify a negative precision.
<p>Also see:
    <a href="#array_fmtstrings">ARRAY_FMTSTRINGS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="array_fmtstrings">ARRAY_FMTSTRINGS ( list:dicts str:format -- list:results )
<br>

<br>
</h3>
  Lets you apply a format string, a la FMTSTRING, to each of a list of
dictionaries of input data, returning a list of strings, one for each
input dictionary.

<p>
  Unlike FMTSTRING, the format string needs to have key markers to
specify which key of each input dictionary to use to get the data for
each format field.  You specify the key markers in each format
subsititution by adding a '[KEY]' before the substitution type letter.
For example, the code:

<pre>
    {
        {
            &quot;username&quot; &quot;Johnny&quot;
            &quot;count&quot; 4
            &quot;object&quot; #18
            4  pi
        }dict
        {
            &quot;username&quot; &quot;Ghaladahsk_Fadja&quot;
            &quot;count&quot; 123
            &quot;object&quot; #97
        }dict
    }list
    &quot;%-16.15[username]s %3[count]i %5[object]d %4.2[4]g&quot;
    array_fmtstrings
    { me @ }list array_notify
</pre>

... would show the following output to the user:

<pre>
    Johnny             4   #18 3.14
    Ghaladahsk_Fadj  123   #97 0.00
</pre>

<p>
  Note that if a key does not exist in an input dictionary, then that
format field will be assumed to either be the appropriate false value for
for the format type.

<p>
  Numeric keys can be referred to as well as string keys.  This also
means that you may use a list of list arrays as input, instead of a
list of dictionaries.

<p>
  See FMTSTRING for a full description of normal substitution format codes.
Note that unlike FMTSTRING, the format strings cannot use calculated
field widths or precisions via '*'.

<p>
  Hint: If you want to use this format method on a single dictionary, you
can do something like:

<pre>
    pid getpidinfo   (to give us a dictionary of data.)
    1 array_make     (to make a list with that as its single entry)
    &quot;%-40[player]D %6[pid]i %[called_prog]D&quot; 
    array_fmtstrings
    0 []             (to get the formatted result string.)
</pre>
<p>Also see:
    <a href="#fmtstring">FMTSTRING</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="pronoun_sub">PRONOUN_SUB ( d s -- s' )
<br>

<br>
</h3>
  Takes database object d and substitutes string s according to o-message
rules.  For example:
<pre>
  me @ &quot;%N has lost %p marbles.&quot; pronoun_sub
</pre>
would return:
<pre>
  &quot;Igor has lost his marbles.&quot;
</pre>
if the player's name was Igor and his sex were male.
d does not have to be a player for the substitutions to work.
<p>
  
The substitutions are:
<pre>
    %a/%A for absolute possessive (his/hers/its, His/Hers/Its)
    %s/%S for subjective pronouns (he/she/it, He/She/It)
    %o/%O for objective pronouns (him/her/it, Him/Her/It)
    %p/%P for possessive pronouns (his/her/its, His/Her/Its)
    %r/%R for reflexive pronouns (himself/herself/itself,
                                  Himself/Herself/Itself)
    %n/%N for the player's name.
</pre>
<p>
  
<p>
  if it comes across a %X substitution, where X is any character not listed
in the above substitutions table, it will search down the environment tree
from d to try to find the appropriate %X property for use in substitution.
<!-- HTML_TOPICEND -->


<h3 id="textattr">TEXTATTR ( s1 s2 -- s )
<br>

<br>
</h3>
  Takes a plain text string s1 and adds the neccesary codes to make the
output s display with the given attributes s2, when shown with an
appropriate client.  The attributes are passed to TEXTATTR in s2 as a
series of comma separated attribute names.

These are the attributes currently recognized:
<pre>
    reset bold dim italic uline flash reverse overstrike
    black red green yellow blue magenta cyan white
    bg_black bg_red bg_green bg_yellow bg_blue bg_magenta bg_cyan bg_white
</pre>
<!-- HTML_TOPICEND -->


<h3 id="stod">STOD ( s -- d )
<br>

<br>
</h3>
  Attempts to extract a dbref from s, recognizing both plain numerical
strings, and those prepended with a '#' sign.
<!-- HTML_TOPICEND -->


<h3 id="ansi_strip">ANSI_STRIP ( s -- s' )
<br>

<br>
</h3>
  Takes a string and removes ansi escapes from with in the string, returning
the de-ansified string.
<!-- HTML_TOPICEND -->


<h3 id="ansi_strlen">ANSI_STRLEN ( s -- i )
<br>

<br>
</h3>
  Returns the length of string s ignoring ansi escape within the string.
<!-- HTML_TOPICEND -->


<h3 id="ansi_strcut">ANSI_STRCUT ( s i -- s1 s2 )
<br>

<br>
</h3>
  Like STRCUT, but ignores ansi escapes when finding the location to divide
the string at.
<!-- HTML_TOPICEND -->


<h3 id="ansi_midstr">ANSI_MIDSTR ( s i i -- s' )
<br>

<br>
</h3>
  Does exactly what MIDSTR does, except it ignores ansi escapes when
determining what section of the string to extract.
<!-- HTML_TOPICEND -->


<h3 id="number?">NUMBER? ( s -- i )
<br>

<br>
</h3>
  Returns 1 if string on top of the stack contains a number. Otherwise
returns 0.
<!-- HTML_TOPICEND -->


<h3 id="pose-separator?">POSE-SEPARATOR? ( s -- i )
<br>

<br>
</h3>
  Returns 1 if the argument could be used as a pose without requiring a space.
Otherwise returns 0.
<!-- HTML_TOPICEND -->


<h3 id="intostr">INTOSTR ( x -- s )
<br>

<br>
</h3>
  x must be an integer or a dbref. Converts x into string s.
<!-- HTML_TOPICEND -->


<h3 id="itoc">ITOC ( i -- s )
<br>

<br>
</h3>
  Converts an integer i to its ASCII equivilent character, or a null
if i is not a valid display character.
<p>Also see:
    <a href="#ctoi">CTOI</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="strencrypt">STRENCRYPT ( s1 s2 -- s3 )
<br>

<br>
</h3>
  Takes the plaintext string s1, and encrypts it, using the key s2,
returning the encrypted string s3.  Note: s3 will be 2 characters longer
than s1.  Also Note: The longer your key string is, the more secure
the data will be, up to the length of the data itself.  The encryption
technique used here is pretty simple, so I highly doubt it breaks
any laws to take it outside the USA.  By the same token, it probably
shouldn't be trusted with any really important data.  I'm not an expert
at cryptography, so this ain't DES.
<p>Also see:
    <a href="#strdecrypt">STRDECRYPT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="strdecrypt">STRDECRYPT ( s1 s2 -- s3 )
<br>

<br>
</h3>
  Takes the encrypted string s1, and decrypts it, using the key s2, returning
the plaintext string s3.
<p>Also see:
    <a href="#strencrypt">STRENCRYPT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="md5hash">MD5HASH ( s -- s' )
<br>

<br>
</h3>
  Calculates the MD5 hash of the given string.
<p>Also see:
    <a href="#sha1hash">SHA1HASH</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="sha1hash">SHA1HASH ( s -- s' )
<br>

<br>
</h3>
  Calculates the SHA1 hash of the given string.
<p>Also see:
    <a href="#md5hash">MD5HASH</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="toupper">TOUPPER (s -- s)
<br>

<br>
</h3>
  Takes a string and returns it with all the letters in uppercase.
<!-- HTML_TOPICEND -->


<h3 id="tolower">TOLOWER (s -- s)
<br>

<br>
</h3>
  Takes a string and returns it with all the letters in lowercase.
<!-- HTML_TOPICEND -->


<h3 id="striplead">STRIPLEAD (s -- s)
<br>

<br>
</h3>
  Strips leading spaces from the given string.
<!-- HTML_TOPICEND -->


<h3 id="striptail">STRIPTAIL (s -- s)
<br>

<br>
</h3>
  Strips trailing spaces from the given string.
<!-- HTML_TOPICEND -->


<h3 id="strip">STRIP (s -- s)
<br>

<br>
</h3>
  This is a built in $define.  It is interpreted as &quot;striplead striptail&quot;
It strips the spaces from both ends of a string.
<!-- HTML_TOPICEND -->


<h3 id="smatch">SMATCH ( s s2 -- i )
<br>

<br>
</h3>
  Takes a string s, and a string pattern, s2, to check against.  Returns true
if the string fits the pattern.  This is case insensitive.  In the pattern
string, the following special characters will do as follows:

<pre>
  *  A '?' matches any single character.
  
  *  A '*' matches any number of any characters.
  
  *  '{word1|word2|etc}' will match a single word, if it is one of those
        given, separated by | characters, between the {}s.  A word ends with
        a space or at the end of the string.  The given example would match
        either the words &quot;word1&quot;, &quot;word2&quot;, or &quot;etc&quot;.
        {} word patterns will only match complete words: &quot;{foo}*&quot; and &quot;{foo}p&quot;
        do not match &quot;foop&quot; and &quot;*{foo}&quot; and &quot;p{foo}&quot; do not match &quot;pfoo&quot;.
        {} word patterns can be easily meaningless; they will match nothing
        if they:
          (a) contains spaces,
          (b) do not follow a wildcard, space or beginning of string,
          (c) are not followed by a wildcard, space or end of string.
  
  *  If the first char of a {} word set is a '^', then it will match a single
        word if it is NOT one of those contained within the {}s.  Example:
        '{^Foxen|Fiera}' will match any single word EXCEPT for Foxen or Fiera.
  
  *  '[aeiou]' will match a single character as long as it is one of those
        contained between the []s.  In this case, it matches any vowel.
  
  *  If the first char of a [] char set is a '^', then it will match a single
        character if it is NOT one of those contained within the []s.  Example:
        '[^aeiou]' will match any single character EXCEPT for a vowel.
  
  *  If a [] char set contains two characters separated by a '-', then it will
        match any single character that is between those two given characters.
        Example:  '[a-z0-9_]' would match any single character between 'a' and
        'z', inclusive, any character between '0' and '9', inclusive, or a '_'.
  
  *  The '\' character will disable the special meaning of the character that
        follows it, matching it literally.
</pre>
<p>
  
Example patterns:
<pre>
    &quot;d*g&quot; matches &quot;dg&quot;, &quot;dog&quot;, &quot;doog&quot;, &quot;dorfg&quot;, etc.
    &quot;d?g&quot; matches &quot;dog&quot;, &quot;dig&quot; and &quot;dug&quot; but not &quot;dg&quot; or &quot;drug&quot;.
    &quot;M[rs].&quot; matches &quot;Mr.&quot; and &quot;Ms.&quot;
    &quot;M[a-z]&quot; matches &quot;Ma&quot;, &quot;Mb&quot;, etc.
    &quot;[^a-z]&quot; matches anything but an alphabetical character.
    &quot;{Moira|Chupchup}*&quot; matches &quot;Moira snores&quot; and &quot;Chupchup arghs.&quot;
    &quot;{Moira|Chupchup}*&quot; does NOT match &quot;Moira' snores&quot;.
    &quot;{Foxen|Lynx|Fier[ao]} *t[iy]ckle*\?&quot;  Will match any string starting
      with 'Foxen', 'Lynx', 'Fiera', or 'Fiero', that contains either 'tickle'
      or 'tyckle' and ends with a '?'.
</pre>
<!-- HTML_TOPICEND -->


<h3 id="instring">INSTRING ( s s1 -- i )
<br>

<br>
</h3>
  Returns the first occurrence of string s1 in string s, or 0 if s1 is
not found. Non-case sensitive.
<p>Also see:
    <a href="#rinstring">RINSTRING</a>,
    <a href="#instr">INSTR</a> and
    <a href="#rinstr">RINSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="rinstring">RINSTRING ( s s1 -- i )
<br>

<br>
</h3>
  Returns the last occurrence of string s1 in string s, or 0 if s1 is
not found. Non-case sensitive.
<p>Also see:
    <a href="#instring">INSTRING</a>,
    <a href="#instr">INSTR</a> and
    <a href="#rinstr">RINSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="name-ok?">NAME-OK? (s -- i)
<br>

<br>
</h3>
  Returns true if the given string would be okay as a general object name.

<p>
  This is deprecated, and internally defined as: &quot;exit&quot; ext-name-ok?
<p>Also see:
    <a href="#ext-name-ok?">EXT-NAME-OK?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="pname-ok?">PNAME-OK? (s -- i)
<br>

<br>
</h3>
  Returns true if the given string would be okay as a player name.

<p>
  This is deprecated, and internally defined as: &quot;player&quot; ext-name-ok?
<p>Also see:
    <a href="#ext-name-ok?">EXT-NAME-OK?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="ext-name-ok?">EXT-NAME-OK? ( str:Name ref:Obj -- int:Ok? )
<br>
EXT-NAME-OK? ( str:Name str:Type -- int:Ok? )
<br>

<br>
</h3>
  Returns true if Name would be a legal name for an object depending on
the object type. If Obj is the object you are going to SETNAME, then
EXT-NAME-OK? will use the naming rules for that type of object.
<pre>
If the object does not exist yet, you may specify a string Type:
        &quot;exit&quot; or &quot;e&quot;              &quot;muf&quot; or &quot;program&quot; or &quot;f&quot;
        &quot;player&quot; or &quot;p&quot;            &quot;thing&quot; or &quot;t&quot;
        &quot;room&quot; or &quot;r&quot;
Type's case is ignored.
</pre>
<!-- HTML_TOPICEND -->


<h3 id="regexp">REGEXP ( str:text str:pattern int:flags -- list:SubMatchVals list:SubMatchIdx )
<br>

<br>
</h3>
  Tests text to see if it matches the given PCRE style regular expression
pattern.  If the test fails, two empty lists are returned.  If the test
succeeded, the first list returned contains, as element 0, the substring
that matched the entire pattern, followed by the captured substrings that
matched the various parenthesized subexpressions of the pattern.  The second
contains, as element 0, a sublist containing the starting position and length
of the substring that matched the entire pattern, followed by similar sublists
for each captured parenthesized subexpression.  These indices are appropriate
for use with the MIDSTR primitive, and consider the first character of the
string to be position 1.

The &quot;flags&quot; argument may be 0, or a combination of the following:

<pre>
    $def REG_ICASE    1   (Case insensitive match)
    $def REG_EXTENDED 4   (Allows PCRE comments, etc.  See PCRE docs.)
</pre>
<!-- HTML_TOPICEND -->


<h3 id="regsub">REGSUB ( str:text str:pattern str:substr int:flags -- str:result )
<br>

<br>
</h3>
  Performs a regular expression substitution using pattern against text,
replacing the match with substr.  substr may contain \digit to specify
a submatch.  Uses PCRE style regular expression syntax.

The &quot;flags&quot; argument may be 0, or a combination of the following:

<pre>
    $def REG_ICASE    1   (Case insensitive match)
    $def REG_ALL      2   (Substitute all matches, rather than just the first)
    $def REG_EXTENDED 4   (Allows PCRE comments, etc.  See PCRE docs.)
</pre>

<p>
  Ie: to replace all words in a string with 'yadda', ignoring case, you would
use the following code:

<pre>
    &quot;[a-z]+&quot; &quot;yadda&quot; REG_ICASE REG_ALL + REGSUB
</pre>
<!-- HTML_TOPICEND -->


<h3 id="regsplit">REGSPLIT ( str:text str:pattern int:flags -- list:result )
<br>

<br>
</h3>
  Splits the text by the given regular expression pattern. Empty pieces will
be returned for consecutive matches.
<p>
 
The &quot;flags&quot; argument may be 0, or a combination of the following:

<pre>
    $def REG_ICASE    1   (Case insensitive match)
    $def REG_EXTENDED 4   (Allows PCRE comments, etc.  See PCRE docs.)
</pre>

<p>Also see:
    <a href="#regsplit_noempty">REGSPLIT_NOEMPTY</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="regsplit_noempty">REGSPLIT_NOEMPTY ( str:text str:pattern int:flags -- list:result )
<br>

<br>
</h3>
  Splits the text by the given regular expression pattern, into non-empty
pieces.
<p>
 
The &quot;flags&quot; argument may be 0, or a combination of the following:

<pre>
    $def REG_ICASE    1   (Case insensitive match)
    $def REG_EXTENDED 4   (Allows PCRE comments, etc.  See PCRE docs.)
</pre>

<p>Also see:
    <a href="#regsplit">REGSPLIT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="tokensplit">TOKENSPLIT (strString strDelim strEscape -- strPre strPost strChar)
<br>

<br>
</h3>
  Searches strString for the first character that matches any character in
strDelim, so long as it is not escaped by the character given in strEscape.  
Returns the unescaped string before the found character, the raw string after
that character, and the character that was found.  For example:
<pre>
    &quot;ab//cd/'efg'hi//jk'lm&quot;   &quot;'&quot;   &quot;/&quot;   TOKENSPLIT
</pre>
returns the values:
<pre>
    &quot;ab/cd'efg&quot;   &quot;hi//jk'lm&quot;   &quot;'&quot;
</pre>
<!-- HTML_TOPICEND -->



<h2 id="LockOps">Lock Manipulation Operators</h2>
<ul>
    <li><a href="#getlockstr">getlockstr</a></li>
    <li><a href="#locked?">locked?</a></li>
    <li><a href="#parselock">parselock</a></li>
    <li><a href="#prettylock">prettylock</a></li>
    <li><a href="#setlockstr">setlockstr</a></li>
    <li><a href="#supplicant">supplicant</a></li>
    <li><a href="#testlock">testlock</a></li>
    <li><a href="#unparselock">unparselock</a></li>
</ul>



<h3 id="locked?">LOCKED? (d d -- i)
<br>

<br>
</h3>
  Takes, in order, the dbref of the player to test the lock against, and
the dbref of object the lock is on.  It tests the lock, running programs
as necessary, and returns a integer of 0 if it is not locked against
them, or 1 if it is.
<!-- HTML_TOPICEND -->


<h3 id="parselock">PARSELOCK (s -- l)
<br>

<br>
</h3>
  Parses a lock string into a lock.  If the parsing failed, then the lock
returned will be a TRUE_BOOLEXP, which is logically false to an 'if' test.
<p>Also see:
    <a href="#unparselock">UNPARSELOCK</a>,
    <a href="#lock?">LOCK?</a>,
    <a href="#prettylock">PRETTYLOCK</a>,
    <a href="#testlock">TESTLOCK</a>,
    <a href="#getlockstr">GETLOCKSTR</a>,
    <a href="#setlockstr">SETLOCKSTR</a> and
    <a href="#locked?">LOCKED?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="unparselock">UNPARSELOCK (l -- s)
<br>

<br>
</h3>
  Unparses a lock into a string fit for program editing.
<p>Also see:
    <a href="#lock?">LOCK?</a>,
    <a href="#parselock">PARSELOCK</a>,
    <a href="#prettylock">PRETTYLOCK</a>,
    <a href="#testlock">TESTLOCK</a>,
    <a href="#getlockstr">GETLOCKSTR</a>,
    <a href="#setlockstr">SETLOCKSTR</a> and
    <a href="#locked?">LOCKED?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="prettylock">PRETTYLOCK (l -- s)
<br>

<br>
</h3>
  Unparses a lock into a string fit for players to see.
<p>Also see:
    <a href="#lock?">LOCK?</a>,
    <a href="#parselock">PARSELOCK</a>,
    <a href="#unparselock">UNPARSELOCK</a>,
    <a href="#testlock">TESTLOCK</a>,
    <a href="#getlockstr">GETLOCKSTR</a>,
    <a href="#setlockstr">SETLOCKSTR</a> and
    <a href="#locked?">LOCKED?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="testlock">TESTLOCK (d l -- i)
<br>

<br>
</h3>
  Tests the player dbref against the given lock.  If the test was successful,
then this returns a 1.  If the test failed, then this returns a 0.
<p>Also see:
    <a href="#lock?">LOCK?</a>,
    <a href="#parselock">PARSELOCK</a>,
    <a href="#unparselock">UNPARSELOCK</a>,
    <a href="#prettylock">PRETTYLOCK</a>,
    <a href="#getlockstr">GETLOCKSTR</a>,
    <a href="#setlockstr">SETLOCKSTR</a> and
    <a href="#locked?">LOCKED?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="setlockstr">SETLOCKSTR (d s -- i)
<br>

<br>
</h3>
  Tries to set the lock on the given object to the lock expression given in
the string.  If it was a success, then it will return a 1, otherwise, if
the lock expression was bad, it returns a 0.  To unlock an object, set its
lock to a null string.
<!-- HTML_TOPICEND -->


<h3 id="getlockstr">GETLOCKSTR ( d -- s )
<br>

<br>
</h3>
  Returns the lock expression for the given object in the form of a string.
Returns &quot;*UNLOCKED*&quot; if the object doesn't have a lock set.
<!-- HTML_TOPICEND -->


<h3 id="supplicant">SUPPLICANT ( -- d )
<br>
</h3>
  If the current program is being executed due to lock evaluation, returns
the object the lock is being tested against. Otherwise, returns #-1.
<!-- HTML_TOPICEND -->



<h2 id="ArrayOps">Array Manipulation Operators</h2>
<ul>
    <li><a href="#array_appenditem">array_appenditem</a></li>
    <li><a href="#array_compare">array_compare</a></li>
    <li><a href="#array_count">array_count</a></li>
    <li><a href="#array_cut">array_cut</a></li>
    <li><a href="#array_default_pinning">array_default_pinning</a></li>
    <li><a href="#array_delitem">array_delitem</a></li>
    <li><a href="#array_delrange">array_delrange</a></li>
    <li><a href="#array_diff">array_diff</a></li>
    <li><a href="#array_excludeval">array_excludeval</a></li>
    <li><a href="#array_explode">array_explode</a></li>
    <li><a href="#array_extract">array_extract</a></li>
    <li><a href="#array_findval">array_findval</a></li>
    <li><a href="#array_first">array_first</a></li>
    <li><a href="#array_getitem">array_getitem</a></li>
    <li><a href="#array_getrange">array_getrange</a></li>
    <li><a href="#array_insertitem">array_insertitem</a></li>
    <li><a href="#array_insertrange">array_insertrange</a></li>
    <li><a href="#array_interpret">array_interpret</a></li>
    <li><a href="#array_intersect">array_intersect</a></li>
    <li><a href="#array_join">array_join</a></li>
    <li><a href="#array_keys">array_keys</a></li>
    <li><a href="#array_last">array_last</a></li>
    <li><a href="#array_make">array_make</a></li>
    <li><a href="#array_make_dict">array_make_dict</a></li>
    <li><a href="#array_matchkey">array_matchkey</a></li>
    <li><a href="#array_matchval">array_matchval</a></li>
    <li><a href="#array_ndiff">array_ndiff</a></li>
    <li><a href="#array_nested_del">array_nested_del</a></li>
    <li><a href="#array_nested_get">array_nested_get</a></li>
    <li><a href="#array_nested_set">array_nested_set</a></li>
    <li><a href="#array_next">array_next</a></li>
    <li><a href="#array_nintersect">array_nintersect</a></li>
    <li><a href="#array_notify">array_notify</a></li>
    <li><a href="#array_notify_secure">array_notify_secure</a></li>
    <li><a href="#array_nunion">array_nunion</a></li>
    <li><a href="#array_pin">array_pin</a></li>
    <li><a href="#array_prev">array_prev</a></li>
    <li><a href="#array_reverse">array_reverse</a></li>
    <li><a href="#array_setitem">array_setitem</a></li>
    <li><a href="#array_setrange">array_setrange</a></li>
    <li><a href="#array_sort">array_sort</a></li>
    <li><a href="#array_sort_indexed">array_sort_indexed</a></li>
    <li><a href="#array_union">array_union</a></li>
    <li><a href="#array_unpin">array_unpin</a></li>
    <li><a href="#array_vals">array_vals</a></li>
    <li><a href="#}cat">}cat</a></li>
    <li><a href="#}dict">}dict</a></li>
    <li><a href="#}join">}join</a></li>
    <li><a href="#}list">}list</a></li>
    <li><a href="#}tell">}tell</a></li>
</ul>



<h3 id="array_make">ARRAY_MAKE ( {?} -- a )
<br>

<br>
</h3>
  Creates a list type array from a stackrange.
<!-- HTML_TOPICEND -->


<h3 id="}list">}LIST  ( marker ?n ... ?1 -- array )
<br>

<br>
</h3>
  Takes all stack items from the top of the stack to the topmost stack
marker and creates a list array from them.  This is actually an inserver
macro, defined to '} array_make'.
<!-- HTML_TOPICEND -->


<h3 id="array_make_dict">ARRAY_MAKE_DICT ( {@ ?} -- a )
<br>

<br>
</h3>
  Creates a dictionary type array from a stackrange of index/value
pairs.
<!-- HTML_TOPICEND -->


<h3 id="}dict">}DICT  ( marker @n ?n ... @1 ?1 -- dictionary )
<br>

<br>
</h3>
  Takes pairs of stack items from the top of the stack to the topmost stack
marker and creates a dictionary array from them.  Each @ item is used as an
index value for the corresponding ? value.  This is actually an inserver
macro, defined to '} 2 / array_make_dict'.  Be careful to make sure that
there are an even number of stack items between the { and the }dict.
<!-- HTML_TOPICEND -->


<h3 id="array_notify">ARRAY_NOTIFY ( a1 a2 -- )
<br>

<br>
</h3>
  Notifies all strings in array a1 to all dbrefs in array a2.  Arrays
must be homogenous of their respective types.
<!-- HTML_TOPICEND -->


<h3 id="array_notify_secure">ARRAY_NOTIFY_SECURE ( a1 a2 a3 -- )
<br>
</h3>
  For every dbref in a3, notify a2 over their secure descriptors and a1 over
their insecure descriptors. Triggers listener prop queues only with a1.
<!-- HTML_TOPICEND -->


<h3 id="}tell">}TELL  ( marker strn ... str1 -- )
<br>

<br>
</h3>
  Takes all stack items from the top of the stack to the topmost stack
marker and notifies them to the 'me @' user.  This will throw an error
if you try to send a non-string.  Each separate string will be send as a
separate line to the user.  This is actually an inserver macro, defined to
'} array_make me @ 1 array_make array_notify'.
<p>Also see:
    <a href="#array_notify">ARRAY_NOTIFY</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="array_join">ARRAY_JOIN ([s] s -- s)
<br>

<br>
</h3>
  Takes a list array and a delimiter string, and returns a single string
that is the concatenation of all the items in the list array, with the
delimiter string in between.  For example:
<pre>
    { &quot;one&quot; 2 &quot;three&quot; 3.14159 }list &quot;... &quot; array_join
</pre>
will result in a single string: &quot;one... 2... three... 3.14159&quot;
<p>Also see:
    <a href="#}join">}JOIN</a>,
    <a href="#array_interpret">ARRAY_INTERPRET</a> and
    <a href="#}cat">}CAT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="array_interpret">ARRAY_INTERPRET ([s] -- s)
<br>

<br>
</h3>
  Takes a list array and and returns a single string that is the concatenation
of all the items in the list array, with dbrefs translated to the name of
their respective objects.  For example:
<pre>
    { #1 &quot; &quot; 2 &quot; three &quot; 3.14159 }list array_join
</pre>
will result in a single string like: &quot;Wizard 2 three 3.14159&quot;
<p>Also see:
    <a href="#array_join">ARRAY_JOIN</a>,
    <a href="#}cat">}CAT</a> and
    <a href="#}join">}JOIN</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="}join">}JOIN  ( marker ?n ... ?1 -- string )
<br>

<br>
</h3>
  Takes all stack items from the top of the stack to the topmost stack
marker and concatenates them into a string based on the default reresentat-
ion of each stack item type.  Dbrefs will be shown as #REF numbers.  This
actually is an inserver macro, defined to '} array_make &quot;&quot; array_join'.
<p>Also see:
    <a href="#array_join">ARRAY_JOIN</a>,
    <a href="#}cat">}CAT</a> and
    <a href="#array_interpret">ARRAY_INTERPRET</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="}cat">}CAT  ( marker ?n ... ?1 -- string )
<br>

<br>
</h3>
  Takes all stack items from the top of the stack to the topmost stack
marker and concatenates them into a string based on the default reresentat-
ion of each stack item type.  Dbrefs will be translated to the name of the
object that they reference.  This primitive is actually an inserver macro,
defined to '} array_make array_interpret'.
<p>Also see:
    <a href="#array_join">ARRAY_JOIN</a>,
    <a href="#}join">}JOIN</a> and
    <a href="#array_interpret">ARRAY_INTERPRET</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="array_count">ARRAY_COUNT ( a -- i )
<br>

<br>
</h3>
  Returns the count of number of items in the array.
<!-- HTML_TOPICEND -->


<h3 id="array_getitem">ARRAY_GETITEM ( a @ -- ? )
<br>

<br>
</h3>
  Returns item with index @ from an array.
<!-- HTML_TOPICEND -->


<h3 id="array_setitem">ARRAY_SETITEM ( ? a @ -- a')
<br>

<br>
</h3>
  Overwrites a given array item at index @ with new value ?.
<!-- HTML_TOPICEND -->


<h3 id="array_insertitem">ARRAY_INSERTITEM ( ? a @ -- a' )
<br>

<br>
</h3>
  Inserts a given value into an array.
<!-- HTML_TOPICEND -->


<h3 id="array_appenditem">ARRAY_APPENDITEM ( ? a -- a')
<br>

<br>
</h3>
  Appends the given item to the given list array.
<!-- HTML_TOPICEND -->


<h3 id="array_delitem">ARRAY_DELITEM ( a @ -- a' )
<br>

<br>
</h3>
  Removes an item with index @ from an array.
<!-- HTML_TOPICEND -->


<h3 id="array_getrange">ARRAY_GETRANGE ( a @ @ -- a' )
<br>

<br>
</h3>
  Returns as an array the range between two indexes (inclusive)
from an array.
<!-- HTML_TOPICEND -->


<h3 id="array_setrange">ARRAY_SETRANGE ( a1 @ a2 -- a' )
<br>

<br>
</h3>
  Sets items in list a1 to vals from list a2, starting at the given
index.  Returns the resulting array.
<!-- HTML_TOPICEND -->


<h3 id="array_insertrange">ARRAY_INSERTRANGE ( a1 @ a2 -- a' )
<br>

<br>
</h3>
  Inserts items from array a2 into a1, starting at the given index.
Returns the resulting array.
<!-- HTML_TOPICEND -->


<h3 id="array_delrange">ARRAY_DELRANGE ( a @ @ -- a' )
<br>

<br>
</h3>
  Deletes a range of items between two indexes (inclusive) from
an array.
<!-- HTML_TOPICEND -->


<h3 id="array_nested_get">ARRAY_NESTED_GET ( a1 a2 -- ? )
<br>

<br>
</h3>
  Takes a nested array a1, and a list of array indexes a2, and recursively
fetches nested sub-array values.  Returns 0 if the item doesn't exist.
Example:
<pre>
    arr1 @ { &quot;foo&quot; 2 &quot;bar&quot; }list array_nested_get
</pre>
is roughly equivalent to
<pre>
    arr1 @ &quot;foo&quot; [] dup if
        2 [] dup if
            &quot;bar&quot; []
        then
    then
</pre>
<!-- HTML_TOPICEND -->


<h3 id="array_nested_set">ARRAY_NESTED_SET ( ? a a2 -- a' )
<br>

<br>
</h3>
  Sets the nested array entry in a, specified by the list of array indexes
in a2, to the given value, creating new sub-arrays if needed.
Example:
<pre>
    { }dict
    &quot;qux&quot; swap { &quot;foo&quot; &quot;bar&quot; &quot;baz&quot; }list array_nested_set
    4 swap { &quot;foo&quot; 2 &quot;clam&quot; }list array_nested_set
</pre>
would return the same array as
<pre>
    {
        &quot;foo&quot; {
            &quot;bar&quot; {
                &quot;baz&quot; &quot;qux&quot;
            }dict
            2 {
                &quot;clam&quot; 4
            }dict
        }dict
    }dict
</pre>
<!-- HTML_TOPICEND -->


<h3 id="array_nested_del">ARRAY_NESTED_DEL ( a a2 -- a' )
<br>

<br>
</h3>
  Deletes the nested array entry in a, specified by the list of array
indexes in a2.  Example:
<pre>
    {
        &quot;foo&quot; {
            &quot;bar&quot; {
                &quot;baz&quot; &quot;qux&quot;
            }dict
            2 {
                &quot;clam&quot; 4
            }dict
        }dict
    }dict
    { &quot;foo&quot; 2 }list array_nested_del
</pre>
would return the same array as
<pre>
    {
        &quot;foo&quot; {
            &quot;bar&quot; {
                &quot;baz&quot; &quot;qux&quot;
            }dict
        }dict
    }dict
</pre>
<!-- HTML_TOPICEND -->


<h3 id="array_extract">ARRAY_EXTRACT (array arrIndexes -- array')
<br>

<br>
</h3>
  Takes an array, and returns a dictionary containing every element of the
original array who's key was in the list indexes given.
<!-- HTML_TOPICEND -->


<h3 id="array_reverse">ARRAY_REVERSE (a -- a')
<br>

<br>
</h3>
  Takes a list array and reverses the order of its elements.
<!-- HTML_TOPICEND -->


<h3 id="array_compare">ARRAY_COMPARE ( a1 a2 -- i )
<br>

<br>
</h3>
  Compares two arrays using the same ordering assumptions as ARRAY_SORT in
case sensitive ascending order mode.  If the two arrays are identical,
this returns 0.  If the first array is considered greater than the second,
this returns a positive value.  If the second array is considered greater,
this returns a negative value.  I'm not sure if the greater/lesser-than
comparison results are really useful, though.
<!-- HTML_TOPICEND -->


<h3 id="array_explode">ARRAY_EXPLODE ( a -- {@ ?} )
<br>

<br>
</h3>
  Explodes an array into a stackrange of its index/value pairs.  Example:
<pre>
    &quot;index0&quot; &quot;value0&quot; &quot;index1&quot; &quot;value1&quot; 2
</pre>
<!-- HTML_TOPICEND -->


<h3 id="array_keys">ARRAY_KEYS ( a -- {@} )
<br>

<br>
</h3>
  Returns the keys of an array in a stackrange.  Example:
<pre>
    &quot;index0&quot; &quot;index1&quot; 2 
</pre>
<!-- HTML_TOPICEND -->


<h3 id="array_vals">ARRAY_VALS ( a -- {?} )
<br>

<br>
</h3>
  Returns the values of an array in a stackrange.  Example:
<pre>
    &quot;value0&quot; &quot;value1&quot; 2
</pre>
<!-- HTML_TOPICEND -->


<h3 id="array_first">ARRAY_FIRST ( a -- @ i )
<br>

<br>
</h3>
  Returns the first index in array, and a boolean which is false
if there are no items are in the array.
<!-- HTML_TOPICEND -->


<h3 id="array_prev">ARRAY_PREV ( a @ -- @ i )
<br>

<br>
</h3>
  Returns the previous index in the array, and a boolean which
is false if there are no items left.
<!-- HTML_TOPICEND -->


<h3 id="array_next">ARRAY_NEXT ( a @ -- @ i )
<br>

<br>
</h3>
  Returns the next index in the array, and a boolean which
is false if there are no items left.
<!-- HTML_TOPICEND -->


<h3 id="array_last">ARRAY_LAST ( a -- @ i )
<br>

<br>
</h3>
  Returns the last index in array, and a boolean which is false
if there are no items are in the array.
<!-- HTML_TOPICEND -->


<h3 id="array_cut">ARRAY_CUT ( a1 @ -- a2 a3 )
<br>

<br>
</h3>
  Given an array, and an index into the array, cuts the array into two
arrays at that position.  The first array output will contain all array
items before the given index.  The second array will contain the given
position and all items after it.  When used on a list array, both output
arrays will be list arrays.  When used on dictionaries, both arrays will
be dictionaries.
<!-- HTML_TOPICEND -->


<h3 id="array_pin">ARRAY_PIN ( arr -- arr' )
<br>

<br>
</h3>
  Given an array or dictionary, pins it such that changes to any dup'ed
copy of that array on the stack will make changes to ALL copies.
<!-- HTML_TOPICEND -->


<h3 id="array_unpin">ARRAY_UNPIN ( arr -- arr' )
<br>

<br>
</h3>
  Given an array or dictionary, unpins it such that changes to any dup'ed
copy of that array on the stack will NOT change any other copy of that array.
<!-- HTML_TOPICEND -->


<h3 id="array_default_pinning">ARRAY_DEFAULT_PINNING ( int -- )
<br>

<br>
</h3>
  Sets whether future arrays/dictionaries created in this process will be
pinned by default.
<!-- HTML_TOPICEND -->


<h3 id="array_sort">ARRAY_SORT (arrData intSortType -- arrSorted)
<br>

<br>
</h3>
  This sorts all the items in the list array given, based on the given
sort type.  This can sort strings, integers, floats, dbrefs, or mixes
of types.  Integers are sorted in with floats, but strings sort after
all numbers.  Dbrefs sort after the other number types, but before
string types.  Other stack item types will sort separately, but in
an undefined consistent order.

<p>
  The SortType argument is an integer, and its default value of 0 means
that the sorting should be case sensitive and in ascending order.  You
can change either of those by using one or more of the following inserver
$defines BITORed or added together:
<pre>
  $def SORTTYPE_CASEINSENS 1   (Sort is to be case insensitive.)
  $def SORTTYPE_DESCENDING 2   (Sort is to be in reversed order.)
  $def SORTTYPE_SHUFFLE    4   (Randomize list completely.)
</pre>

<p>
  The above sort types can be added or bitor'ed together to get the
following inserver $defines as listed below.
<pre>
  $def SORTTYPE_CASE_ASCEND    0 (Case sensitive and ascending order.)
  $def SORTTYPE_NOCASE_ASCEND  SORTTYPE_CASEINSENS
  $def SORTTYPE_CASE_DESCEND   SORTTYPE_DESCENDING
  $def SORTTYPE_NOCASE_DESCEND SORTTYPE_CASEINSENS SORTTYPE_DESCENDING +
</pre>
<!-- HTML_TOPICEND -->


<h3 id="array_sort_indexed">ARRAY_SORT_INDEXED (arrData intSortType idxIndex -- arrSorted)
<br>

<br>
</h3>
  This takes a list array of arrays, and will sort them, based on the
value of an indexed value in each subarray, based on the given sort
type.  For example:
<pre>
    {
        { &quot;name&quot; &quot;One&quot;     &quot;num&quot; 1 }dict
        { &quot;name&quot; &quot;Two&quot;     &quot;num&quot; 2 }dict
        { &quot;name&quot; &quot;Three&quot;   &quot;num&quot; 3 }dict
    }list
    SORTTYPE_DESCENDING &quot;num&quot; ARRAY_SORT_INDEXED
</pre>
...would return an array of dictionaries, sorted in descending order by the
value of their &quot;num&quot; entries.  ie, the same as:
<pre>
    {
        { &quot;name&quot; &quot;Three&quot;   &quot;num&quot; 3 }dict
        { &quot;name&quot; &quot;Two&quot;     &quot;num&quot; 2 }dict
        { &quot;name&quot; &quot;One&quot;     &quot;num&quot; 1 }dict
    }list
</pre>
<p>
  This can be used with an array of list arrays, just like with an array of
dictionaries.  For list arrays, you just use an integer for the index.
NOTE: arrays that don't have an item matching the given index, will be
sorted as lesser than arrays that do.

See ARRAY_SORT for more information on sort ordering.
<p>Also see:
    <a href="#array_sort">ARRAY_SORT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="array_union">ARRAY_UNION ( a1 a2 -- a )
<br>

<br>
</h3>
  Returns a list array containing the union of values of both the given
arrays.  ie: If a value is found in either of the given arrays, then it
will be returned in the result list.  Duplicate values will appear only
once in the returned list.  Keys are discarded.  Ordering is not preserved.
<!-- HTML_TOPICEND -->


<h3 id="array_nunion">ARRAY_NUNION ( {a} -- a )
<br>

<br>
</h3>
  Returns a list array containing the union of values of all the given
arrays in the stackrange.  ie: if a value is found in any of the given
arrays, then it will be returned in the resultant list.  Duplicate values
will appear only once in the returned list.  Keys are discarded.  Ordering
is not preserved.
<!-- HTML_TOPICEND -->


<h3 id="array_diff">ARRAY_DIFF ( a1 a2 -- a )
<br>

<br>
</h3>
  Return an array containing the difference of the two given arrays.
ie: This returns all values of a2 that weren't found in a1.  Duplicate
values will appear only once in the returned list.  Keys will be discarded.
Ordering is not preserved.
<!-- HTML_TOPICEND -->


<h3 id="array_ndiff">ARRAY_NDIFF ( {a} -- a )
<br>

<br>
</h3>
  Return an array containing the difference of all the given arrays
in the stackrange.  ie: This returns all values from the topmost array
that weren't found in any of the remaining arrays.  Multiple arrays are
consecutively processed against the results of the previous difference,
from the top of the stack down.  Duplicate values will appear only once
in the returned list.  Keys will be discarded.  Ordering is not preserved.
<!-- HTML_TOPICEND -->


<h3 id="array_intersect">array_intersect ( a1 a2 -- a )
<br>

<br>
</h3>
  Returns an array containing the intersection of the two arrays.
ie: Only values contained in BOTH the given arrays will be returned.
Duplicate values will appear only once in the returned list.  Keys will
be discarded.  Ordering is not preserved.  This is actually an inserver
macro to '2 array_nintersect'
<!-- HTML_TOPICEND -->


<h3 id="array_nintersect">array_nintersect ( {a} -- a )
<br>

<br>
</h3>
  Returns an array containing the intersection of all the given arrays
in the stackrange.  ie: Only values contained in ALL the given arrays
will be returned.  Multiple arrays are consecutively processed against
the results of the previous intersection, from the top of the stack down.
Duplicate values will appear only once in the returned list.  Keys will
be discarded.  Ordering is not preserved.
<!-- HTML_TOPICEND -->


<h3 id="array_findval">ARRAY_FINDVAL (a1 ? -- a2)
<br>

<br>
</h3>
  Returns a list array containing the keys of every element in the array
a1 whose values match the given value.  For example:

<pre>
    { #5 #10 #15 #10 #20 }list #10 array_findval
</pre>

will return a list containing 1 and 3, being the keys (indexes) of the
matching items.
<!-- HTML_TOPICEND -->


<h3 id="array_excludeval">ARRAY_EXCLUDEVAL (a1 ? -- a2)
<br>

<br>
</h3>
  Returns a list array containing the keys of every element in the array
a1 whose values did NOT match the given value.  For example:
<pre>
    { #5 #10 #15 #10 #20 }list #10 array_excludeval
</pre>
will return a list containing 0, 2 and 4, being the keys (indexes) of the
items that didn't match.  If you want the values, use ARRAY_DIFF or
ARRAY_EXTRACT.  Ie:
<pre>
    { #5 #10 #15 #10 #20 }list { #10 }list array_diff
</pre>
or
<pre>
    { #5 #10 #15 #10 #20 }list dup #10 array_excludeval array_extract
</pre>
which will both return a list containing #5, #15, and #20.  The main
difference between these two methods is that ARRAY_DIFF will remove any
duplicate values in the remaining items, and the ordering of the resulting
items will have been sorted.  Using ARRAY_EXTRACT, ordering and duplicate
values are preserved.
<!-- HTML_TOPICEND -->


<h3 id="array_matchkey">ARRAY_MATCHKEY (arrStrings strPattern - arrStrings)
<br>

<br>
</h3>
  Given an array and an smatch wildcard pattern string, returns a dictionary
containing all the key-value pairs where the key was a string that matched
the given smatch pattern.
<!-- HTML_TOPICEND -->


<h3 id="array_matchval">ARRAY_MATCHVAL (arrStrings strPattern - arrStrings)
<br>

<br>
</h3>
  Given an array and an smatch pattern string, returns a dictionary containing
all the key-value pairs where the value was a string that matched the given
smatch wildcard pattern.
<!-- HTML_TOPICEND -->



<h2 id="PropOps">Property Manipulation Operators</h2>
<ul>
    <li><a href="#addprop">addprop</a></li>
    <li><a href="#array_filter_flags">array_filter_flags</a></li>
    <li><a href="#array_filter_lock">array_filter_lock</a></li>
    <li><a href="#array_filter_prop">array_filter_prop</a></li>
    <li><a href="#array_get_propdirs">array_get_propdirs</a></li>
    <li><a href="#array_get_proplist">array_get_proplist</a></li>
    <li><a href="#array_get_propvals">array_get_propvals</a></li>
    <li><a href="#array_get_reflist">array_get_reflist</a></li>
    <li><a href="#array_put_proplist">array_put_proplist</a></li>
    <li><a href="#array_put_propvals">array_put_propvals</a></li>
    <li><a href="#array_put_reflist">array_put_reflist</a></li>
    <li><a href="#blessed?">blessed?</a></li>
    <li><a href="#blessprop">blessprop</a></li>
    <li><a href="#envprop">envprop</a></li>
    <li><a href="#envpropstr">envpropstr</a></li>
    <li><a href="#getprop">getprop</a></li>
    <li><a href="#getpropfval">getpropfval</a></li>
    <li><a href="#getpropstr">getpropstr</a></li>
    <li><a href="#getpropval">getpropval</a></li>
    <li><a href="#nextprop">nextprop</a></li>
    <li><a href="#parsempi">parsempi</a></li>
    <li><a href="#parsempiblessed">parsempiblessed</a></li>
    <li><a href="#parseprop">parseprop</a></li>
    <li><a href="#parsepropex">parsepropex</a></li>
    <li><a href="#prop-name-ok?">prop-name-ok?</a></li>
    <li><a href="#propdir?">propdir?</a></li>
    <li><a href="#reflist_add">reflist_add</a></li>
    <li><a href="#reflist_del">reflist_del</a></li>
    <li><a href="#reflist_find">reflist_find</a></li>
    <li><a href="#remove_prop">remove_prop</a></li>
    <li><a href="#setprop">setprop</a></li>
    <li><a href="#unblessprop">unblessprop</a></li>
</ul>



<h3 id="getprop">GETPROP (d s -- ?)
<br>

<br>
</h3>
  Gets the value of a given property, and puts it on the stack.
This can return a lock, a string, a dbref, or an integer, depending
on the type of the property.  Permissions are the same as those for
GETPROPSTR.  This primitive returns 0 if no such property exists, or
if it is a valueless propdir.
<p>Also see:
    <a href="#setprop">SETPROP</a>,
    <a href="#addprop">ADDPROP</a>,
    <a href="#remove_prop">REMOVE_PROP</a>,
    <a href="#getpropstr">GETPROPSTR</a>,
    <a href="#getpropval">GETPROPVAL</a>,
    <a href="#int?">INT?</a>,
    <a href="#dbref?">DBREF?</a>,
    <a href="#string?">STRING?</a> and
    <a href="#lock?">LOCK?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="getpropstr">GETPROPSTR ( d s -- s )
<br>

<br>
</h3>
  s must be a string. Retrieves string associated with property s in
object d.  If the property is cleared, &quot;&quot; (null string) is returned.
<!-- HTML_TOPICEND -->


<h3 id="getpropval">GETPROPVAL ( d s -- i )
<br>

<br>
</h3>
  s must be a string. Retrieves the integer value i associated with
property s in object d. If the property is cleared, 0 is returned.
<!-- HTML_TOPICEND -->


<h3 id="getpropfval">GETPROPFVAL ( d s -- f )
<br>

<br>
</h3>
  Returns the float value stored in the property
<!-- HTML_TOPICEND -->


<h3 id="envprop">ENVPROP ( d s -- d ? )
<br>

<br>
</h3>
  Takes a starting object dbref and a property name and searches down the
environment tree from that object for a property with the given name.  If
the property isn't found, it returns #-1 and 0.  If the property is found,
it will return the dbref of the object it was found on, and the value it
contained.
<p>Also see:
    <a href="#envpropstr">ENVPROPSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="envpropstr">ENVPROPSTR (d s -- d s )
<br>

<br>
</h3>
  Takes a starting object dbref and a property name and searches down the
environment tree from that object for a property with the given name.  If
the property isn't found, it returns #-1 and a null string.  If the
property is found, it will return the dbref of the object it was found on,
and the string value it contained.
<p>Also see:
    <a href="#envprop">ENVPROP</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="addprop">ADDPROP ( d s1 s2 i -- )
<br>

<br>
</h3>
  Sets property associated with s1 in object d.  Note that if s2 is
null &quot;&quot;, then i will be used.  Otherwise, s2 is always used.  All four
parameters must be on the stack; none may be omitted.  If the effective
user of the program does not control the object in question and the
property begins with an underscore `_', the property cannot be changed.
The same goes for properties beginning with a dot `.' which cannot be
read without permission. 
<!-- HTML_TOPICEND -->


<h3 id="setprop">SETPROP (d s ? -- )
<br>

<br>
</h3>
  Stores a lock, dbref, integer, or string into the named property on the
given object.  Permissions are the same as for ADDPROP.
<p>Also see:
    <a href="#addprop">ADDPROP</a>,
    <a href="#remove_prop">REMOVE_PROP</a>,
    <a href="#getpropstr">GETPROPSTR</a> and
    <a href="#getpropval">GETPROPVAL</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="remove_prop">REMOVE_PROP ( d s -- )
<br>

<br>
</h3>
  Removes property s from object d.  If the property begins with an
underscore, `_' or a dot `.', and the effective user does not have
permission on that object, the call fails.
<!-- HTML_TOPICEND -->


<h3 id="propdir?">PROPDIR? (d s -- i)
<br>

<br>
</h3>
  Takes a dbref and a property name, and returns a boolean integer that
tells if that property is a propdir that contains other props.
(Requires Mucker Level 2)
<!-- HTML_TOPICEND -->


<h3 id="nextprop">NEXTPROP (d s -- s)
<br>

<br>
</h3>
  This takes a dbref and a string that is the full propdir pathname of a
property and returns the full pathname of the next property in the given
object's given propdir, or returns a null string if that was the last
property in the propdir.  To *start* the search, give it a propdir name
ending in a '/', or a blank string.  For example, '#10 &quot;/&quot; NEXTPROP'
returns the name of the first property in the root propdir of object #10,
and '#28 &quot;/letters/&quot; NEXTPROP' would return the name of the first
property in the 'letters/' propdir on object #28.  A blank string is the
same as &quot;/&quot;.  If you try to do a Nextprop on a non-existant property, you
will have a null string returned to you. Nextprop will skip properties if
they would not be readable by the program with the given permissions and
effective user id. (Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="array_get_reflist">ARRAY_GET_REFLIST ( d s -- a )
<br>

<br>
</h3>
  Reads in list of space delimited dbrefs from a string property, and
returns them as a list array of dbrefs.  See ARRAY_PUT_REFLIST for
property syntax.
<!-- HTML_TOPICEND -->


<h3 id="array_put_reflist">ARRAY_PUT_REFLIST ( d s a -- )
<br>

<br>
</h3>
  Takes a list array of dbrefs, and stores them in a property as a space
delimited string of dbrefs.  ie:  &quot;#1234 #6646 #1026 #7104&quot;
<!-- HTML_TOPICEND -->


<h3 id="reflist_find">REFLIST_FIND ( d1 s1 d2 -- i )
<br>

<br>
</h3>
  Finds dbref d2 in the reflist in property s1 on object d1.  If d2 is
not in the list, then 0 is returned.  Otherwise the position of the
dbref in the list is returned, with the first dbref being in position 1,
the second dbref in 2, etc.
<!-- HTML_TOPICEND -->


<h3 id="reflist_add">REFLIST_ADD ( d1 s1 d2 -- )
<br>

<br>
</h3>
  Adds dbref d2 to the reflist in property s1 on object d1.  If d2 is already
in the list, it is moved to the end of the reflist.
<!-- HTML_TOPICEND -->


<h3 id="reflist_del">REFLIST_DEL ( d1 s1 d2 -- )
<br>

<br>
</h3>
  Removes dbref d2 from the reflist in property s1 on object d1.  If d2 is
not in the list, nothing happens.
<!-- HTML_TOPICEND -->


<h3 id="unblessprop">UNBLESSPROP (dbrefObject strPropname -- )
<br>

<br>
</h3>
  Unblesses the given property for MPI.  Requires Wizbit perms.
<!-- HTML_TOPICEND -->


<h3 id="blessprop">BLESSPROP (dbrefObject strPropname -- )
<br>

<br>
</h3>
  Blesses the given property for MPI.  Requires Wizbit perms.
<!-- HTML_TOPICEND -->


<h3 id="blessed?">BLESSED? (d s -- i)
<br>

<br>
</h3>
  Takes a dbref and a property name, and returns a boolean integer that
tells if that property has been blessed.
(Requires Mucker Level 2)
<!-- HTML_TOPICEND -->


<h3 id="array_filter_prop">ARRAY_FILTER_PROP ([d] s1 s2 -- [d'])
<br>

<br>
</h3>
  Takes a homogenous list array of dbrefs, and returns a list array with only
those dbrefs who have a property specified by s1, set to a value that smatch
matches s2.
<!-- HTML_TOPICEND -->


<h3 id="array_filter_lock">ARRAY_FILTER_LOCK ([d] l -- [d'])
<br>

<br>
</h3>
  Takes a homogenous list array of dbrefs, and returns a list array with only
those players and things who pass the given lock.
<!-- HTML_TOPICEND -->


<h3 id="array_filter_flags">ARRAY_FILTER_FLAGS ( list:dbrefs str:flags -- list:matchingdbrefs )
<br>

<br>
</h3>
  Takes a homogenous list array of dbrefs and a flags test string, and
returns a list array with only those dbrefs whose flags matched the flag
test string.  A flags test string is a list of flag letters or object type
letters to require, and a list of flags to specifically reject preceeded
by exclamation marks (!).  ie: &quot;TD!C!V&quot; would match Things set Dark, which
did not have their Chown_ok or Vehicle flags set.  See 'help @find' for
more info on flag test strings.
<!-- HTML_TOPICEND -->


<h3 id="array_get_propdirs">ARRAY_GET_PROPDIRS( d s -- a )
<br>

<br>
</h3>
  Returns a list array containing the names of all the sub-propdirs
contained within the given propdir.  Any propdirs the program wouldn't
be able to read, are left out.  (ML3 required.)
<!-- HTML_TOPICEND -->


<h3 id="array_get_propvals">ARRAY_GET_PROPVALS ( d s -- a )
<br>

<br>
</h3>
  Reads in properties from a propdir, and returns them in a dictionary,
keyed by propname.  Sub- propdirs in the given propdir that do not
have any value of their own, are left out of the returned dictionary.
Properties that the program doesn't have perms to read are also
left out.  Reads up to 511 props maximum. (ML3 required.)
<!-- HTML_TOPICEND -->


<h3 id="array_put_propvals">ARRAY_PUT_PROPVALS ( d s a -- )
<br>

<br>
</h3>
  Takes the values in the given dictionary, and stores them in the given
propdir on the given object.  Each dictionary entry will be saved into a
property with the key as the name, and the value as the property value.
Be aware that dictionary entries with keys starting with one of @ ~ _
or . may require special permissions to save.
<!-- HTML_TOPICEND -->


<h3 id="array_get_proplist">ARRAY_GET_PROPLIST ( d s -- a )
<br>

<br>
</h3>
  Reads in properties from a sequential proplist, and returns them in a list
array.  Proplists can be in any of these proplist styles: &quot;propname#/1&quot;,
&quot;propname/1&quot;, or &quot;propname1&quot;.  If the program doesn't have permission to read
the list, it returns an empty array.  Reads up to 511 props maximum.
<!-- HTML_TOPICEND -->


<h3 id="array_put_proplist">ARRAY_PUT_PROPLIST ( d s a -- )
<br>

<br>
</h3>
  Takes the values in the given list array, and stores them in the given
propdir on the given object as a sequential proplist.
<!-- HTML_TOPICEND -->


<h3 id="parseprop">PARSEPROP (d s s i -- s)
<br>

<br>
</h3>
  Returns the string output of the MPI Parser, given an object, a
property name to parse, an input string for the {&amp;how} variable, and an
integer that should either be 1, for when you want {delay} messages to be
sent to the player only, or 0, when you want the rest of the players in
the room to get the omessages. NOTE: for security reasons, you cannot use
PARSEPROP with a mucker level of less than 3.
<!-- HTML_TOPICEND -->


<h3 id="parsempi">PARSEMPI (d s s i -- s)
<br>

<br>
</h3>
  Returns the string output of the MPI Parser, given an object, an
MPI string to parse, an input string for the {&amp;how} variable, and an
integer that should either be 1, for when you want {delay} messages to be
sent to the player only, or 0, when you want the rest of the players in
the room to get the omessages. NOTE: for security reasons, you cannot use
PARSEMPI with a mucker level of less than 3.
<!-- HTML_TOPICEND -->


<h3 id="parsempiblessed">PARSEMPIBLESSED (d s s i -- s)
<br>

<br>
</h3>
  Returns the string output of blessed execution of the MPI Parser, given
an object, an MPI string to parse, an input string for the {&amp;how} variable,
and an integer that should either be 1, for when you want {delay} messages
to be sent to the player only, or 0, when you want the rest of the players
in the room to get the omessages. Requires Wizard permissions.
<!-- HTML_TOPICEND -->


<h3 id="parsepropex">PARSEPROPEX ( ref:Obj str:Prop dict:Vars int:Private -- dict:Vars str:Result )
<br>

<br>
</h3>
  MPI parses &quot;Prop&quot; on &quot;Obj&quot;.  The dictionary &quot;var&quot; will be used to setup mpi
variables, the key as the variable name, the value as the content of the
variable.  The content of the variables after the parse will be returned in
the resulting dictionary.  If &quot;Private&quot; is set to 1 the result of any {delay}
will be sent to the player only, otherwise if it is set to 0 the result will
be sent to the rest of the players in the room.  This prim is most useful for
passing values between MPI and MUF, rather than having to resort to formatting
the data into the {&amp;how} variable, or the return value.
This primitives requires at least mucker level 3.
<!-- HTML_TOPICEND -->


<h3 id="prop-name-ok?">PROP-NAME-OK? (s -- i)
<br>
</h3>
  Returns true if the given string is an acceptable property name that will
not cause an error for SETPROP or any other property related primitive.
<p>Also see:
    <a href="#setprop">SETPROP</a>
</p>
<!-- HTML_TOPICEND -->



<h2 id="DBOps">Database Related Operators</h2>
<ul>
    <li><a href="#addpennies">addpennies</a></li>
    <li><a href="#array_get_ignorelist">array_get_ignorelist</a></li>
    <li><a href="#caller">caller</a></li>
    <li><a href="#checkpassword">checkpassword</a></li>
    <li><a href="#contents">contents</a></li>
    <li><a href="#contents_array">contents_array</a></li>
    <li><a href="#controls">controls</a></li>
    <li><a href="#copyobj">copyobj</a></li>
    <li><a href="#copyplayer">copyplayer</a></li>
    <li><a href="#dbcmp">dbcmp</a></li>
    <li><a href="#dbref">dbref</a></li>
    <li><a href="#dbtop">dbtop</a></li>
    <li><a href="#desc">desc</a></li>
    <li><a href="#drop">drop</a></li>
    <li><a href="#entrances_array">entrances_array</a></li>
    <li><a href="#exit?">exit?</a></li>
    <li><a href="#exits">exits</a></li>
    <li><a href="#exits_array">exits_array</a></li>
    <li><a href="#fail">fail</a></li>
    <li><a href="#findnext">findnext</a></li>
    <li><a href="#flag?">flag?</a></li>
    <li><a href="#getlink">getlink</a></li>
    <li><a href="#getlinks">getlinks</a></li>
    <li><a href="#getlinks_array">getlinks_array</a></li>
    <li><a href="#ignore_add">ignore_add</a></li>
    <li><a href="#ignore_del">ignore_del</a></li>
    <li><a href="#ignoring?">ignoring?</a></li>
    <li><a href="#location">location</a></li>
    <li><a href="#match">match</a></li>
    <li><a href="#mlevel">mlevel</a></li>
    <li><a href="#movepennies">movepennies</a></li>
    <li><a href="#moveto">moveto</a></li>
    <li><a href="#name">name</a></li>
    <li><a href="#newexit">newexit</a></li>
    <li><a href="#newobject">newobject</a></li>
    <li><a href="#newpassword">newpassword</a></li>
    <li><a href="#newplayer">newplayer</a></li>
    <li><a href="#newprogram">newprogram</a></li>
    <li><a href="#newroom">newroom</a></li>
    <li><a href="#next">next</a></li>
    <li><a href="#nextentrance">nextentrance</a></li>
    <li><a href="#nextowned">nextowned</a></li>
    <li><a href="#objmem">objmem</a></li>
    <li><a href="#odrop">odrop</a></li>
    <li><a href="#ofail">ofail</a></li>
    <li><a href="#ok?">ok?</a></li>
    <li><a href="#osucc">osucc</a></li>
    <li><a href="#owner">owner</a></li>
    <li><a href="#part_pmatch">part_pmatch</a></li>
    <li><a href="#pennies">pennies</a></li>
    <li><a href="#player?">player?</a></li>
    <li><a href="#pmatch">pmatch</a></li>
    <li><a href="#pname_history">pname_history</a></li>
    <li><a href="#prog">prog</a></li>
    <li><a href="#program?">program?</a></li>
    <li><a href="#recycle">recycle</a></li>
    <li><a href="#rmatch">rmatch</a></li>
    <li><a href="#room?">room?</a></li>
    <li><a href="#set">set</a></li>
    <li><a href="#setdesc">setdesc</a></li>
    <li><a href="#setdrop">setdrop</a></li>
    <li><a href="#setfail">setfail</a></li>
    <li><a href="#setlink">setlink</a></li>
    <li><a href="#setlinks_array">setlinks_array</a></li>
    <li><a href="#setname">setname</a></li>
    <li><a href="#setodrop">setodrop</a></li>
    <li><a href="#setofail">setofail</a></li>
    <li><a href="#setosucc">setosucc</a></li>
    <li><a href="#setown">setown</a></li>
    <li><a href="#setsucc">setsucc</a></li>
    <li><a href="#setsysparm">setsysparm</a></li>
    <li><a href="#stats">stats</a></li>
    <li><a href="#stats_array">stats_array</a></li>
    <li><a href="#succ">succ</a></li>
    <li><a href="#sysparm">sysparm</a></li>
    <li><a href="#sysparm_array">sysparm_array</a></li>
    <li><a href="#thing?">thing?</a></li>
    <li><a href="#timestamps">timestamps</a></li>
    <li><a href="#toadplayer">toadplayer</a></li>
    <li><a href="#trig">trig</a></li>
    <li><a href="#truename">truename</a></li>
    <li><a href="#unparseobj">unparseobj</a></li>
</ul>



<h3 id="dbref">DBREF ( i -- d )
<br>

<br>
</h3>
  Converts integer i to object reference d.
<!-- HTML_TOPICEND -->


<h3 id="prog">PROG ( -- d)
<br>

<br>
</h3>
  Returns the dbref of the currently running program.
<!-- HTML_TOPICEND -->


<h3 id="trig">TRIG ( -- d)
<br>

<br>
</h3>
  Returns the dbref of the original trigger.
<!-- HTML_TOPICEND -->


<h3 id="caller">CALLER ( -- d)
<br>

<br>
</h3>
  Returns the dbref of the program that called this one, or the dbref of the
trigger, if this wasn't called by a program.
<!-- HTML_TOPICEND -->


<h3 id="dbtop">DBTOP ( -- d)
<br>

<br>
</h3>
  Returns the dbref of the first object beyond the top object of the database.
'dbtop ok?' would return a false value.
<!-- HTML_TOPICEND -->


<h3 id="dbcmp">DBCMP ( d1 d2 -- i )
<br>

<br>
</h3>
  Performs comparison of database objects d1 and d2. If they are the
same object, then i is 1, otherwise i is 0.

<p>
  This is deprecated, and internally defined as: =
<p>Also see:
    <a href="#=">=</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="unparseobj">UNPARSEOBJ (d -- s)
<br>

<br>
</h3>
  Returns the name-and-flag string for an object.  It always has the dbref and
flag string after the name, even if the player doesn't control the object.
For example: &quot;One(#1PW)&quot;
<!-- HTML_TOPICEND -->


<h3 id="owner">OWNER ( d -- d' )
<br>

<br>
</h3>
  d is any database object. Returns d', the player object that owns d.
If d is a player, d' will be the same as d.
<!-- HTML_TOPICEND -->


<h3 id="setown">SETOWN (d d -- )
<br>

<br>
</h3>
  Sets the ownership of the first object to the player given in the second
dbref. (wizbit only)
<!-- HTML_TOPICEND -->


<h3 id="location">LOCATION ( d -- d' )
<br>

<br>
</h3>
  Returns location of object d as object d'.
<!-- HTML_TOPICEND -->


<h3 id="moveto">MOVETO ( d1 d2 -- )
<br>

<br>
</h3>
  Moves object d1 to object d2.
<p>
  MOVETO is affected by the following rules:
<pre>
    a) If the object being moved is !JUMP_OK and is it being moved by someone
      other than the object's owner, then the moveto fails.
    b) If the object being moved is a person and either the source or
      destination rooms (if not owned by the person being moved) are
      !JUMP_OK, the moveto fails.
    c) If the object being moved is not a player, is owned by the owner of
      either the source or destination rooms, and either room where the
      ownership matches is !JUMP_OK, the moveto fails.
</pre>
<p>
  The moveto succeeds under any other circumstances.  MOVETO rules follow the
permissions of the current effective userid.  MOVETO will run programs in
the @desc and @succ/@fail of a room when moving a player.
<!-- HTML_TOPICEND -->


<h3 id="contents">CONTENTS ( d -- d' )
<br>

<br>
</h3>
  Pushes the dbref of the first thing contained by d.  This dbref can
then be referenced by `next' to cycle through all of the contents of
d.  d may be a room or a player.
<!-- HTML_TOPICEND -->


<h3 id="contents_array">CONTENTS_ARRAY ( d -- a )
<br>

<br>
</h3>
  Returns a list array that contains the dbref of every object contained
within the given object.  If a #-1 is returned as the last list item,
then there were too many objects to return all of them.
<!-- HTML_TOPICEND -->


<h3 id="exits">EXITS ( d -- d' )
<br>

<br>
</h3>
  Returns the first exit in the linked exit list of room/player/object d.
This list can be transversed with `next'.
<!-- HTML_TOPICEND -->


<h3 id="exits_array">EXITS_ARRAY ( d -- a )
<br>

<br>
</h3>
  Returns a list array that contains the dbref of every exit attached to the
given object.  If a #-1 is returned as the last list item, then there were
too many exits to return all of them.
<!-- HTML_TOPICEND -->


<h3 id="next">NEXT ( d -- d' )
<br>

<br>
</h3>
  Takes object d and returns the next thing in the linked contents/exits
list of d's location.
<!-- HTML_TOPICEND -->


<h3 id="nextowned">NEXTOWNED ( d -- d' )
<br>

<br>
</h3>
  When called with a player dbref, returns the dbref of the first object they
own.  Subsequent calls to those object dbrefs returns the next object owned
by that same player.  When no more objects are left owned by that player,
#-1 is returned.  The order of the objects is not guarenteed, but when used
correctly, each object owned by that player will be returned exactly once.
The player object itself will NOT be returned.
<p>Also see:
    <a href="#next">NEXT</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="findnext">FINDNEXT ( d1 d2 s1 s2 -- d' )
<br>

<br>
</h3>
  Searches for the next object in the database _after_ d1 that is owned by
d2, whose name matches the wildcard pattern s1, and whose flags match
those specified by s2.

<p>
  You can start a search with d1 set to #-1.  If d2 is #-1 then ownership
checks will not be performed.  However, only programs with a mucker level
of 3 or better will be allowed to perform non-owner-specific searches, or
searches with an owner different from the effective UID of the program.
If s1 is an empty string, name checks will not be performed.  If s2 is a
null string, then flags will not be checked.

<p>
  The s1 name pattern differs from that used by @find, @owned, etc. in
that those commands implicitly treat any patterns as if it has a *
before and after it.  This primitive does NOT.  So for this primitive,
&quot;*.muf&quot; would match only objects whose name ends in &quot;.muf&quot;.

<p>
  The s2 string is a flagslist that is in the same format as that used by
the @find, @owned, etc. commands.  ie:  &quot;F3!D&quot; will match all muf program
objects in the database that are mucker level 3, and not set debug.

<p>
  If there are no more objects in the database that might match all the
search criteria, then #-1 is returned.  Otherwise, the next matching
object is returned.

This primitive is used like this:
<pre>
    #-1 begin
        me @ &quot;*.muf&quot; &quot;F&quot; FINDNEXT
        dup while
        dup unparseobj .tell
    repeat
</pre>
<p>Also see:
    <a href="#next">NEXT</a> and
    <a href="#nextowned">NEXTOWNED</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="nextentrance">NEXTENTRANCE ( d1 d2 -- d3 )
<br>

<br>
</h3>
  Searches the database for the next object after d2 that is linked to d1.
You can begin a search by passing #-1 as d2.  The search currently scans
upwards through the database, but this ordering is not guaranteed.  If an
object is found that links to d1, then the dbref of that object is returned.
If no more such objects are found in the db, then #-1 is returned.
<!-- HTML_TOPICEND -->


<h3 id="controls">CONTROLS ( d1 d2 -- i )
<br>

<br>
</h3>
  Takes a player dbref d1 and an object dbref d2, and returns true if the
player has control over the given object.
<!-- HTML_TOPICEND -->


<h3 id="match">MATCH ( s -- d )
<br>

<br>
</h3>
  Takes string s, first checks all objects in the user's inventory, then
checks all objects in the current room, as well as all exits that the
player may use, and returns object d which contains string s.  If
nothing is found, d = #-1. If ambiguous, d = #-2. If HOME, d = #-3.
<!-- HTML_TOPICEND -->


<h3 id="rmatch">RMATCH ( d s -- d' )
<br>

<br>
</h3>
  Takes string s, checks all objects and actions associated with object
d, and returns object d' which matches that string.  For example,
matches actions and inventory objects for a player object, actions on
a thing object, etc.  If nothing is found, d' = #-1.  if ambiguous, d'
= #-2. If HOME, d' = #-3.
<!-- HTML_TOPICEND -->


<h3 id="pmatch">PMATCH (s -- d)
<br>

<br>
</h3>
  Takes a name and returns the dbref of the player.  If the name does not
match that of a player, #-1 is returned.
<!-- HTML_TOPICEND -->


<h3 id="part_pmatch">PART_PMATCH (s -- d)
<br>

<br>
</h3>
  Takes a player name, or the first part of the name, and matches it
against the names of the players who are currently online.  If the
given string is a prefix of the name of a player who is online, then
their dbref is returned.  If two players could be matched by the
given string, it returns a #-2.  If None of the players online match,
then it returns a #-1.
<!-- HTML_TOPICEND -->


<h3 id="pennies">PENNIES ( d -- i )
<br>

<br>
</h3>
  Gets the amount of pennies player object d has, or the penny value
of thing d.
<!-- HTML_TOPICEND -->


<h3 id="addpennies">ADDPENNIES ( d i -- )
<br>

<br>
</h3>
  d must be a player or thing object.  Adds i pennies to object d.
Without Wizard permissions, addpennies may only give players pennies,
limited to between zero and MAX_PENNIES.
<!-- HTML_TOPICEND -->


<h3 id="movepennies">MOVEPENNIES (d1 d2 i -- )
<br>

<br>
</h3>
  Moves i pennies from player/thing d1 to player/thing d2.  This is the
first step towards making ADDPENNIES require at least ML3 (or wizbit),
for enabling economies.
<!-- HTML_TOPICEND -->


<h3 id="checkpassword">CHECKPASSWORD ( d s -- i )
<br>

<br>
</h3>
  Checks if password string s is valid for player dbref d.  returns 1 on
success, otherwise returns 0.
Wizbit only.
<!-- HTML_TOPICEND -->


<h3 id="newpassword">NEWPASSWORD ( d s -- )
<br>

<br>
</h3>
  Changed the password of the given player d to s.
<!-- HTML_TOPICEND -->


<h3 id="set">SET ( d s -- )
<br>

<br>
</h3>
  Sets flag s to object d.  Recognizes negation (e.g. `!abode').
<p>Also see:
    <a href="#setname">SETNAME</a>,
    <a href="#setdesc">SETDESC</a> and
    <a href="#flag?">FLAG?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="flag?">FLAG? ( d s -- i )
<br>

<br>
</h3>
  Reads the flag of object d, specified by s, and returns its state: 1 =
on; 0 = off.  The ! token may be used before the name of a flag to negate
the check and check for the absence of the flag.  Different flags may be
supported in different installations.  flag? returns 0 for unsupported or
unrecognized flags.
<p>
  You can check the &quot;interactive&quot; flag to see if a player is currently in
a program's READ, or if they are in the MUF editor.
The &quot;Truewizard&quot; flag will check for a W flag with or without the QUELL set.
The &quot;Mucker&quot; flag returns the most significant bit of the mucker level and
the &quot;Nucker&quot; flag returns the least significant bit. (Use MLEVEL instead.)
<p>Also see:
    <a href="#set">SET</a> and
    <a href="#mlevel">MLEVEL</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="mlevel">MLEVEL (d -- i)
<br>

<br>
</h3>
  returns the mucker (or priority) level of the given object. If #-1 is
passed, this returns the effective mucker level of the current program.
<p>Also see:
    <a href="#mucker levels">MUCKER LEVELS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="ok?">OK? ( x -- i )
<br>

<br>
</h3>
  Takes x and returns 1 if x is a type dbref, as well as 0 or above,
below the top of the database, and is not an object of type garbage.
<p>Also see:
    <a href="#exit?">EXIT?</a>,
    <a href="#player?">PLAYER?</a>,
    <a href="#program?">PROGRAM?</a> and
    <a href="#thing?">THING?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="player?">PLAYER? ( d -- i )
<br>

<br>
</h3>
  Returns 1 if object d is a player object, otherwise returns 0.
If the dbref is that of an invalid object, it will return 0.
<p>Also see:
    <a href="#program?">PROGRAM?</a>,
    <a href="#room?">ROOM?</a>,
    <a href="#thing?">THING?</a>,
    <a href="#exit?">EXIT?</a> and
    <a href="#ok?">OK?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="room?">ROOM? ( d -- i )
<br>

<br>
</h3>
  Returns 1 if object d is a room, otherwise returns 0.  If the dbref is that
of an invalid object, it will return 0.  A dbref of #-3 (HOME) returns 1.
<p>Also see:
    <a href="#player?">PLAYER?</a>,
    <a href="#program?">PROGRAM?</a>,
    <a href="#thing?">THING?</a>,
    <a href="#exit?">EXIT?</a> and
    <a href="#ok?">OK?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="thing?">THING? ( d -- i )
<br>

<br>
</h3>
  Returns i as 1 if object d is a thing, otherwise returns i as 0.
<p>Also see:
    <a href="#player?">PLAYER?</a>,
    <a href="#program?">PROGRAM?</a>,
    <a href="#room?">ROOM?</a>,
    <a href="#exit?">EXIT?</a> and
    <a href="#ok?">OK?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="exit?">EXIT? ( d -- i )
<br>

<br>
</h3>
  Returns 1 if object d is an exit object, 0 if otherwise.
<p>Also see:
    <a href="#player?">PLAYER?</a>,
    <a href="#program?">PROGRAM?</a>,
    <a href="#room?">ROOM?</a>,
    <a href="#thing?">THING?</a> and
    <a href="#ok?">OK?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="program?">PROGRAM? ( d -- i )
<br>

<br>
</h3>
  Returns 1 if object d is a program, otherwise returns 0.
If the dbref is that of an invalid object, it will return 0.
<p>Also see:
    <a href="#player?">PLAYER?</a>,
    <a href="#room?">ROOM?</a>,
    <a href="#thing?">THING?</a>,
    <a href="#exit?">EXIT?</a> and
    <a href="#ok?">OK?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="sysparm">SYSPARM ( s -- s )
<br>

<br>
</h3>
  Takes a tuneable system parameter and returns its value as a string.  For
an integer it returns it as a string, a time is returned as a string
containing the number of seconds, a dbref is returned in standard dbref
format, and boolean is returned as 'yes' or 'no'
Checking an invalid parameter or a parameter requiring higher permissions
than the program has will return an empty string.

Parameters available:
<pre>
 (bool) 7bit_other_names          - Limit exit/room/muf names to 7-bit characters
 (bool) 7bit_thing_names          - Limit thing names to 7-bit characters
 (int)  addpennies_muf_mlev       - Mucker Level required to create/destroy pennies
 (time) aging_time                - When to considered an object old and unused
 (bool) allow_listeners           - Allow programs to listen to player output
 (bool) allow_listeners_env       - Allow listeners down environment
 (bool) allow_listeners_obj       - Allow objects to be listeners
 (bool) allow_zombies             - Enable Zombie things to relay what they hear
 (bool) autolink_actions          - Automatically link @actions to NIL
 (str)  autolook_cmd              - Room entry look command
 (time) clean_interval            - Interval between memory/object cleanups
 (int)  cmd_log_threshold_msec    - Log commands that take longer than X millisecs
 (bool) cmd_only_overrides        - Disable all built-in commands except wizard !overrides
 (int)  command_burst_size        - Max. commands per burst before limiter engages
 (int)  command_time_msec         - Millisecs per spam limiter time period
 (int)  commands_per_time         - Commands allowed per time period during limit
 (bool) compatible_priorities     - Use legacy exit priority levels on things
 (str)  connect_fail_mesg         - Failed player connect message
 (bool) consistent_lock_source    - Maintain trigger as lock source in TESTLOCK
 (str)  cpennies                  - Currency name, capitalized, plural
 (str)  cpenny                    - Currency name, capitalized
 (str)  create_fail_mesg          - Failed player create message
 (bool) dark_sleepers             - Make sleeping players dark
 (bool) dbdump_warning            - Enable warnings for upcoming database dumps
 (ref)  default_room_parent       - Place to parent new rooms to
 (str)  description_default       - Default description
 (bool) diskbase_propvals         - Enable property value diskbasing (req. restart)
 (bool) do_mpi_parsing            - Parse MPI strings in messages
 (time) dump_interval             - Interval between dumps
 (time) dump_warntime             - Interval between warning and dump
 (str)  dumpdone_mesg             - Database dump finished message
 (bool) dumpdone_warning          - Notify when database dump complete
 (str)  dumping_mesg              - Database dump started message
 (str)  dumpwarn_mesg             - Database dump finished message
 (bool) enable_home               - Enable 'home' command
 (bool) enable_prefix             - Enable prefix actions
 (int)  exit_cost                 - Cost to create an exit
 (bool) exit_darking              - Allow players to set exits dark
 (bool) expanded_debug_trace      - MUF debug trace shows array contents
 (str)  file_connection_help      - 'help' before login
 (str)  file_credits              - Acknowledgements
 (str)  file_editor_help          - Editor help
 (str)  file_help                 - 'help' main content
 (str)  file_help_dir             - 'help' topic directory
 (str)  file_info_dir             - 'info' topic directory
 (str)  file_log_cmd_times        - Command times
 (str)  file_log_commands         - Player commands
 (str)  file_log_gripes           - Player gripes
 (str)  file_log_malloc           - Memory allocations
 (str)  file_log_muf_errors       - MUF compile errors and warnings
 (str)  file_log_programs         - Text of changed programs
 (str)  file_log_sanfix           - Database fixes
 (str)  file_log_sanity           - Database corruption and errors
 (str)  file_log_status           - System errors and stats
 (str)  file_log_stderr           - Server error redirect
 (str)  file_log_stdout           - Server output redirect
 (str)  file_log_user             - MUF-writable messages
 (str)  file_man                  - 'man' main content
 (str)  file_man_dir              - 'man' topic directory
 (str)  file_motd                 - Message of the day
 (str)  file_mpihelp              - 'mpi' main content
 (str)  file_mpihelp_dir          - 'mpi' topic directory
 (str)  file_news                 - 'news' main content
 (str)  file_news_dir             - 'news' topic directory
 (str)  file_welcome_screen       - Opening screen
 (bool) force_mlev1_name_notify   - MUF notify prepends username for ML1 programs
 (int)  free_frames_pool          - Size of allocated MUF process frame pool
 (str)  gender_prop               - Property name used for pronoun substitutions
 (str)  huh_mesg                  - Unrecognized command warning
 (str)  idle_boot_mesg            - Boot message given to users idling out
 (bool) idle_ping_enable          - Enable server side keepalive pings
 (time) idle_ping_time            - Server side keepalive time in seconds
 (bool) idleboot                  - Enable booting of idle players
 (bool) ignore_bidirectional      - Enable bidirectional ignore
 (bool) ignore_support            - Enable support for @ignoring players
 (int)  instr_slice               - Max. uninterrupted instructions per timeslice
 (str)  leave_mesg                - Logoff message for QUIT
 (int)  link_cost                 - Cost to link an exit
 (int)  listen_mlev               - Mucker Level required for Listener programs
 (bool) lock_envcheck             - Locks check environment for properties
 (bool) log_commands              - Log player commands
 (bool) log_failed_commands       - Log unrecognized commands
 (bool) log_interactive           - Log text sent to MUF
 (bool) log_programs              - Log programs every time they are saved
 (int)  lookup_cost               - Cost to lookup a player name
 (ref)  lost_and_found            - Place for things without a home
 (bool) m3_huh                    - Enable huh? to call an exit named "huh?" and set M3, with full command string
 (int)  max_force_level           - Max. number of forces processed within a command
 (int)  max_instr_count           - Max. MUF instruction run length for ML1
 (int)  max_loaded_objs           - Max. percent of proploaded database objects
 (int)  max_ml4_nested_interp_loop_count - Max. MUF preempt interp loop nesting level for ML4 (0 = no limit)
 (int)  max_ml4_preempt_count     - Max. MUF preempt instruction run length for ML4, (0 = no limit)
 (int)  max_nested_interp_loop_count - Max. MUF preempt interp loop nesting level
 (int)  max_object_endowment      - Max. value of an object
 (int)  max_output                - Max. output buffer size
 (int)  max_pennies               - Max. pennies a player can own
 (int)  max_plyr_processes        - Concurrent processes allowed per player
 (int)  max_process_limit         - Total concurrent processes allowed on system
 (time) maxidle                   - Maximum idle time before booting
 (int)  mcp_muf_mlev              - Mucker Level required to use MCP
 (int)  movepennies_muf_mlev      - Mucker Level required to move pennies non-destructively
 (bool) mpi_continue_after_logout - Continue executing MPI after logout
 (int)  mpi_max_commands          - Max. number of uninterruptable MPI commands
 (str)  muckname                  - Name of the MUCK
 (bool) muf_comments_strict       - MUF comments are strict and not recursive
 (str)  new_program_flags         - Initial flags for newly created programs
 (int)  object_cost               - Cost to create an object
 (bool) optimize_muf              - Enable MUF bytecode optimizer
 (int)  pause_min                 - Min. millisecs between MUF input/output timeslices
 (str)  pcreate_flags             - Initial flags for newly created players
 (str)  pennies                   - Currency name, plural
 (int)  pennies_muf_mlev          - Mucker Level required to read the value of pennies, settings above 1 disable {money}
 (str)  penny                     - Currency name
 (int)  penny_rate                - Avg. moves between finding currency
 (bool) periodic_program_purge    - Periodically free unused MUF programs
 (int)  player_name_limit         - Limit on player name length
 (ref)  player_start              - Home where new players start
 (bool) playermax                 - Limit number of concurrent players allowed
 (str)  playermax_bootmesg        - Max. players connection error message
 (int)  playermax_limit           - Max. player connections allowed
 (str)  playermax_warnmesg        - Max. players connection login warning
 (bool) pname_history_reporting   - Report player name change history
 (time) pname_history_threshold   - Length of player name change history
 (int)  process_timer_limit       - Max. timers per process
 (bool) quiet_moves               - Suppress basic arrive and depart notifications
 (bool) realms_control            - Enable support for realm wizzes
 (bool) recognize_null_command    - Recognize null command
 (str)  register_mesg             - Login registration denied message
 (bool) registration              - Require new players to register manually
 (str)  reserved_names            - String-match list of reserved names
 (str)  reserved_player_names     - String-match list of reserved player names
 (int)  room_cost                 - Cost to create an room
 (bool) secure_teleport           - Restrict actions to Jump_OK or controlled rooms
 (bool) secure_thing_movement     - Moving things act like player
 (bool) secure_who                - Disallow WHO command from login screen and programs
 (bool) server_cipher_preference  - Honor server cipher preference order over client's
 (bool) show_legacy_props         - Examining objects lists legacy props
 (str)  ssl_cert_file             - Path to SSL certificate .pem
 (str)  ssl_cipher_preference_list - Allowed OpenSSL cipher list
 (str)  ssl_key_file              - Path to SSL private key .pem
 (str)  ssl_keyfile_passwd        - Password for SSL private key file
 (str)  ssl_min_protocol_version  - Min. allowed SSL protocol version for clients
 (int)  start_pennies             - Player starting currency count
 (bool) starttls_allow            - Enable TELNET STARTTLS encryption on plaintext port
 (bool) strict_god_priv           - Only God can touch God's objects
 (bool) tab_input_replaced_with_space - Change tab to space when processing input
 (bool) teleport_to_player        - Allow using exits linked to players
 (bool) thing_darking             - Allow players to set things dark
 (ref)  toad_default_recipient    - Default owner for @toaded player's things
 (bool) toad_recycle              - Recycle newly-created toads
 (bool) use_hostnames             - Resolve IP addresses into hostnames
 (int)  userlog_mlev              - Mucker Level required to write to userlog
 (bool) verbose_clone             - Show more information when using @clone command
 (bool) verbose_examine           - Show more information when using examine command
 (bool) who_hides_dark            - Hide dark players from WHO list
 (bool) wiz_vehicles              - Only let Wizards set vehicle bits
</pre>
<!-- HTML_TOPICEND -->


<h3 id="sysparm_array">SYSPARM_ARRAY ( str:pattern -- list:sysparminfo )
<br>

<br>
</h3>
  Given an smatch wildcard string pattern, returns a list of dictionaries,
one per each matched @tune parameter (sysparm), containing the information
about each sysparm.  This will only return items for which your program has
permission to read the data.

Each dictionary contains the following data, keyed with these strings:
<pre>
    &quot;type&quot;      One of &quot;string&quot;, &quot;integer&quot;, &quot;timespan&quot;, &quot;dbref&quot;, or &quot;boolean&quot;.
    &quot;group&quot;     The logical group that this parameter belongs to.
    &quot;name&quot;      The name of the @tune setting.
    &quot;value&quot;     The value of the sysparm.  May be an int, string, or dbref.
    &quot;mlev&quot;      The mucker level required to read the value of this sysparm.
    &quot;readmlev&quot;  The mucker level required to read the value of this sysparm.
    &quot;writemlev&quot; The mucker level required to write the value of this sysparm.
    &quot;label&quot;	A description of the parameter.
    &quot;nullable&quot;  Whether the parameter can have no value.
    &quot;active&quot;	Whether the parameter currently affects the system.
    &quot;default&quot;	Whether the parameter has been changed from defaults.

If a given entry is of the &quot;dbref&quot; type, it will also have the extra field:
    &quot;objtype&quot;   The type of object the dbref is restricted to.  Can be one of
                the strings &quot;player&quot;, &quot;thing&quot;, &quot;room&quot;, &quot;exit&quot;, &quot;program&quot;,
                &quot;garbage&quot;, or &quot;any&quot;.
</pre>
<p>Also see:
    <a href="#setsysparm">SETSYSPARM</a> and
    <a href="#sysparm">SYSPARM</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="setsysparm">SETSYSPARM ( s1 s2 -- )
<br>

<br>
</h3>
  Assigns the @tunable parameter s1 a value given by s2.  s2 must contain a
legal value for s1.  If s1 is prefixed with '%', reset s1 to default
instead, ignoring the value of s2.  (wizbit only)
<p>Also see:
    <a href="#sysparm">SYSPARM</a> and
    <a href="#sysparm_array">SYSPARM_ARRAY</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="name">NAME ( d -- s )
<br>

<br>
</h3>
  Takes object d and returns its name (@name) string field.
<!-- HTML_TOPICEND -->


<h3 id="setname">SETNAME  ( d s -- )
<br>

<br>
</h3>
  Takes object d, and sets the name to s. A program may only set the
names of objects that are owned by the effective user of the program,
or any object if the program is Wizard.  The name of a player can never
be set, since that would normally require a password.
<p>Also see:
    <a href="#set">SET</a>,
    <a href="#name">NAME</a>,
    <a href="#setdesc">SETDESC</a> and
    <a href="#ext-name-ok?">EXT-NAME-OK?</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="truename">TRUENAME ( d -- s )
<br>

<br>
</h3>
  Takes object d and returns its name string field.

<p>
  This is deprecated, and internally defined as: name
<p>Also see:
    <a href="#name">NAME</a>
</p>
<!-- HTML_TOPICEND -->

<h3 id="pname_history">PNAME_HISTORY ( d -- a )
<br>

<br>
</h3>
  Returns a dictionary representing the times in which the given player had a name
change. If determinable, the &quot;created_as&quot; key holds the name at creation. 

The result of this wizbit-only primitive is affected by the following sysparms:
<pre>
  pname_history_reporting    - if no, the result is an empty dictionary.
  pname_history_threshold    - amount of history to keep (0s = unlimited)
</pre>
<!-- HTML_TOPICEND -->


<h3 id="desc">DESC ( d -- s )
<br>

<br>
</h3>
  Takes object d and returns its description (@desc) string field.
<!-- HTML_TOPICEND -->


<h3 id="setdesc">SETDESC (d s -- )
<br>

<br>
</h3>
  Takes object d, and sets the @description string property _/de to s.
If the program is Mucker Level 1 or 2, then it may only set this property
on objects that are owned by the player that the program is running with
the permissions of.  This is actually a $define that uses addprop.  This
is identical to:
<pre>
    $define setdesc  &quot;_/de&quot;  swap 0 addprop $enddef
</pre>
<p>Also see:
    <a href="#desc">DESC</a>,
    <a href="#succ">SUCC</a>,
    <a href="#fail">FAIL</a>,
    <a href="#drop">DROP</a>,
    <a href="#osucc">OSUCC</a>,
    <a href="#ofail">OFAIL</a>,
    <a href="#odrop">ODROP</a>,
    <a href="#addprop">ADDPROP</a> and
    <a href="#getpropstr">GETPROPSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="succ">SUCC ( d -- s )
<br>

<br>
</h3>
  Takes object d and returns its success (@succ) string field s.
<!-- HTML_TOPICEND -->


<h3 id="setsucc">SETSUCC (d s -- )
<br>

<br>
</h3>
  Takes object d, and sets the @success string property _/sc to s.
If the program is Mucker Level 1 or 2, then it may only set this property
on objects that are owned by the player that the program is running with
the permissions of.  This is actually a $define that uses addprop.  This
is identical to:
<pre>
    $define setsucc  &quot;_/sc&quot; swap 0 addprop $enddef
</pre>
<p>Also see:
    <a href="#desc">DESC</a>,
    <a href="#succ">SUCC</a>,
    <a href="#fail">FAIL</a>,
    <a href="#drop">DROP</a>,
    <a href="#osucc">OSUCC</a>,
    <a href="#ofail">OFAIL</a>,
    <a href="#odrop">ODROP</a>,
    <a href="#addprop">ADDPROP</a> and
    <a href="#getpropstr">GETPROPSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="fail">FAIL ( d -- s )
<br>

<br>
</h3>
  Takes object d and returns its fail (@fail) string field.
<!-- HTML_TOPICEND -->


<h3 id="setfail">SETFAIL (d s -- )
<br>

<br>
</h3>
  Takes object d, and sets the @fail string property _/fl to s.
If the program is Mucker Level 1 or 2, then it may only set this property
on objects that are owned by the player that the program is running with
the permissions of.  This is actually a $define that uses addprop.  This
is identical to:
<pre>
    $define setfail  &quot;_/fl&quot; swap 0 addprop $enddef
</pre>
<p>Also see:
    <a href="#desc">DESC</a>,
    <a href="#succ">SUCC</a>,
    <a href="#fail">FAIL</a>,
    <a href="#drop">DROP</a>,
    <a href="#osucc">OSUCC</a>,
    <a href="#ofail">OFAIL</a>,
    <a href="#odrop">ODROP</a>,
    <a href="#addprop">ADDPROP</a> and
    <a href="#getpropstr">GETPROPSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="drop">DROP ( d -- s )
<br>

<br>
</h3>
  Takes object d and returns its drop (@drop) string field.
<!-- HTML_TOPICEND -->


<h3 id="setdrop">SETDROP (d s -- )
<br>

<br>
</h3>
  Takes object d, and sets the @drop string property _/dr to s.
If the program is Mucker Level 1 or 2, then it may only set this property
on objects that are owned by the player that the program is running with
the permissions of.  This is actually a $define that uses addprop.  This
is identical to:
<pre>
    $define setdrop  &quot;_/dr&quot; swap 0 addprop $enddef
</pre>
<p>Also see:
    <a href="#desc">DESC</a>,
    <a href="#succ">SUCC</a>,
    <a href="#fail">FAIL</a>,
    <a href="#drop">DROP</a>,
    <a href="#osucc">OSUCC</a>,
    <a href="#ofail">OFAIL</a>,
    <a href="#odrop">ODROP</a>,
    <a href="#addprop">ADDPROP</a> and
    <a href="#getpropstr">GETPROPSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="osucc">OSUCC ( d -- s )
<br>

<br>
</h3>
  Takes object d and returns its osuccess (@osucc) string field.
<!-- HTML_TOPICEND -->


<h3 id="setosucc">SETOSUCC (d s -- )
<br>

<br>
</h3>
  Takes object d, and sets the @osuccess string property _/osc to s.
If the program is Mucker Level 1 or 2, then it may only set this property
on objects that are owned by the player that the program is running with
the permissions of.  This is actually a $define that uses addprop.  This
is identical to:
<pre>
    $define setosucc  &quot;_/osc&quot; swap 0 addprop $enddef
</pre>
<p>Also see:
    <a href="#desc">DESC</a>,
    <a href="#succ">SUCC</a>,
    <a href="#fail">FAIL</a>,
    <a href="#drop">DROP</a>,
    <a href="#osucc">OSUCC</a>,
    <a href="#ofail">OFAIL</a>,
    <a href="#odrop">ODROP</a>,
    <a href="#addprop">ADDPROP</a> and
    <a href="#getpropstr">GETPROPSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="ofail">OFAIL ( d -- s )
<br>

<br>
</h3>
  Takes object d and returns its ofail (@ofail) string field.
<!-- HTML_TOPICEND -->


<h3 id="setofail">SETOFAIL (d s -- )
<br>

<br>
</h3>
  Takes object d, and sets the @ofail string property _/ofl to s.
If the program is Mucker Level 1 or 2, then it may only set this property
on objects that are owned by the player that the program is running with
the permissions of.  This is actually a $define that uses addprop.  This
is identical to:
<pre>
    $define setofail  &quot;_/ofl&quot; swap 0 addprop $enddef
</pre>
<p>Also see:
    <a href="#desc">DESC</a>,
    <a href="#succ">SUCC</a>,
    <a href="#fail">FAIL</a>,
    <a href="#drop">DROP</a>,
    <a href="#osucc">OSUCC</a>,
    <a href="#ofail">OFAIL</a>,
    <a href="#odrop">ODROP</a>,
    <a href="#addprop">ADDPROP</a> and
    <a href="#getpropstr">GETPROPSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="odrop">ODROP ( d -- s )
<br>

<br>
</h3>
  Takes object d and returns its odrop (@odrop) string field.
<!-- HTML_TOPICEND -->


<h3 id="setodrop">SETODROP (d s -- )
<br>

<br>
</h3>
  Takes object d, and sets the @odrop string property _/odr to s.
If the program is Mucker Level 1 or 2, then it may only set this property
on objects that are owned by the player that the program is running with
the permissions of.  This is actually a $define that uses addprop.  This
is identical to:
<pre>
    $define setodrop  &quot;_/odr&quot; swap 0 addprop $enddef
</pre>
<p>Also see:
    <a href="#desc">DESC</a>,
    <a href="#succ">SUCC</a>,
    <a href="#fail">FAIL</a>,
    <a href="#drop">DROP</a>,
    <a href="#osucc">OSUCC</a>,
    <a href="#ofail">OFAIL</a>,
    <a href="#odrop">ODROP</a>,
    <a href="#addprop">ADDPROP</a> and
    <a href="#getpropstr">GETPROPSTR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="getlink">GETLINK ( d -- d' )
<br>

<br>
</h3>
  Returns what object d is linked to, or #-1 if d is unlinked.  The
interpretation of link depends on the type of d: for an exit, returns
the room, player, action, or thing that the exit is linked
to.  For a player or thing, it returns its `home', and for
rooms returns the drop-to.
<!-- HTML_TOPICEND -->


<h3 id="getlinks">GETLINKS ( d -- dn..d1 n )
<br>

<br>
</h3>
  Returns what objects d is metalinked to.  If d is an unlinked exit
or a room with no dropto, getlinks returns 0.  A count of
1 and #-3 is returned if the dropto is linked to HOME.
<!-- HTML_TOPICEND -->


<h3 id="getlinks_array">GETLINKS_ARRAY ( d -- a )
<br>

<br>
</h3>
  Returns a list array that contains the dbref of every object that the
given object is linked to.
<!-- HTML_TOPICEND -->


<h3 id="entrances_array">ENTRANCES_ARRAY ( d -- a )
<br>

<br>
</h3>
  Returns a list array that contains the dbref of every object linked to the
given object.
<!-- HTML_TOPICEND -->


<h3 id="setlink">SETLINK     ( d1 d2 -- )
<br>

<br>
</h3>
  Takes an exit dbref d1, and sets its destination to d2.  You must have
control of the exit, and if the exit is already linked, it must be unlinked
first by doing setlink with #-1 as the destination.
<!-- HTML_TOPICEND -->


<h3 id="setlinks_array">SETLINKS_ARRAY ( ref:Obj arr:Destinations -- )
<br>

<br>
</h3>
  Sets the destinations/dropto/home of &quot;Obj&quot; to &quot;Destinations&quot;.  Objects may be
unlinked by passing in an empty array.
<!-- HTML_TOPICEND -->


<h3 id="timestamps">TIMESTAMPS ( d -- i i2 i3 i4 )
<br>

<br>
</h3>
  Returns the following for a program, the time created (i), the time last
modified (i2), the time last used (i3), and the number of uses(i4) for
any object.
<!-- HTML_TOPICEND -->


<h3 id="stats">STATS ( d -- total rooms exits things programs players garbage )
<br>

<br>
</h3>
  Returns the number of objects owned by 'd', or the total objects in
the system if d is #-1. This is broken up into a total, rooms, exits,
things, programs, players, and garbage. This functions much as the
@STATS command.
(Needs Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="stats_array">STATS_ARRAY ( d -- a )
<br>

<br>
</h3>
  Returns, as an array, the number of objects owned by 'd', or the total
objects in the system if d is #-1. This is broken up into a total, rooms, exits,
things, programs, players, and garbage. This functions much as the
@STATS command.
(Needs Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="objmem">OBJMEM ( d -- i )
<br>

<br>
</h3>
  Returns the current number of bytes in use by the given object.
<!-- HTML_TOPICEND -->


<h3 id="copyobj">COPYOBJ ( d -- d' )
<br>

<br>
</h3>
  Creates a new object (returning d' on top of the stack), that is a
copy of object d, in the inventory of the current player.
Can only create one object per program run, if under Mucker Level 3.
<!-- HTML_TOPICEND -->


<h3 id="copyplayer">COPYPLAYER ( d1 s1 s2 -- d2 )
<br>

<br>
</h3>
  Creates a new player object with the name s1, and the password s2, and the
properties, flags, links, etc. of the template object d1.  This returns
the dbref of the newly created player object.
<!-- HTML_TOPICEND -->


<h3 id="toadplayer">TOADPLAYER ( d1 d2 -- )
<br>

<br>
</h3>
  @toads player d2, and chowns all their posessions to player d1.
You can't toad wizard players.
<!-- HTML_TOPICEND -->


<h3 id="newplayer">NEWPLAYER ( s1 s2 -- d )
<br>

<br>
</h3>
  Creates a new player object, with the name s1, and the password s2.
This returns the dbref of the new player object.
<!-- HTML_TOPICEND -->


<h3 id="newroom">NEWROOM (d s -- d)
<br>

<br>
</h3>
  Takes the dbref of the parent and the name of the room. It returns the
dbref of the created room. Owner is the person running the program.
Can only create one object per program run, if under Mucker Level 3.
<!-- HTML_TOPICEND -->


<h3 id="newobject">NEWOBJECT (d s -- d)
<br>

<br>
</h3>
  Takes location and name and returns new thing's dbref.
Owner is the person running the program.
Can only create one object per program run, if under Mucker Level 3.
<!-- HTML_TOPICEND -->


<h3 id="newexit">NEWEXIT (d s -- d)
<br>

<br>
</h3>
  Takes location and name and returns new exit's dbref.
Owner is the person running the program. Mucker level 3 and higher.
<!-- HTML_TOPICEND -->


<h3 id="newprogram">NEWPROGRAM ( s -- d )
<br>

<br>
</h3>
  Creates a new program object with the given name, and returns its dbref.
Requires wizbit.
<!-- HTML_TOPICEND -->


<h3 id="recycle">RECYCLE (d -- )
<br>

<br>
</h3>
  Recycles the given object d.  Will not recycle players, the global
environment, the player starting room, or any currently running program.
(Can recycle objects owned by uid if running with Mucker Level 3
permissions.  Can recycle other people's items with wizbit)
<!-- HTML_TOPICEND -->


<h3 id="ignoring?">IGNORING? ( ref:Player1 ref:Player2 -- int:Result )
<br>

<br>
</h3>
  Returns true if either player has an ignore set for the other.  If one of
the players is an unquelled wizard this will always return false.
This primitive requires at least Mucker Level 3.
<!-- HTML_TOPICEND -->


<h3 id="ignore_add">IGNORE_ADD ( ref:Player ref:Who -- )
<br>

<br>
</h3>
  Adds the player &quot;Who&quot; to &quot;Player&quot;'s ignore list.
This primitive requires at least Mucker Level 3.
<!-- HTML_TOPICEND -->


<h3 id="ignore_del">IGNORE_DEL ( ref:Player ref:Who -- )
<br>

<br>
</h3>
  Removes the player &quot;Who&quot; from &quot;Player&quot;'s ignore list.
This primitive requires at least Mucker Level 3.
<!-- HTML_TOPICEND -->


<h3 id="array_get_ignorelist">ARRAY_GET_IGNORELIST ( ref:Player -- list:Players )
<br>

<br>
</h3>
  Returns a list array of players &quot;Player&quot; is ignoring.
This primitive requires at least Mucker Level 3.
<!-- HTML_TOPICEND -->



<h2 id="TimeOps">Time Manipulation Operators</h2>
<ul>
    <li><a href="#convtime">convtime</a></li>
    <li><a href="#date">date</a></li>
    <li><a href="#fmttime">fmttime</a></li>
    <li><a href="#gmtoffset">gmtoffset</a></li>
    <li><a href="#sleep">sleep</a></li>
    <li><a href="#systime">systime</a></li>
    <li><a href="#systime_precise">systime_precise</a></li>
    <li><a href="#time">time</a></li>
    <li><a href="#timefmt">timefmt</a></li>
    <li><a href="#timesplit">timesplit</a></li>
</ul>



<h3 id="time">TIME ( -- s m h )
<br>

<br>
</h3>
  Returns the time of day as integers on the stack, seconds, then minutes,
then hours.
<!-- HTML_TOPICEND -->


<h3 id="date">DATE ( -- i i i)
<br>

<br>
</h3>
  Returns the monthday, month, and year.  ie:  if it were February 6, 1992,
date would return 6 2 1992 as three integers on the stack.
<!-- HTML_TOPICEND -->


<h3 id="systime">SYSTIME ( -- i )
<br>

<br>
</h3>
  Returns the number of seconds from Jan 1, 1970 GMT. This is compatible with
the system timestamps and may be broken down into useful values through
'timesplit'.
<p>Also see:
    <a href="#systime_precise">SYSTIME_PRECISE</a>,
    <a href="#timesplit">TIMESPLIT</a> and
    <a href="#timestamps">TIMESTAMPS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="systime_precise">SYSTIME_PRECISE ( -- f )
<br>

<br>
</h3>
  Returns the number of seconds from Jan 1, 1970 GMT as a floating point
number, with microsecond accuracy.
<p>Also see:
    <a href="#systime">SYSTIME</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="gmtoffset">GMTOFFSET ( -- i)
<br>

<br>
</h3>
  Returns the server's offset from UTC in seconds.
Result is negative for time zones west of the prime meridian.
Result is positive for time zones east of the prime meridian.
<!-- HTML_TOPICEND -->


<h3 id="timesplit">TIMESPLIT ( i -- is im ih id im iy iw iyd )
<br>

<br>
</h3>
  Splits a systime value into 8 values in the following order: seconds,
minutes, hours, monthday, month, year, weekday, yearday.  Weekday starts
with sunday as 1, and yearday is the day of the year (1-366).
<!-- HTML_TOPICEND -->


<h3 id="timefmt">TIMEFMT (s i -- s)
<br>

<br>
</h3>
  Takes a format string and a SYSTIME integer and returns a string formatted
with the time.  The format string is ASCII text with formatting commands:

<pre>
  %a -- abbreviated weekday name
  %A -- full weekday name
  %b -- abbreviated month name
  %B -- full month name
  %c -- date and time (default: %a %b %e %T %Y)
  %C -- year divided by 100 and truncated to an integer,
        as a decimal number (00-99)
  %d -- day of the month as a decimal number (01-31)
  %D -- %m/%d/%y
  %e -- day of the month as a decimal number (1-31);
        a single digit is preceded by a space
  %F -- %Y-%m-%d (ISO 8601 date)
  %g -- last 2 digits of the ISO 8601 week-based year
        as a decimal number (00-99)
  %G -- ISO 8601 week-based year as a decimal number
  %h -- %b
  %H -- hour (24-hour clock) as a decimal number (00-23)
  %I -- hour (12-hour clock) as a decimal number (01-12)
  %j -- day of the year as a decimal number (001-366)
  %m -- month as a decimal number (01-12)
  %M -- minute as a decimal number (00-59)
  %n -- new-line character
  %p -- AM or PM
  %r -- 12-hour clock time (default: %I:%M:%S %p)
  %R -- %H:%M
  %S -- second as a decimal number (00-60)
  %t -- horizontal-tab character
  %T -- %H:%M:%S (ISO 8601 time)
  %u -- ISO 8601 weekday as a decimal number (1-7), where Monday is 1
  %U -- week number of the year (the first Sunday as the first day of week 1)
        as a decimal number (00-53)
  %V -- ISO 8601 week number as a decimal number (01-53)
  %w -- weekday as a decimal number (0-6), where Sunday is 0
  %W -- week number of the year (the first Monday as the first day of week 1)
        as a decimal number (00-53)
  %x -- date (default: %m/%d/%y)
  %X -- time (default: %T)
  %y -- last 2 digits of the year as a decimal number (00-99)
  %Y -- year as a decimal number
  %z -- offset from UTC in the ISO 8601 format, or by no characters
        if no time zone is determinable (example: -0500 for EST)
  %Z -- time zone name or abbreviation, or by no characters if no time zone
        is determinable (examples: UTC, EDT, PST)
  %% -- % (percent sign)
</pre>
<p>
  TIMEFMT processes format strings with the C function strftime().  The above
list of conversion specifiers (formatting commands) is from the C (draft
C17/C18) standard: some MUCKs may have more conversion specifiers available.
<p>Also see:
    <a href="#fmtstring">FMTSTRING</a> and
    <a href="#fmttime">FMTTIME</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="convtime">CONVTIME (s -- i) 
<br>

<br>
</h3>
  Converts time string from &quot;HH:MM:SS MO/DY/YR&quot; format to systime seconds.
<!-- HTML_TOPICEND -->


<h3 id="fmttime">FMTTIME (s1 s2 -- i) 
<br>

<br>
</h3>
  Converts time string s1 from the format given by s2 to systime seconds.
<p>Also see:
    <a href="#timefmt">TIMEFMT</a>
</p>

<!-- HTML_TOPICEND -->


<h3 id="sleep">SLEEP (i -- )
<br>

<br>
</h3>
  Makes the program pause here for 'i' seconds.  the value of i cannot
be negative.  If the sleep is for more than 0 seconds, then the program
may not thereafter use the READ primitive.
<!-- HTML_TOPICEND -->



<h2 id="ProcOps">Process Management Operators</h2>
<ul>
    <li><a href="#background">background</a></li>
    <li><a href="#bg_mode">bg_mode</a></li>
    <li><a href="#compile">compile</a></li>
    <li><a href="#compiled?">compiled?</a></li>
    <li><a href="#fg_mode">fg_mode</a></li>
    <li><a href="#foreground">foreground</a></li>
    <li><a href="#fork">fork</a></li>
    <li><a href="#getpidinfo">getpidinfo</a></li>
    <li><a href="#getpids">getpids</a></li>
    <li><a href="#instances">instances</a></li>
    <li><a href="#ispid?">ispid?</a></li>
    <li><a href="#kill">kill</a></li>
    <li><a href="#mode">mode</a></li>
    <li><a href="#pid">pid</a></li>
    <li><a href="#pr_mode">pr_mode</a></li>
    <li><a href="#preempt">preempt</a></li>
    <li><a href="#program_getlines">program_getlines</a></li>
    <li><a href="#program_setlines">program_setlines</a></li>
    <li><a href="#queue">queue</a></li>
    <li><a href="#setmode">setmode</a></li>
    <li><a href="#uncompile">uncompile</a></li>
</ul>



<h3 id="mode">MODE ( -- i)
<br>

<br>
</h3>
  Returns an integer denoting the current multitasking mode.  This ignores
BOUND bits on programs.  The integer this returns will be the same as
one of those defined by the standard $defines bg_mode, fg_mode, and
pr_mode, being background, foreground, and preempt mode, respectively.
<p>Also see:
    <a href="#pr_mode">PR_MODE</a>,
    <a href="#fg_mode">FG_MODE</a>,
    <a href="#bg_mode">BG_MODE</a> and
    <a href="#setmode">SETMODE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="setmode">SETMODE (i -- )
<br>

<br>
</h3>
  Sets the current multitasking mode to the given mode.  The integer this
uses will be the same as one of those defined by the standard $defines
bg_mode, fg_mode, and pr_mode, being background, foreground, and preempt
mode, respectively.  Programs set BOUND will run PREEMPT, ignoring this
mode.
<p>Also see:
    <a href="#pr_mode">PR_MODE</a>,
    <a href="#fg_mode">FG_MODE</a>,
    <a href="#bg_mode">BG_MODE</a> and
    <a href="#mode">MODE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="pr_mode">PR_MODE ( -- i)
<br>

<br>
</h3>
  This is a standard built in $define.  This is used with MODE and
SETMODE to show what mode the program is running in, or to set what mode
it will run in.  For example, MODE returns an integer on the stack, that
you can compare against PR_MODE, FG_MODE, or BG_MODE, to determine what
mode the program is in.  PR_MODE is preempt mode, and is defined as 0.
<p>Also see:
    <a href="#preempt">PREEMPT</a>,
    <a href="#multitasking">MULTITASKING</a>,
    <a href="#pr_mode">PR_MODE</a>,
    <a href="#mode">MODE</a> and
    <a href="#setmode">SETMODE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="fg_mode">FG_MODE ( -- i)
<br>

<br>
</h3>
  This is a standard built in $define.  This is used with MODE and
SETMODE to show what mode the program is running in, or to set what mode
it will run in.  For example, MODE returns an integer on the stack, that
you can compare against PR_MODE, FG_MODE, or BG_MODE, to determine what
mode the program is in.  FG_MODE is foreground mode, and is defined as 1.
<p>Also see:
    <a href="#foreground">FOREGROUND</a>,
    <a href="#multitasking">MULTITASKING</a>,
    <a href="#pr_mode">PR_MODE</a>,
    <a href="#mode">MODE</a> and
    <a href="#setmode">SETMODE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="bg_mode">BG_MODE ( -- i)
<br>

<br>
</h3>
  This is a standard built in $define.  This is used with MODE and
SETMODE to show what mode the program is running in, or to set what mode
it will run in.  For example, MODE returns an integer on the stack, that
you can compare against PR_MODE, FG_MODE, or BG_MODE, to determine what
mode the program is in.  BG_MODE is background mode, and is defined as 2.
<p>Also see:
    <a href="#background">BACKGROUND</a>,
    <a href="#multitasking">MULTITASKING</a>,
    <a href="#pr_mode">PR_MODE</a>,
    <a href="#mode">MODE</a> and
    <a href="#setmode">SETMODE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="preempt">PREEMPT ( -- )
<br>

<br>
</h3>
  Prevents a program from being swapped out to do multitasking.  Needed in
some cases to protect crucial data from being changed while it is being
worked on.  A program will remain in preempt mode until its execution is
completed.  Basically what this command does is to turn off multitasking,
but then you have a limit on how many instructions you can run without
needing either to pause with a SLEEP, or have a wizbit on the program.
<p>Also see:
    <a href="#multitasking">MULTITASKING</a> and
    <a href="#mode">MODE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="foreground">FOREGROUND ( -- )
<br>

<br>
</h3>
  To turn on multitasking, you can issue a foreground command.  While a
program is in foreground mode, the server will be multitasking and
handling multiple programs at once, and input from other users, but it
will be blocking any input from the user of the program until the program
finishes.  You cannot foreground a program once it is running in the
background. A program will stay in foreground mode until it finishes
running or until you change the mode.
<p>Also see:
    <a href="#multitasking">MULTITASKING</a> and
    <a href="#mode">MODE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="background">BACKGROUND ( -- )
<br>

<br>
</h3>
  Another way to turn on multitasking is to use the background command.
Programs in the background let the program user go on and be able to do
other things while waiting for the program to finish.  You cannot use
the READ command in a background program.  Once a program is put into
background mode, you cannot set it into foreground or preempt mode.
A program will remain in the background until it finishes execution.
<p>Also see:
    <a href="#multitasking">MULTITASKING</a> and
    <a href="#mode">MODE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="queue">QUEUE (i d s -- i)
<br>

<br>
</h3>
  Takes a time in seconds, a program's dbref, and a parameter string.  It
will execute the given program with the given string as the only string on
the stack, after a delay of the given number of second.  Returns  the pid
of the queued process, or 0 if the timequeue was full.
(Requires Mucker Level 3)
<p>Also see:
    <a href="#sleep">SLEEP</a>,
    <a href="#fork">FORK</a>,
    <a href="#kill">KILL</a>,
    <a href="#ispid?">ISPID?</a> and
    <a href="#getpidinfo">GETPIDINFO</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="fork">FORK ( -- i)
<br>

<br>
</h3>
  This primitive forks off a BACKGROUND (muf) process from the currently
running program.  It returns the pid of the child process to the parent
process, and returns a 0 to the child.  If the timequeue was full, then
it returns a -1 to the parent process, and there is no child process.
(Requires Mucker Level 3)
<p>Also see:
    <a href="#queue">QUEUE</a>,
    <a href="#kill">KILL</a>,
    <a href="#ispid?">ISPID?</a> and
    <a href="#getpidinfo">GETPIDINFO</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="kill">KILL (i -- i)
<br>

<br>
</h3>
  Attempts to kill the process referred to by the given process ID.
Returns 1 if the process existed, and 0 if it didn't.
Must own the process if under Mucker Level 3.
<p>Also see:
    <a href="#queue">QUEUE</a>,
    <a href="#fork">FORK</a>,
    <a href="#kill">KILL</a>,
    <a href="#ispid?">ISPID?</a> and
    <a href="#getpidinfo">GETPIDINFO</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="pid">PID ( -- i)
<br>

<br>
</h3>
  Returns the process ID of the program that is currently running.
<p>Also see:
    <a href="#ispid?">ISPID?</a>,
    <a href="#getpids">GETPIDS</a> and
    <a href="#getpidinfo">GETPIDINFO</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="ispid?">ISPID? (i -- i)
<br>

<br>
</h3>
  Takes a process id and checks to see if an event with that pid is in the
timequeue.  It returns 1 if it is, and 0 if it is not.  ispid? will also
return 1 if the given process id is that of the currently running program.
This primitive requires at least mucker level 3.
<p>Also see:
    <a href="#getpidinfo">GETPIDINFO</a>,
    <a href="#getpids">GETPIDS</a> and
    <a href="#pid">PID</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="getpids">GETPIDS ( ref:obj -- list:pids )
<br>

<br>
</h3>
  If obj is a program dbref, this will return a list of the process IDs
of every active process that has the given program in their call stack.
If obj is a player dbref, this will return a list of all the PIDs assigned to
that player.  If obj is a trigger dbref, it will return all the active PIDs
associated with that trigger.   And finally, if obj is #-1, then all active
PIDs will be included in the array that gets returned.
<p>Also see:
    <a href="#getpidinfo">GETPIDINFO</a>,
    <a href="#ispid?">ISPID?</a> and
    <a href="#pid">PID</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="getpidinfo">GETPIDINFO ( int:pid -- dict:info )
<br>

<br>
</h3>
  Given a valid active PID, returns a dictionary with information about
that process. The information returned is:
<pre>
    CALLED_DATA - The string the program was queued with, if any
    CALLED_PROG - The program dbref# of the process' current call level.
    CPU         - The amount of CPU time used up by the process.
    DESCR       - The descriptor that called the program.
    FILTERS     - Array of event strings being watched for.
    INSTCNT     - The number of instructions run so far.
    MLEVEL	- The current MUCKER level.
    NEXTRUN     - When the process is due to run again.
    PID         - That process ID.
    PLAYER      - The player dbref that PID belongs to.
    STARTED     - Systime in seconds when the process started.
    SUBTYPE     - Additional information about the process.
    TRIG        - The trigger that called that process.
    TYPE        - What type of process it is. MUF/MPI.
</pre>

Requires Mucker level 3 to check a pid other than current.
<p>Also see:
    <a href="#getpids">GETPIDS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="instances">INSTANCES ( d -- i )
<br>

<br>
</h3>
  Returns the number of active instances of the given program.  Ie: the
number of active processes that are running, using the given program.
<!-- HTML_TOPICEND -->


<h3 id="compile">COMPILE ( d i1 -- i2 )
<br>

<br>
</h3>
  Compiles the given program.  If i1 is true, errors and warnings are printed
out to the user.  If the program fails to compile, this returns 0.  If the
compile is successful, this returns the number of compiled instructions.
This will throw an error if the program has any current instances running.
<!-- HTML_TOPICEND -->


<h3 id="uncompile">UNCOMPILE ( d -- )
<br>

<br>
</h3>
  Uncompiles the given muf program.  This will throw an error if the program
has any current instances running.
<!-- HTML_TOPICEND -->


<h3 id="compiled?">COMPILED? ( d -- i )
<br>

<br>
</h3>
  Returns 0 if the given program is not compiled.  Otherwise returns the
number of compiled instructions.
<!-- HTML_TOPICEND -->


<h3 id="program_getlines">PROGRAM_GETLINES ( d i1 i2 -- a )
<br>

<br>
</h3>
  Returns a list array of strings containing the muf program lines in
program d, from line i1 to line i2, inclusive.  If both i1 and i2 are
zero, then the entire program is returned.  If i1 is zero, it is assumed
to mean the first line.  If i2 is zero, it is assumed to mean the very
last line.  If i1 and i2 are the same, and non-zero, then only that line
will be returned, as a list array with a single string element.  The target
program must be controlled by the current program's UID, be set VIEWABLE,
or the current program must be running with wizard permissions.
<!-- HTML_TOPICEND -->


<h3 id="program_setlines">PROGRAM_SETLINES ( ref:Program list:Lines -- )
<br>

<br>
</h3>
  Sets all the lines of the given program to the lines in the array.
This primitive requires at least mucker level 4.
<!-- HTML_TOPICEND -->



<h2 id="ConnOps">Connection Management Operators</h2>
<ul>
    <li><a href="#awake?">awake?</a></li>
    <li><a href="#conboot">conboot</a></li>
    <li><a href="#concount">concount</a></li>
    <li><a href="#condbref">condbref</a></li>
    <li><a href="#condescr">condescr</a></li>
    <li><a href="#conhost">conhost</a></li>
    <li><a href="#conidle">conidle</a></li>
    <li><a href="#connotify">connotify</a></li>
    <li><a href="#contime">contime</a></li>
    <li><a href="#conuser">conuser</a></li>
    <li><a href="#descr">descr</a></li>
    <li><a href="#descr_array">descr_array</a></li>
    <li><a href="#descr_setuser">descr_setuser</a></li>
    <li><a href="#descrboot">descrboot</a></li>
    <li><a href="#descrbufsize">descrbufsize</a></li>
    <li><a href="#descrcon">descrcon</a></li>
    <li><a href="#descrdbref">descrdbref</a></li>
    <li><a href="#descrflush">descrflush</a></li>
    <li><a href="#descrhost">descrhost</a></li>
    <li><a href="#descridle">descridle</a></li>
    <li><a href="#descriptors">descriptors</a></li>
    <li><a href="#descrleastidle">descrleastidle</a></li>
    <li><a href="#descrmostidle">descrmostidle</a></li>
    <li><a href="#descrnotify">descrnotify</a></li>
    <li><a href="#descrsecure?">descrsecure?</a></li>
    <li><a href="#descrtime">descrtime</a></li>
    <li><a href="#descruser">descruser</a></li>
    <li><a href="#firstdescr">firstdescr</a></li>
    <li><a href="#lastdescr">lastdescr</a></li>
    <li><a href="#nextdescr">nextdescr</a></li>
    <li><a href="#online">online</a></li>
    <li><a href="#online_array">online_array</a></li>
</ul>



<h3 id="descr">DESCR ( -- i)
<br>

<br>
</h3>
  Returns the descriptor number that invoked this program.  The value
returned may be -1 in the case of listener or autostart programs.
<!-- HTML_TOPICEND -->


<h3 id="awake?">AWAKE? ( d -- i )
<br>

<br>
</h3>
  Passed a players dbref, returns the number of connections they have to
the game. This will be 0 if they are not connected.
<!-- HTML_TOPICEND -->


<h3 id="online">ONLINE ( -- d ... i )
<br>

<br>
</h3>
  Returns a dbref for every player connected to the server, and lastly the
number of connections.
<!-- HTML_TOPICEND -->


<h3 id="online_array">ONLINE_ARRAY ( -- a )
<br>

<br>
</h3>
  Returns a single stack item, which is a list array, containing a dbref for
every player connected to the server.
<!-- HTML_TOPICEND -->


<h3 id="concount">CONCOUNT ( -- i)
<br>

<br>
</h3>
  Returns how many connections to the server there are.
(Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="condbref">CONDBREF (i -- d)
<br>

<br>
</h3>
  Returns the dbref of the player connected to this connection.
(Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="contime">CONTIME (i -- i)
<br>

<br>
</h3>
  Returns how many seconds the given connection has been connected
to the server.  (Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="conidle">CONIDLE (i -- i)
<br>

<br>
</h3>
  Returns how many seconds the connection has been idle.
(Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="conuser">CONUSER (i -- s)
<br>

<br>
</h3>
  Returns the username of the connection. (wizbit only)
<!-- HTML_TOPICEND -->


<h3 id="conhost">CONHOST (i -- s)
<br>

<br>
</h3>
  Returns the hostname of the connection. (wizbit only)
<!-- HTML_TOPICEND -->


<h3 id="conboot">CONBOOT (i -- )
<br>

<br>
</h3>
  Takes a connection number and disconnects that connection from
the server.  Basically @boot for a specific connection. (wizbit only)
<!-- HTML_TOPICEND -->


<h3 id="connotify">CONNOTIFY (i s -- )
<br>

<br>
</h3>
  Sends a string to a specific connection to the server.
(Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="condescr">CONDESCR ( i -- i )
<br>

<br>
</h3>
  Takes a connection number and returns the descriptor number associated
with it.  (Requires Mucker Level 3)  See DESCRIPTORS, DESCRCON.
<!-- HTML_TOPICEND -->


<h3 id="descrcon">DESCRCON (i -- i)
<br>

<br>
</h3>
  Takes a descriptor and returns the associated connection number,
or 0 if no match was found.
(Requires Mucker Level 3)
<p>Also see:
    <a href="#descriptors">DESCRIPTORS</a> and
    <a href="#condescr">CONDESCR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="descrdbref">DESCRDBREF (i -- d)
<br>

<br>
</h3>
  Returns the dbref of the player connected to this descriptor number.
This may return #-1 if there is no player connected to the given descriptor.
(Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="descrtime">DESCRTIME (i -- i)
<br>

<br>
</h3>
  Returns how many seconds the given descriptor connection has been connected
to the server.  (Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="descridle">DESCRIDLE (i -- i)
<br>

<br>
</h3>
  Returns how many seconds the descriptor connection has been idle.
(Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="descrleastidle">DESCRLEASTIDLE (d -- i)
<br>

<br>
</h3>
  Returns the descriptor number for the least idle connection of the given
player dbref.  (Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="descrmostidle">DESCRMOSTIDLE (d -- i)
<br>

<br>
</h3>
  Returns the descriptor number for the most idle connection of the given
player dbref.  (Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="descrsecure?">DESCRSECURE? (d -- i)
<br>

<br>
</h3>
  Returns 1 if the descriptor number corresponds to a secure connection, and
0 otherwise. (Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="descrhost">DESCRHOST (i -- s)
<br>

<br>
</h3>
  Returns the hostname of the descriptor connection. (wizbit only)
<!-- HTML_TOPICEND -->


<h3 id="descruser">DESCRUSER (i -- s)
<br>

<br>
</h3>
  Returns the username of the descriptor connection. (wizbit only)
<!-- HTML_TOPICEND -->


<h3 id="descrboot">DESCRBOOT (i -- )
<br>

<br>
</h3>
  Takes a descriptor number and disconnects that connection from
the server.  Basically @boot for a specific descriptor connection.
(wizbit only)
<!-- HTML_TOPICEND -->


<h3 id="descrnotify">DESCRNOTIFY (i s -- )
<br>

<br>
</h3>
  Sends a string to a specific descriptor connection, similar to NOTIFY.
(Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="firstdescr">FIRSTDESCR (d -- i)
<br>

<br>
</h3>
  Returns the first descriptor number associated with the given player.
If the player object is given as #-1, then this returns the first descriptor
in the list of all connections.
<!-- HTML_TOPICEND -->


<h3 id="nextdescr">NEXTDESCR (i -- i)
<br>

<br>
</h3>
  Takes a descriptor number, and returns the next connected descriptor
number.  To get the first descriptor number, use '1 condescr'.  Between
these, you can step through the descriptors list.  If you try to use
nextdescr on an invalid descriptor, it will return 0.  If you have
reached the end of the descriptor list, it returns 0.
(Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="lastdescr">LASTDESCR (d -- i)
<br>

<br>
</h3>
  Returns the last descriptor number associated with the given player.
If the player object is given as #-1, then this returns the last descriptor
in the list of all connections.
<!-- HTML_TOPICEND -->


<h3 id="descrflush">DESCRFLUSH (i -- )
<br>

<br>
</h3>
  Flushes the output text on the given descriptor.  If i is -1, flushes
output on all descriptors.
(Requires Mucker Level 3)
<!-- HTML_TOPICEND -->


<h3 id="descriptors">DESCRIPTORS (d -- ix...i1 i)
<br>

<br>
</h3>
  Takes a player dbref, or #-1, and returns the range of descriptor numbers
associated with that dbref (or all for #-1) with their count on top.
Descriptors are numbers that always stay the same for a connection, while
a connection# is the relative position in the WHO list of a connection.
<p>Also see:
    <a href="#descrcon">DESCRCON</a> and
    <a href="#condescr">CONDESCR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="descr_array">DESCR_ARRAY (d -- a)
<br>

<br>
</h3>
  Takes a player dbref, or #-1, and returns a list array that contains the
current descriptor numbers associated with that dbref.  (Or all connected
descriptors, if the dbref is #-1)  This can return an empty list if there
are no connections for that player.  This is effectively the same as the
sequence 'descriptors array_make', but doesn't overflow the stack if too
many descriptors are available.  Descriptors are numbers that always stay
the same for a connection, while a connection# is the relative position
in the WHO list of a connection.
<p>Also see:
    <a href="#descriptors">DESCRIPTORS</a>,
    <a href="#descrcon">DESCRCON</a> and
    <a href="#condescr">CONDESCR</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="descr_setuser">DESCR_SETUSER ( i d s -- i )
<br>

<br>
</h3>
  Reconnects descriptor i to the player with dbref d and password s.  It first
disconnects from the old dbref, then connects the new one, as if QUIT was
typed then the new character was logged in.  If the password doesn't match
the player's password, then it gives a permission denied error.  This
returns a 1 if successful or a 0 if the given descriptor wasn't found.
Wizbit only.
<!-- HTML_TOPICEND -->


<h3 id="descrbufsize">DESCRBUFSIZE ( int:dscr -- int:bytes )
<br>

<br>
</h3>
  Returns the number of bytes of free space in the given descriptor's output
buffer.  If more data is written to the buffer than it has space for, the
data at the beginning of the buffer gets erased with an &lt;output flushed&gt;.
Remember that each NOTIFY adds a CR LF byte pair at the end of each line.
Also note that \r in lines gets translated to CR LF byte pairs.
<!-- HTML_TOPICEND -->



<h2 id="EventOps">Event Handling Operators</h2>
<ul>
    <li><a href="#event_count">event_count</a></li>
    <li><a href="#event_exists">event_exists</a></li>
    <li><a href="#event_send">event_send</a></li>
    <li><a href="#event_wait">event_wait</a></li>
    <li><a href="#event_waitfor">event_waitfor</a></li>
    <li><a href="#timer_start">timer_start</a></li>
    <li><a href="#timer_stop">timer_stop</a></li>
    <li><a href="#watchpid">watchpid</a></li>
</ul>



<h3 id="event_count">EVENT_COUNT ( -- i )
<br>

<br>
</h3>
  Returns the number of pending events waiting to be processed with EVENT_WAIT.
<!-- HTML_TOPICEND -->


<h3 id="event_exists">EVENT_EXISTS ( s -- i )
<br>

<br>
</h3>
  Returns the number of pending events that have the given eventid type.
The given eventid type can be an smatch wildcard pattern.
<!-- HTML_TOPICEND -->


<h3 id="event_wait">EVENT_WAIT ( -- ? s )
<br>

<br>
</h3>
  This is an inserver muf macro, that expands to '0 array_make event_waitfor'
See: EVENT_WAITFOR
<!-- HTML_TOPICEND -->


<h3 id="event_waitfor">EVENT_WAITFOR (a -- ? s )
<br>

<br>
</h3>
  Waits for an event to occur that matches one of the eventIDs given in the
string list array.  The comparison is NOT case sensitive, and you may use
smatch wildcard patterns.  If a matching event isn't in the event queue
already, this will pause the MUF process until a matching event is added
to the queue.  The first matching event to become available will be removed
from the event queue.  This returns an event-specific context data item,
and the matching eventID string.  If an empty list array is passed to this
primitive, then it will match any and all events, and return the first one
pending.

<p>
  Timer events have eventID strings that are created by prepending &quot;TIMER.&quot;
to the timerID passed to the TIMER_START primitive.  The context for Timer
events is an integer, representing the systime that the timer event was
scheduled to occur at.  This might not be the time that the event is actually
processed at, due to system delays.

<p>
  GUI events have eventID strings that are created by prepending &quot;GUI.&quot; to
the dlogID of the dialog that generated the event.  The context for GUI
events is a dictionary contains the following keys:

<pre>
descr      Holds the descriptor that generated the event.
dlogid     Holds the DlogID of the dialog that generated the event.
id         Holds the ID of the control that generated the event.
dismissed  Holds 1 if the dialog was dismissed, 0 otherwise.
event      Holds the type of gui event.  ie: buttonpress, menuselect.
values     Holds the dictionary of control values, keyed by control name.
data       Holds array of extra gui-event specific data.
</pre>

<p>
  User events have eventID strings that are created by prepending &quot;USER.&quot; to
the eventID given to the EVENT_SEND muf primitive.  The context for User
events is a dictionary containing the following keys:

<pre>
caller_pid   Holds the integer Process ID of the sending program.
caller_prog  Holds the dbref of the sending program.
data         Holds the stack item sent by the EVENT_SEND primitive.
descr        Holds the descr that initiated the calling program.
trigger      Holds the trigger dbref that initiated the calling program.
player       Holds the player dbref that ran the calling program.
prog_uid     Holds the dbref of the player whose permissions the caller
               program is running as.
</pre>

<p>
  MCP events have eventID strings formatted like &quot;MCP.packagename-mesgname&quot;
where 'packagename' is the name of the MCP package being invoked, and
'mesgname' is the specific message in the package being invoked.  If the
'mesgname' is a null string, then the trailing '-' is removed.

<p>
  Some example MCP eventIDs are:

<pre>
    MCP.com-belfry-image       Where pkg is 'com-belfry-image' &amp; mesg is ''
    MCP.com-belfry-image-view  Where pkg is 'com-belfry-image' &amp; mesg is 'view'
</pre>

The context for MCP events is a dictionary containing the following keys:

<pre>
    descr     Holds the integer descriptor of the sending connection.
    package   Holds the string package name the MCP mesg is sent for.
    message   Holds the string message name within that package.
    args      Holds a dictionary, containing the message arguments.
                Each mesg arg has an array list of strings as a value.
</pre>

<p>
  Read events have eventID strings of just &quot;READ&quot;.  The context of Read events
is the integer descriptor of the first waiting line to be READ.  To get the
actual line sent by the user you need to use the READ primitive.

<p>
  Process exit events have eventID strings that are created by prepending
&quot;PROC.EXIT.&quot; to the pid of the watched process that exited.  The context
is the pid of the process that exited.
<!-- HTML_TOPICEND -->


<h3 id="event_send">EVENT_SEND ( i s ? -- )
<br>

<br>
</h3>
  Sends a &quot;USER.&quot; event to the process referred to by the given pid.
The target process will receive an event that can be read with EVENT_WAIT.
The event type will be &quot;USER.&quot; with the given event id string appended
to it.  The given event id string will be truncated at 32 characters.
The receiving process will be passed a dictionary with items &quot;data&quot; for
the given arbitrary stack element, &quot;caller_pid&quot; with the pid of the
process calling EVENT_SEND, and &quot;caller_prog&quot; with the dbref of the
program calling EVENT_SEND.

<p>
  Ie: '23 &quot;foobar&quot; 3.1416 event_send' will send an event to process 23, with
an eventid of &quot;USER.foobar&quot;, and a floating point data value of 3.1416.
This primitive requires at least Mucker Level 3.
<!-- HTML_TOPICEND -->


<h3 id="timer_start">TIMER_START ( i s -- )
<br>

<br>
</h3>
  Requests that a timer event be sent to this program in i seconds,
with an event name of &quot;TIMER.&quot;  with the given string appended.  ie:
'5 &quot;one&quot; timer_start' will cause a &quot;TIMER.one&quot; event to be sent to
the program in 5 seconds.  This is used with EVENT_WAIT.  If a timer
with the given timerid already exists, it will be rescheduled to occur
after the new delay.  Timer ids will be truncated to 32 characters.
Each MUF process can only have a limited number of timers, specified
by the @tune setting 'process_timer_limit'.  Timers are listed on
the @ps timequeue with the PID of the timer's process in parentheses.
Timers are one-shot events.  To get a repeating timer, you'll need to
restart it when you process a new timer event.
<!-- HTML_TOPICEND -->


<h3 id="timer_stop">TIMER_STOP ( s -- )
<br>

<br>
</h3>
  Stops the timer with the given timerid, if it exists.  If there is
already a timer event on the event queue, it will STAY on the queue
until processed.  As with the timer_start primitive, the &quot;TIMER.&quot; part
of the event name is assumed.  '&quot;first&quot; timer_stop' will stop the timer
created by '5 &quot;first&quot; timer_start'.  Timer ids ARE case sensitive.
<!-- HTML_TOPICEND -->


<h3 id="watchpid">WATCHPID (d -- )
<br>

<br>
</h3>
  Sends a &quot;PROC.EXIT.&quot; event to the current process when the process referred
to by the given pid exits.  If the process process does not exist, the event
will be sent immediately.  The exit event can be retrieved by a call to
EVENT_WAIT.  The event type will be &quot;PROC.EXIT.&quot; with the pid of the process
appended to it.  The pid will also be returned as the data value from the
event.  This primitive requires at least Mucker Level 3.
<!-- HTML_TOPICEND -->



<h2 id="MCPOps">MCP Support Operators</h2>
<ul>
    <li><a href="#mcp_bind">mcp_bind</a></li>
    <li><a href="#mcp_register">mcp_register</a></li>
    <li><a href="#mcp_register_event">mcp_register_event</a></li>
    <li><a href="#mcp_send">mcp_send</a></li>
    <li><a href="#mcp_supports">mcp_supports</a></li>
</ul>



<h3 id="mcp_register">MCP_REGISTER ( strPkgName fltMinVers fltMaxVers -- )
<br>

<br>
</h3>
  Registers an MCP package so that clients can know what is supported.
The minimum and maximum versions supported are represented as floating
point numbers, with the minor version number being divided by 1000.
For example, an MCP package of version 1.1 is represented as 1.001,
and a version of 1.23 is represented as 1.023.  This lets you use
mathematical compares to check version numbers.
<!-- HTML_TOPICEND -->


<h3 id="mcp_register_event">MCP_REGISTER_EVENT ( strPkgName fltMinVers fltMaxVers -- )
<br>

<br>
</h3>
  Registers an MCP package so that clients can know what is supported,
and marks this process as wanting to receive MCP messages as Muf Events.
These events can be read with EVENT_WAIT, and will have event ids starting
with &quot;MCP.&quot;, followed by the package and message names.  The event data
will be a dictionary, containing &quot;descr&quot;, &quot;package&quot;, &quot;message&quot;, and &quot;args&quot;
elements.  The args element will have a dictionary of message arguments
as its value.  The minimum and maximum package versions supported are
represented as floating point numbers, with the minor version number being
divided by 1000.  For example, an MCP package of version 1.1 is represented
as 1.001, and a version of 1.23 is represented as 1.023.  This lets you
use arithmetic compares to check version numbers.  Since this primitive
arranges for MCP messages to be received as muf events, there is no need
to use the MCP_BIND primitive with this.  A side benefit is that _any_ MCP
message sent for this package can be caught, not just the ones you bound.
Also, the process that will handle the events is kept alive, so your data
stored in variables, or on the stack, is kept.
<!-- HTML_TOPICEND -->


<h3 id="mcp_bind">MCP_BIND ( strPkgName strMesgName addrCallback -- )
<br>

<br>
</h3>
  Binds a specific message, so if it is received, the given function is
called.  The callback function is assumed to accept the args:
( intDescr dictArgs -- ) where dictArgs is a dictionary array contain-
ing key-value pairs that represent the arguments of the message.  Each
argument can either have a string value, or a list array of strings,
where the list array is used for multi-line values.
<!-- HTML_TOPICEND -->


<h3 id="mcp_supports">MCP_SUPPORTS ( intDescr strPkgName -- fltVersion )
<br>

<br>
</h3>
  Returns the version number of this package that is supported by this
connection descriptor.  If this package isn't supported, returns 0.0
The version number is represented as a floating point number, with the
minor version number being divided by 1000.  For example, an MCP
package of version 1.1 is represented as 1.001, and a version of 1.23
is represented as 1.023.  This lets you use mathematical compares to
check version numbers.
<!-- HTML_TOPICEND -->


<h3 id="mcp_send">MCP_SEND ( intDescr strPkgName strMsgName dictArgs -- )
<br>

<br>
</h3>
  Sends an MCP message for the given package to the given connection
descriptor.  dictArgs contains key-value pairs, where each key is
an argument name, and the value is the argument value.  Values can
be strings, floats, dbrefs, integers, or array lists of strings.
They all get translated into an appropriate string format before
getting sent.
<!-- HTML_TOPICEND -->



<h2 id="GUIOps">GUI Support Operators</h2>
<ul>
    <li><a href="#c_button">c_button</a></li>
    <li><a href="#c_checkbox">c_checkbox</a></li>
    <li><a href="#c_combobox">c_combobox</a></li>
    <li><a href="#c_datum">c_datum</a></li>
    <li><a href="#c_edit">c_edit</a></li>
    <li><a href="#c_frame">c_frame</a></li>
    <li><a href="#c_hrule">c_hrule</a></li>
    <li><a href="#c_image">c_image</a></li>
    <li><a href="#c_label">c_label</a></li>
    <li><a href="#c_listbox">c_listbox</a></li>
    <li><a href="#c_menu">c_menu</a></li>
    <li><a href="#c_multiedit">c_multiedit</a></li>
    <li><a href="#c_notebook">c_notebook</a></li>
    <li><a href="#c_radiobtn">c_radiobtn</a></li>
    <li><a href="#c_scale">c_scale</a></li>
    <li><a href="#c_spinner">c_spinner</a></li>
    <li><a href="#c_vrule">c_vrule</a></li>
    <li><a href="#gui-options">gui-options</a></li>
    <li><a href="#gui_available">gui_available</a></li>
    <li><a href="#gui_ctrl_command">gui_ctrl_command</a></li>
    <li><a href="#gui_ctrl_create">gui_ctrl_create</a></li>
    <li><a href="#gui_dlog_close">gui_dlog_close</a></li>
    <li><a href="#gui_dlog_create">gui_dlog_create</a></li>
    <li><a href="#gui_dlog_helper">gui_dlog_helper</a></li>
    <li><a href="#gui_dlog_show">gui_dlog_show</a></li>
    <li><a href="#gui_dlog_simple">gui_dlog_simple</a></li>
    <li><a href="#gui_dlog_tabbed">gui_dlog_tabbed</a></li>
    <li><a href="#gui_value_get">gui_value_get</a></li>
    <li><a href="#gui_value_set">gui_value_set</a></li>
    <li><a href="#gui_values_get">gui_values_get</a></li>
</ul>



<h3 id="gui_available">GUI_AVAILABLE (intDescr -- fltVersion)
<br>

<br>
</h3>
  Returns the floating point version number of the MCP GUI protocol
supported by the given descriptor's connection.  The version is
encoded in the number such that major version 8, minor version 12
is represented as 8.012.  If the MCP protocol is not available on
that descriptor, then 0.0 is returned.
<!-- HTML_TOPICEND -->


<h3 id="gui_dlog_create">GUI_DLOG_CREATE (intDescr strType strTitle dictArgs -- strDlogID)
<br>

<br>
</h3>
  If a user has a client that can support the MCP GUI protocol, then this
primitive can be used to generate a dialog on their screen.  The intDescr
is the integer descriptor of the connection to show the dialog on. The
strType is the type of the dialog to create.  Currently, the only options
for strType are D_SIMPLE, D_TABBED, or D_HELPER.  The strTitle argument
is the title to show in the titlebar of the dialog.  dictArgs is a
dictionary array that contains extra optional arguments for creating
the dialog.

<p>
  This primitive returns a string containing the dialogid, used by other
prims to add controls or make various changes.  This dialog will be
hidden and not shown to the user until it has been displayed with the
GUI_DLOG_SHOW command.

<p>
  Supported optional args are:
<pre>
    names      list of user-viewable pane names for D_TABBED &amp; D_HELPER dlogs.
    panes      list of pane ids for D_TABBED and D_HELPER dialogs.
    width      requested width of dialog in pixels.
    height     requested height of dialog in pixels.
    resizable  allows resizing in &quot;x&quot;, &quot;y&quot;, or &quot;both&quot; dimensions.
    minwidth   minimum width of window in pixels.
    minheight  minimum height of window in pixels.
    maxwidth   maximum width of window in pixels.
    maxheight  maximum height of window in pixels.
</pre>
<!-- HTML_TOPICEND -->


<h3 id="gui_dlog_simple">GUI_DLOG_SIMPLE (intDescr strTitle -- strDlogID)
<br>

<br>
</h3>
  If a user has a client that can support the MCP GUI protocol, then
this primitive can be used to generate a simple dialog on their
screen.  By &quot;simple&quot; I mean just an empty window with no controls.
The intDescr argument specifies what connection descriptor to
create the dialog for (ie: what user's screen to show it on), and
the strTitle arg specifies what the title of the dialog will be.
This returns a string containing the dialogid, used by other prims
to add controls or make various changes.  This dialog will be hidden
and not shown to the user until it has been displayed with the
GUI_DLOG_SHOW command.  GUI_DLOG_SIMPLE is actually an inserver
convenience macro that uses GUI_DLOG_CREATE.
<!-- HTML_TOPICEND -->


<h3 id="gui_dlog_tabbed">GUI_DLOG_TABBED (intDescr strTitle dictPages -- strDlogID)
<br>

<br>
</h3>
  If a user has a client that can support the MCP GUI protocol, then
this primitive can be used to generate a tabbed dialog on their
screen.  By &quot;tabbed&quot; I mean a window with a tabbed notebook, similar
to Win95 &quot;property sheets&quot;, with three standard buttons at the bottom.
The standard buttons return values of &quot;_ok&quot;, &quot;_cancel&quot;, and &quot;_apply&quot;.
The intDescr argument specifies what connection descriptor to create
the dialog for (ie: what user's screen to show it on).  The strTitle
arg specifies what the title of the dialog will be.  The dictPages
argument is a dictionary array of page ids and display names to be
created.  (ids as dictionary keys, display names as vals) This prim
returns a string containing the dialogid, used by other prims to add
controls or make various changes.  When you create a new control, you
can specify which page to put it in by passing a pageid in as the
value of the &quot;pane&quot; argument.  This dialog will be hidden and not
shown to the user until it has been displayed with the GUI_DLOG_SHOW
command.  GUI_DLOG_SIMPLE is actually an inserver convenience macro
that uses GUI_DLOG_CREATE.
<!-- HTML_TOPICEND -->


<h3 id="gui_dlog_helper">GUI_DLOG_HELPER (intDescr strTitle dictPages -- strDlogID)
<br>

<br>
</h3>
  If a user has a client that can support the MCP GUI protocol, then
this primitive can be used to generate a helper dialog on their
screen.  By &quot;helper&quot; I mean a dialog similar to a Win95 wizard dialog.
The standard buttons return values of &quot;_cancel&quot;, and &quot;_finish&quot;.
The intDescr argument specifies what connection descriptor to
create the dialog for (ie: what user's screen to show it on), and
the strTitle arg specifies what the title of the dialog will be.
The dictPages argument is a dictionary array of page ids and display
names to be created.  (ids as dictionary keys, display names as vals)
This returns a string containing the dialogid, used by other prims
to add controls or make various changes.  When you create a new
control, you can specify which page to put it in by passing a pageid
in as the value of the &quot;pane&quot; argument.  This dialog will be hidden
and not shown to the user until it has been displayed with the
GUI_DLOG_SHOW command.  GUI_DLOG_SIMPLE is actually an inserver
convenience macro that uses GUI_DLOG_CREATE.
<!-- HTML_TOPICEND -->


<h3 id="gui_dlog_show">GUI_DLOG_SHOW (strDlogID -- )
<br>

<br>
</h3>
  Forces a given dialog to be shown to the user.  The strDlogId is what
was returned by the GUI_DLOG_CREATE (or similar) command.
<!-- HTML_TOPICEND -->


<h3 id="gui_dlog_close">GUI_DLOG_CLOSE (strDlogID -- )
<br>

<br>
</h3>
  Forces a given dialog to be closed and destroyed.  The strDlogId is
what was returned by the GUI_DLOG_CREATE (or similar) command.
<!-- HTML_TOPICEND -->


<h3 id="gui_ctrl_create">GUI_CTRL_CREATE (strDlogID strType strCtrlID dictArgs -- )
<br>

<br>
</h3>
  Creates a new control in a given dialog.  strDlogID contains the dlogid
returned from a GUI_DLOG_SIMPLE (or similar) command.  strType contains
the control type.  To make debugging easier and faster, MUF $defs have
been provided for each control type.  They are:
C_DATUM, C_LABEL, C_IMAGE, C_HRULE, C_VRULE, C_BUTTON, C_CHECKBOX,
C_RADIOBTN, C_EDIT, C_MULTIEDIT, C_COMBOBOX, C_SPINNER, C_SCALE,
C_LISTBOX, C_MENU, C_FRAME, C_NOTEBOOK.
If you use these instead of the actual type name strings, then if you
mistype one, it will throw an error when trying to compile, instead of
when you try to run it.  The strCtrlID arg is the id to give the control,
for use in reading the values back later, or modifying the control.
dictArgs is used to pass any other arguments needed to create the control.
This will be used by almost all controls.  It is a dictionary array that
contains argnames as keys, each with an argument value.
<!-- HTML_TOPICEND -->


<h3 id="gui_values_get">GUI_VALUES_GET (strDlogID -- dictValues)
<br>

<br>
</h3>
  Returns a dictionary containing all the control values for the given
dialog.  The keys are the control ids.
<!-- HTML_TOPICEND -->


<h3 id="gui_value_get">GUI_VALUE_GET (strDlogID strCtrlID -- arrValue)
<br>

<br>
</h3>
  This gets the current value of the given GUI control, and returns it as a
string list array.
<!-- HTML_TOPICEND -->


<h3 id="gui_value_set">GUI_VALUE_SET (strDlogID strCtrlID strValue -- )
<br>

<br>
</h3>
  Sets the value of a given control in a given dialog.
<!-- HTML_TOPICEND -->


<h3 id="gui_ctrl_command">GUI_CTRL_COMMAND (strDlogID strCtrlID strCommand dictArgs -- )
<br>

<br>
</h3>
  This is the generic primitive for executing a GUI control specific command.
The dictionary contains the arguments for the given command.

At the time of this writing, the following commands are supported:

<pre>
&quot;insert&quot; Inserts text or list items into the given control.
        Takes the following arguments:
        &quot;values&quot; list of values or text to insert.
        &quot;before&quot; position in widget to insert before.  Defaults to &quot;end&quot;.

&quot;delete&quot; Deletes text or list items from the given control.
        Takes the following arguments if the widget is a listbox:
        &quot;items&quot; The list of listbox items to delete, given by index.
        Takes the following arguments if the widget is not a listbox:
        &quot;first&quot; gives the first item to delete.
        &quot;last&quot;  gives the last item of the range to delete.  If not given,
                this defaults to the same value as &quot;first&quot;.

&quot;select&quot; Selects text or list items in the given control.
        Takes the following arguments if the widget is a listbox:
        &quot;items&quot; The list of listbox items to select, given by index.
                All other items will be deselected.
        Takes the following arguments if the widget is not a listbox:
        &quot;first&quot; gives the first character to select.
        &quot;last&quot;  gives the last character of the range to select.  If not
                given, this defaults to the same value as &quot;first&quot;.

&quot;show&quot;   Scrolls the given item or character into view.
        Takes the following arguments:
        &quot;position&quot; The item or character position to make visible.

&quot;cursor&quot; Moves the cursor of the given control.
        Takes the following arguments:
        &quot;position&quot; The item or character to move the cursor to or before.
</pre>
<!-- HTML_TOPICEND -->


<h3 id="gui-options">MCP GUI Options:
<br>

<br>
</h3>
  The MCP GUI package has several common options used when creating controls
in dialog.  These options are common to almost all control types.  They
are as follows:

<pre>
    value     Holds the value of the control.
    valname   Specifies the name used with GUI_VALUE_GET/SET, to refer to the
            value for this control.  Multiple controls can share the same
            valname, in the case of radio buttons and the like.
    report    If set to 1, image, checkbox, and radiobutton controls will send
            a 'buttonpress' event when the user clicks on them.  All other
            control types send a 'valchanged' gui event when their value
            is changed If the value is changed several times within a few
            seconds, only the final value is guaranteed to have a valchanged
            event.  It is possible to receive valchanged events even though
            the value appears to have not changed.
    pane      The pane in which to place this control.  Some controls, like
            the notebook or frame controls, create new panes in which you
            can place controls.
    newline   If 1, next control will be at the beginning of the next row.
            If 0, next control will be in the next column to the right,
            taking into account colspan and colskip.  Defaults to 1.
    sticky    Which sides of the cell this control sticks to.  This is a
            string with any or all of the letters 'n', 's', 'e', or 'w',
            corresponding to north, south, east, and west.
    row       If given, forces the control to be placed in the given row.
    column    If given, forces the control to be placed in the given column.
    rowspan   Number of rows this control spans across.  Defaults to 1.
    colspan   Number of columns this control spans across.  Defaults to 1.
    colskip   Number of columns to skip before placing this control.
            Defaults to 0.
    minwidth  Minimum width of control in pixels.
    minheight Minimum width of control in pixels.
    hweight   How much the starting column of this control should expand.
            When filling unused space, if there are two columns, one with
            hweight 2 and the other with hweight 1, then the column with
            hweight 2 will be expanded twice as much as the other column.
            The default hweight is 0.  Note that the last control in the
            given column sets the hweight for the column.  If no hweights
            are given in a pane, then if the pane is forced to be wider
            than the contained controls, the empty space will be placed
            in the right side of the pane.
    vweight   How much the starting row of this control should expand.
            When filling unused space, if there are two rows, one with
            vweight 2 and the other with vweight 1, then the row with
            vweight 2 will be expanded twice as much as the other row.
            The default hweight is 0.  Note that the last control in the
            given row sets the vweight for the row.  If no vweights
            are given in a pane, then if the pane is forced to be taller
            than the contained controls, the empty space will be placed
            in the bottom of the pane.
    toppad    Number of pixels padding to add above this control.
    leftpad   Number of pixels padding to add to the left of this control.
</pre>
<!-- HTML_TOPICEND -->


<h3 id="c_datum">C_DATUM ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a Datum control in a GUI dialog.  The Datum control is a non-
visible control that just holds a value.  It's useful for keeping program
state information.
The control has no control-specific options.
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_menu">C_MENU ( -- s)
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a menu control in a GUI dialog.  The menu control is a pull-down
menu that a user can select commands from.  It can contain labels, hrules,
buttons, checkboxes, radiobuttons, and other menus.
The control options specific to this type of control are:
<pre>
    text    The text to display as the user-visible name of this menu. For
            example: &quot;Settings&quot;, &quot;Help&quot;, etc.
    pane    The id of the menu in which to place this menu as a cascading
            menu.  If specified as &quot;&quot;, then this is a toplevel menu.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a> and
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_label">C_LABEL ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a text label control in a GUI dialog.  The label control is just
a text label, nothing more.
The control options specific to this type of control are:
<pre>
    value    Contains the text to be displayed.
    justify  Which way to justify the text, if word wrapped.  Can be one of
            left, right, or center.
    maxwidth The max width in pixels for the label, before it word wraps.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_image">C_IMAGE ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create an image control in a GUI dialog.  The image control is a picture
whose image is loaded from a URL.
The control options specific to this type of control are:
<pre>
    value    Holds the url of the image to be displayed.
    width    The width of the image in pixels.  This is required.
    height   The height of the image in pixels.  This is required.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_hrule">C_HRULE ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a Horizontal Rule control in a GUI dialog.
The hrule control is just a horizontal line, nothing more.
The control options specific to this type of control are:
<pre>
    height   Number of pixels of vertical thickness of the horizontal line.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_vrule">C_VRULE ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a Vertical Rule control in a GUI dialog.
The vrule control is just a vertical line, nothing more.
The control options specific to this type of control are:
<p>
    width    Number of pixels of horizontal thickness of the vertical line.
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_button">C_BUTTON ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a Button control in a GUI dialog.
The Button control is a simple button the user can press.
The control options specific to this type of control are:
<pre>
    text     The text label that will show on the button face.
    width    Number of characters text the button should be able to hold.
    dismiss  If 1, the dialog will be dismissed when this button is pressed.
            Defaults to 1.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_checkbox">C_CHECKBOX ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a CheckBox control in a GUI dialog.
The CheckBox control is used for indicating simple &quot;on/off&quot; boolean settings.
The control options specific to this type of control are:
<pre>
    text     The text label that will show to the right of the checkbox.
    onvalue  The value this control should have when checked.
    offvalue The value this control should have when not checked.
    value    The current state/value of the control.  This should match either
            the value of the &quot;onvalue&quot; or &quot;offvalue&quot; argument.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_radiobtn">C_RADIOBTN ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a radio button control in a GUI dialog.
The radio button control is used for selecting one of a number of options.
The control options specific to this type of control are:
<pre>
    text     The text label that will show to the right of the radio button.
    valname  The name used to refer to the value of this radio button group.
            A radio button group is defined as radio buttons that share the
            same valname.
    selvalue The value of this radio button group, when this is selected.
    value    The current state/value of the radio button group.  This should
            match one of the selvalues of a radio button in this group.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_edit">C_EDIT ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a single-line text Edit control in a GUI dialog.
The Edit control is used for single-line text string editing.
The control options specific to this type of control are:
<pre>
    text     The text label that will show to the left of the control.
            Defaults to &quot;&quot; (no label).  If there is a label, then this
            control will be split across two columns, with the label in
            the first one, the edit control in the second.
    value    The current contents/value of the control.
    maxlen   The maximum string length allowed.  Defaults to 1024 chars.
    width    Number of average character widths wide this control should be.
            Defaults to 40 characters wide.
    height   Number of lines high this control will be.  Defaults to 1.
            If this is greater than 1, then text will wrap as you type it,
            but you still won't be able to insert carriage returns.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_multiedit">C_MULTIEDIT ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a Multi-line text Edit control in a GUI dialog.
The MultiEdit control is used for multi-line text string editing.
The control options specific to this type of control are:
<pre>
    value    The current contents/value of the control.
    width    Number of average character widths wide this control should be.
            Defaults to 40 characters wide.
    height   Number of lines high this control will be.  Defaults to 1.
    font     Specifies whether the font used is &quot;fixed&quot; or &quot;proportional&quot;.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_combobox">C_COMBOBOX ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a Win95 style combobox with a pulldown menu of options.
The ComboBox control is used for selecting from multiple standard options
in a compact form factor.  Optionally the user can enter arbitrary data.
The control options specific to this type of control are:
<pre>
    text     The text label that will show to the left of the control.
            Defaults to &quot;&quot; (no label).  If there is a label, then this
            control will be split across two columns, with the label in
            the first one, the combobox control in the second.
    value    The current contents/value of the control.
    width    Number of average character widths wide this control should be.
            Defaults to 20 characters wide.
    options  Contains a list of entries for the combobox pulldown menu, one
            per line.
    editable If 1, the user can edit the value arbitrarily.  If 0, then the
            user can only pick a value from the combobox pulldown menu.
            Defaults to 0
    sorted   Causes the contents of the pulldown menu to be auto-sorted.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_listbox">C_LISTBOX ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a ListBox control in a GUI dialog.  The ListBox control is used
for selecting one or more entries from a list of options.
The control options specific to this type of control are:
<pre>
    value    The list of the currently selected list items, given as a list
            of integers that refer to list positions.  0 is the first item.
    font     Specifies whether the font used is &quot;fixed&quot; or &quot;proportional&quot;.
    width    Number of average character widths wide this control should be.
            Defaults to 40 characters wide.
    height   Number of lines high this control will be.  Defaults to 10.
    options  The list of entries for the listbox contents, one per line.
    selectmode  One of &quot;single&quot;, &quot;multiple&quot;, or &quot;extended&quot;.  Specifies how
            list item selection is performed, and whether more than one item
            can be selected at a time.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_spinner">C_SPINNER ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a Spinner control in a GUI dialog.  The Spinner control is used
for setting an integer value, that can be incremented and decremented via
up and down buttons.
The control options specific to this type of control are:
<pre>
    value    The current integer value of the control.
    text     If given, makes a label with the given text next to the spinner.
    minval   The minimum integer value that this control can be set to.
    maxval   The maximum integer value that this control can be set to.
    width    Number of digits that this control should be able to hold.
            Defaults to 12 digits.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_scale">C_SCALE ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a Scale control in a GUI dialog.  The Scale control is used for
setting a floating point value, that can be changed by moving a slider.
The control options specific to this type of control are:
<pre>
    value      The current floating point value of the control.
    text       If given, makes a label with the given text next to the scale.
    minval     The minimum value that this control can be set to.
    maxval     The maximum value that this control can be set to.
    resolution This is the smallest change available via the slider.
                Defaults to 1.
    bigincrement  How much to change the value when the user clicks in the
                bar on either side of the slider.  Defaults to 10.
    digits     The number of significant digits of resolution for the value.
    orient     The orientation, &quot;horiz&quot; or &quot;vert&quot;.  (Defaults to horiz.)
    length     The length of the long axis of the scale, in pixels.
            Defaults to 100 pixels.
    width      The length of the short axis of the scale, in pixels.
            Defaults to 15 pixels.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_frame">C_FRAME ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE
to create a frame control in a GUI dialog.  Frame controls are used to
contain and organize other controls.  Frames can be either invisible
containers that just organize the positions of other controls, or they
can be visible groupboxes with borders and labels.
The control options specific to this type of control are:
<pre>
    text        If set, the frame, as a groupbox, will have the given label.
    visible     If set to 1, causes a border to be drawn around the frame.
    collapsible This, is set to 1, allows the group box to be collapsed.
    collapsed   If the frame is collapsible, this sets the state to collapsed.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="c_notebook">C_NOTEBOOK ( -- s )
<br>

<br>
</h3>
  This is a standard server define used in conjunction with GUI_CTRL_CREATE to
create a tabbed notebook control in a GUI dialog.  Tabbed notebook controls
are used to contain and organize other controls in multiple pages that the
user can select between.
The control options specific to this type of control are:
<pre>
    panes       The list of pane ids to create.  Those are used by other
                controls, when you wish to specify which pane the control
                is in.
    names       The list of names that should be displayed on the pane's tabs.
                The first name should be for the first pane, the second name
                should be for the second name, etc.
    width       The minimum width of the notebook's client area, in pixels.
    height      The minimum height of the notebook's client area, in pixels.
</pre>
<p>Also see:
    <a href="#gui_ctrl_create">GUI_CTRL_CREATE</a>,
    <a href="#gui_dlog_create">GUI_DLOG_CREATE</a> and
    <a href="#gui_options">GUI_OPTIONS</a>
</p>
<!-- HTML_TOPICEND -->



<h2 id="Exceptions">Exception Handling</h2>
<ul>
    <li><a href="#abort">abort</a></li>
    <li><a href="#checkargs">checkargs</a></li>
    <li><a href="#try">try</a></li>
</ul>



<h3 id="try">TRY ( i -- )
<br>
CATCH ( -- s ) or CATCH_DETAILED ( -- a )
<br>
ENDCATCH ( -- )
<br>

<br>
</h3>
  The TRY statement marks the start of the TRY-CATCH block, and locks all
but the top i stack items against removal or alteration.  If code inside
of a TRY-CATCH block gets an error, or attempts to remove or alter locked
stack items, then execution immediately jumps to the CATCH statement.
If, instead, execution reaches the end of the TRY-CATCH block without
error, then the stack is unlocked, and execution is resumed after the
ENDCATCH statement.

<p>
  On an error, the CATCH statement will pop off all stack items that were
not locked, to return the stack to a known state.  The stack will then
be unlocked, and the thrown error string will be pushed onto the stack.
Finally, the code inside the CATCH-ENDCATCH block will then be executed.
If you have nested TRY-CATCH blocks, then the most recent TRY-CATCH
block will catch the error thrown.  If the error is thrown in another
called function or program, then those calls are unwound back to the
most recent TRY-CATCH block.

<p>
  The CATCH_DETAILED statement can be used in place of the CATCH statement.
It behaves identically to CATCH, except it pushes a dictionary onto the
stack, instead of a string.  This dictionary holds much more detailed
information about the thrown exception.  The following dictionary entries
are currently supported:

<pre>
    &quot;error&quot;    The error message string, like what CATCH returns.
    &quot;instr&quot;    The name string of the instruction which threw the error.
    &quot;line&quot;     The integer program line number where the error was thrown.
    &quot;program&quot;  The dbref of the program in which the error was thrown.
</pre>

<p>
  The ABORT primitive may be used to throw an arbitrary error anywhere.
If you need to re-propagate an error, you can use ABORT.

Example code:
<pre>
    : get_a_prop ( d s -- s )
        2 TRY
            getpropstr
        CATCH
            pop (We got an error trying to read the prop.  Ignore it.)
            &quot;&quot;
        ENDCATCH
    ;
</pre>
<!-- HTML_TOPICEND -->


<h3 id="abort">ABORT ( s -- )
<br>

<br>
</h3>
  Aborts the MUF program with an error.  ie:  '&quot;Bad vibes.&quot; abort' would
Stop the MUF program and tell the user a message like:
Programmer error.  Please tell Revar the following message:
#1234 (line 23) ABORT: Bad vibes.
<!-- HTML_TOPICEND -->


<h3 id="checkargs">CHECKARGS (??? s -- )
<br>

<br>
</h3>
  Takes a string argument that contains an expression that is used
to test the arguments on the stack below the given string.  If they
do not match what the expression says should be there, then it aborts
the running program with an appropriate Program Error Message.  The
expression is formed from single character argument tests that refer
to different argument types.  The tests are:

<pre>
  a - function address.
  d - dbref.  (#-1, #-2, #-3 are okay)
  D - valid, non-garbage dbref.  (#-1, #-2 NOT allowed.  #-3 is okay)
  e - exit dbref.  (#-1, #-2 allowed)
  E - exit dbref.  (#-1, #-2 NOT allowed)
  f - program dbref.  (#-1, #-2 allowed)
  F - program dbref.  (#-1, #-2 NOT allowed)
  i - integer.
  l - lock boolean expression.
  n - floating point number.
  p - player dbref.  (#-1, #-2 allowed)
  P - player dbref.  (#-1, #-2 NOT allowed)
  r - room dbref.  (#-1, #-2 allowed)  (#-3 is a room)
  R - room dbref.  (#-1, #-2 NOT allowed)  (#-3 is a room)
  s - string.
  S - non-null string.
  t - thing dbref.  (#-1, #-2 allowed)
  T - thing dbref.  (#-1, #-2 NOT allowed)
  v - variable.
  x - dictionary.
  y - array.  (dictionary allowed)
  Y - array.  (dictionary NOT allowed)
  ? - any stack item type.
</pre>

<p>
  Tests can be repeated multiple times by following the test with a number.
ie: '&quot;i12&quot; checkargs' would test the stack for 12 integers.

<p>
  The last test in the string expression will be done on the top stack item.
Tests are done from the top of the stack down, in order, so the last test
that fails in a string expression will be the one that the Program Error
will be given for.  ie: '&quot;sdSi&quot; checkargs' will test that the top stack
item is an integer, then it tests that the next item down is a non-null
string, then it tests the third item from the top to see if it is a dbref,
and lastly it tests to make sure that the 4th item from the top is a string.

<p>
  Spaces are ignored, so &quot;s d i&quot; is the same as &quot;sdi&quot;.  However, multipliers
are ignored if they follow a space, so &quot;s 4d i&quot; is also the same as &quot;sdi&quot;.
This is because you are basically telling it to repeat the space 4 times,
and since spaces are ignored, it has no effect.

<p>
  If you have a function that takes a stack item of any type, you can use
the &quot;?&quot; test.  &quot;?&quot; will match a string, integer, dbref, or any other type.

<p>
  Since sometimes arguments are passed in ranges, such as the way that the
explode primitive returns multiple strings with an integer count on top,
there is a way to group arguments, to show that you expect to receive a
range of that type.  ie: '&quot;{s}&quot; checkargs' would test the stack for a set
of strings like '&quot;first&quot; &quot;second&quot; &quot;third&quot; &quot;fourth&quot; 4' where the top stack
item tells how many strings to expect within the range.

<p>
  Sometimes a function takes a range of paired arguments, such as:
'&quot;one&quot; 1 &quot;two&quot; 2 &quot;three&quot; 3 &quot;four&quot; 4 4' where the count on the top of the
range refers to the number of pairs.  To test for the range given above,
you would use '&quot;{si}&quot; checkargs' to tell it that you want to check for
a range of paired strings and integers.  You can group as many argument
tests together in a range as you would like.  ie: you could use &quot;{sida}&quot;
as an expression to test for a range of related strings, integers, dbrefs,
and function addresses.

<p>
  Since the argument multipliers refer to the previous test OR range, you
can test for two string ranges with the test '&quot;{s}2&quot; checkargs'.  ie:
It would succeed on a stack of: '&quot;one&quot; &quot;two&quot; &quot;three&quot; 3 &quot;four&quot; &quot;five&quot; 2'.
'&quot;{s2}&quot; checkargs', however, would test for one range of paired strings.
ie: It would succeed with a stack of: '&quot;one&quot; &quot;1&quot; &quot;two&quot; &quot;2&quot; &quot;three&quot; &quot;3&quot; 3'.

<p>
  If, for some reason, you need to pass a range of ranges to a function,
you can test for it by nesting the braces.  ie: '&quot;{{s}}&quot; checkargs'

<p>
  Now, as one last example, the primitive notify_exclude, if we were to test
the arguments passed to it manually, would use the test '&quot;R{p}s&quot; checkargs'
to test for a valid room dbref, a range of player dbrefs or #-1s, and a
string.
<!-- HTML_TOPICEND -->



<h2 id="Debug">Debugging</h2>
<ul>
    <li><a href="#breakpoints">breakpoints</a></li>
    <li><a href="#debug notation">debug notation</a></li>
    <li><a href="#debug_line">debug_line</a></li>
    <li><a href="#debug_off">debug_off</a></li>
    <li><a href="#debug_on">debug_on</a></li>
    <li><a href="#debugger">debugger</a></li>
    <li><a href="#debugger_break">debugger_break</a></li>
    <li><a href="#debugger_commands">debugger_commands</a></li>
</ul>



<h3 id="debug_on">DEBUG_ON ( -- )
<br>

<br>
</h3>
  Turns the programs debug stack trace on.
<!-- HTML_TOPICEND -->


<h3 id="debug_off">DEBUG_OFF ( -- )
<br>

<br>
</h3>
  Turns the programs debug stack trace off.
<!-- HTML_TOPICEND -->


<h3 id="debug_line">DEBUG_LINE ( -- )
<br>

<br>
</h3>
  Displays a single line of debug stack trace if the player running the program
controls it.
<!-- HTML_TOPICEND -->


<h3 id="debugger_break">DEBUGGER_BREAK ( -- )
<br>

<br>
</h3>
  If the user controls the currently running program, and the program hasn't
ever backgrounded, this will force the program into the interactive MUF
debugger at the current location.  If the user was already in the MUF
debugger, this will force a breakpoint stop at the current location.
<!-- HTML_TOPICEND -->


<h3 id="debugger">The MUF Debugger:
<br>

<br>
</h3>
  To use the interactive debugger, set the ZOMBIE (Z) flag on a program.  When
you run a programm you own which is set ZOMBIE, you will be placed in the
interactive MUF debugger.
<p>
  When you enter the debugger, the program counter will be placed at the entry
point of the MUF.  This should always be the start of a function.  From
there, you may set breakpoints, examine or change the stack or variables,
list lines of code, step through, or continue execution.
<p>
  Every time execution halts and returns you to the debugger, the argument
stack is displayed, as well as a dump of the current line.  If execution
is at the beginning of the line, the actual line of source will be
displayed, otherwise the compiled instructions will be displayed with the
current instruction marked by surrounding braces.
<p>Also see:
    <a href="#debugger_commands">DEBUGGER_COMMANDS</a>,
    <a href="#breakpoints">BREAKPOINTS</a> and
    <a href="#notation">NOTATION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="debugger_commands">Debugger commands:
<br>

<br>
<pre>
</h3>
  cont            continues execution until a breakpoint is hit.
  finish          completes execution of current function.
  step [NUM]      executes one (or NUM, 1) lines of muf.
  stepi [NUM]     executes one (or NUM, 1) muf instructions.
  next [NUM]      like step, except skips CALL and EXECUTE.
  nexti [NUM]     like stepi, except skips CALL and EXECUTE.
  break LINE#     sets breakpoint at given LINE number.
  break FUNCNAME  sets breakpoint at start of given function.
  breaks          lists all currently set breakpoints.
  delete NUM      deletes breakpoint by NUM, as listed by 'breaks'
  where [LEVS]    displays function call backtrace of up to num levels deep.
  stack [NUM]     shows the top num items on the stack.
  print v#        displays the value of given global variable #.
  print lv#       displays the value of given local variable #.
  trace [on|off]  turns on/off debug stack tracing.
  list [L1,[L2]]  lists source code of given line range.
  list FUNCNAME   lists source code of given function.
  listi [L1,[L2]] lists instructions in given line range.
  listi FUNCNAME  lists instructions in given function.
  words           lists all function word names in program.
  words PATTERN   lists all function word names that match PATTERN.
  exec FUNCNAME   calls given function with the current stack data.
  prim PRIMITIVE  executes given primitive with current stack data.
  push DATA       pushes an int, dbref, var, or string onto the stack.
  pop             pops top data item off the stack.
  help            displays this help screen.
  quit            stop execution here.
</pre>
<p>Also see:
    <a href="#debugger">DEBUGGER</a>,
    <a href="#breakpoints">BREAKPOINTS</a> and
    <a href="#notation">NOTATION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="breakpoints">Breakpoints:
<br>

<br>
</h3>
  Breakpoints can be set on a specefic line number, or on execution of a
specific word.  To set a breakpoint, simply enter 'break LINE', as in
'break 123', or 'break WORD', as in 'break do-something'.  To list current
breakpoints, simply enter the command 'breaks'.  To delete a breakpoint,
'delete NUM', where NUM is the number 'breaks' listed for that breakpoint.
An implied breakpoint is always triggered on return of words after an
execute, or an EXEC, when the line they were called from was stepped with
next.
<p>
  A breakpoint is triggered after execution of the program has continued with
either 'continue', 'finish', or while in a word called when 'next' or
'nexti' is used.
<!-- HTML_TOPICEND -->


<h3 id="debug notation">Instruction notation as given by DEBUG dumps and the MUF debugger:
<br>

<br>
<pre>
</h3>
    PRIMITIVE:      A call to that primitive. (As in POP or ROTATE)
    NUM:            An integer. (As in 5 or -154)
    #dbref:         An object dbref. (As in #1 or #63516)
    &quot;Text&quot;:         A string.  (As in &quot;Wizard&quot; or &quot;Hello world!&quot;) If it is
                    followed by _, there is more in the string than shown.
    [Lock]:         A lock in its native structure. (As in [#0|!#0])
    VNUM:           Variable number NUM. (As in V0 or V10)
    LVNUM:          Local variable number NUM. (As in LV2 or LV5)
    SVNUM:          Scoped function variable number NUM. (As in SV2 or SV5)
    (word):         The start of a word. (As in (do-something))
    'word:          The address of word. (As in 'do-something)
    '#dbref'word:   The address of word in another program.
                    (As in '#2345'do-something)
    EXEC-&gt;word:     A subroutine call to word. (As in EXEC-&gt;do-something)
    JMP-&gt;word:      A jump to word. (As in JMP-&gt;do-something)
    JMP-&gt;lineNUM:   An internal jump used by IF-ELSE-THEN and loops.
                    (As in JMP-&gt;line9)
    IF-&gt;lineNUM:    An internal IF jump.  If the top stack item is 0, the jump
                    occurs, otherwise this is just a no-op. (As in IF-&gt;line9)
    ???:            An unknown instruction type. (As in ???)
    ???&lt;file:line&gt;: An instruction that has been freed.  If you see this please
                    report it to the current server code maintainer.
                    (As in ???&lt;p_db.c:1042&gt;)
</pre>

Some tokens are just used as placeholders, and disappear as soon as the MUF
is compiled.  These are BEGIN, and THEN.  In addition, FOR loops will
produce at least two extra instruction, and an IF-&gt;lineNUM.  FORITER, the
iteration counter, and FORPOP, which cleans up from the for loop.  If you
JMP or EXIT out of a word from nested FOR loops, you will see a FORPOP
before the JMP or EXIT for each nexted FOR loop.
<!-- HTML_TOPICEND -->



<h2 id="MiscOps">Miscellaneous</h2>
<ul>
    <li><a href="#force">force</a></li>
    <li><a href="#force_level">force_level</a></li>
    <li><a href="#forcedby">forcedby</a></li>
    <li><a href="#forcedby_array">forcedby_array</a></li>
    <li><a href="#version">version</a></li>
</ul>



<h3 id="version">VERSION ( -- s)
<br>

<br>
</h3>
  Returns the version of this code in a string. &quot;Muck2.2fb5.55&quot;, currently.
<p>Also see:
    <a href="#__version">__VERSION</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="force">FORCE (d s -- )
<br>

<br>
</h3>
  Forces player d to do action s as if they were @forced.  (wizbit only)
<p>Also see:
    <a href="#force_level">FORCE_LEVEL</a> and
    <a href="#forcedby">FORCEDBY</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="force_level">FORCE_LEVEL ( -- i)
<br>

<br>
</h3>
  Returns non-zero if the code we are running was triggered by an @force.
<p>Also see:
    <a href="#force">FORCE</a> and
    <a href="#forcedby">FORCEDBY</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="forcedby">FORCEDBY ( -- d)
<br>

<br>
</h3>
  Returns the dbref of the most recent object forcing the code to run, or
<p>
  #-1 if none. (Wizbit only)
<p>Also see:
    <a href="#force">FORCE</a>,
    <a href="#force_level">FORCE_LEVEL</a> and
    <a href="#forcedby_array">FORCEDBY_ARRAY</a>
</p>
<!-- HTML_TOPICEND -->


<h3 id="forcedby_array">FORCEDBY_ARRAY ( -- a)
<br>

<br>
</h3>
  Returns an array containg the dbrefs of all objects forcing the code to run,
<p>
  most recent first. (Wizbit only)
<p>Also see:
    <a href="#force">FORCE</a>,
    <a href="#force_level">FORCE_LEVEL</a> and
    <a href="#forcedby">FORCEDBY</a>
</p>
<!-- HTML_TOPICEND -->


</body>
</html>
